============================= test session starts ==============================
platform linux -- Python 3.11.0, pytest-8.3.2, pluggy-1.6.0 -- /mnt/jarvis2/.venv/bin/python
cachedir: .pytest_cache
rootdir: /home/founder/jarvis2
configfile: pytest.ini
testpaths: tests, agents/interface/chainlit/tests, agents/core/autonomy/tests, .repo_studios/tests, agents/core/monitoring/metrics_storage/tests
plugins: asyncio-0.23.8, cov-6.2.1, anyio-4.10.0, langsmith-0.4.27
asyncio: mode=Mode.STRICT
collecting ... collected 1445 items / 1 skipped

tests/agents/agent_instances/test_label_metrics_guard.py::test_label_metrics_emitted_within_threshold PASSED [  0%]
tests/agents/agent_instances/test_label_metrics_guard.py::test_label_metrics_suppressed_when_exceed_threshold PASSED [  0%]
tests/agents/agent_instances/test_metrics_exposition.py::test_builder_empty_flag_disabled PASSED [  0%]
tests/agents/agent_instances/test_metrics_exposition.py::test_builder_empty_flag_enabled PASSED [  0%]
tests/agents/agent_instances/test_metrics_exposition.py::test_builder_with_instances PASSED [  0%]
tests/agents/agent_instances/test_metrics_exposition.py::test_builder_emits_pruned_counter PASSED [  0%]
tests/agents/agent_instances/test_registry_prune.py::test_no_prune_when_flag_absent PASSED [  0%]
tests/agents/agent_instances/test_registry_prune.py::test_prune_removes_stale_instances PASSED [  0%]
tests/agents/agent_instances/test_registry_prune.py::test_prune_disabled_via_toggle PASSED [  0%]
tests/agents/agent_instances/test_rss_sampling.py::test_rss_sampling_disabled_by_default PASSED [  0%]
tests/agents/agent_instances/test_rss_sampling.py::test_rss_sampling_with_fake_reader PASSED [  0%]
tests/agents/agent_instances/test_rss_sampling.py::test_rss_sampling_failure_increments_counter PASSED [  0%]
tests/agents/benchmark/test_benchmark_agent_summary.py::test_compute_summary_and_mrp_artifacts PASSED [  0%]
tests/agents/benchmark/test_junit_parser.py::test_parse_junit_durations_extracts_times PASSED [  0%]
tests/agents/benchmark/test_junit_parser.py::test_p95_simple PASSED      [  1%]
tests/agents/benchmark/test_label_normalization.py::test_normalize_trims_parameters_and_preserves_keys PASSED [  1%]
tests/agents/benchmark/test_label_normalization.py::test_normalize_converts_backslashes_and_escapes_quotes PASSED [  1%]
tests/agents/benchmark/test_label_normalization.py::test_normalize_applies_hash_for_very_long_labels PASSED [  1%]
tests/agents/core/messaging/test_agent_topics_adapters.py::test_diagnostic_subscription_in_order PASSED [  1%]
tests/agents/core/messaging/test_agent_topics_adapters.py::test_category_overflow_drops_oldest PASSED [  1%]
tests/agents/core/messaging/test_agent_topics_adapters.py::test_category_selector_namespace_and_regex PASSED [  1%]
tests/agents/core/monitoring/metrics_storage/model_metrics/test_batch_metrics_analytics.py::test_analyze_groups_metrics_by_model PASSED [  1%]
tests/agents/core/monitoring/metrics_storage/model_metrics/test_batch_metrics_analytics.py::test_analyze_scaling_trend_detects_hard_cutoff PASSED [  1%]
tests/agents/core/monitoring/metrics_storage/model_metrics/test_batch_metrics_analytics.py::test_recommendation_service_returns_targeted_suggestions PASSED [  1%]
tests/agents/core/monitoring/metrics_storage/model_metrics/test_batch_metrics_enrichment.py::test_enrich_adds_per_item_metrics_and_speedup PASSED [  1%]
tests/agents/core/monitoring/metrics_storage/model_metrics/test_batch_metrics_enrichment.py::test_enrich_applies_overhead_from_single_item_metadata PASSED [  1%]
tests/agents/core/monitoring/metrics_storage/model_metrics/test_batch_metrics_manager.py::test_store_batch_metrics_rejects_single_item_payload PASSED [  1%]
tests/agents/core/monitoring/metrics_storage/model_metrics/test_batch_metrics_manager.py::test_store_batch_metrics_enriches_payload_before_persisting PASSED [  1%]
tests/agents/core/monitoring/metrics_storage/model_metrics/test_batch_metrics_manager.py::test_get_batch_metrics_builds_filters_and_queries_repository PASSED [  2%]
tests/agents/core/monitoring/metrics_storage/model_metrics/test_batch_metrics_repository.py::test_store_metrics_writes_to_database_and_file PASSED [  2%]
tests/agents/core/monitoring/metrics_storage/model_metrics/test_batch_metrics_repository.py::test_build_filters_adds_pagination PASSED [  2%]
tests/agents/core/monitoring/metrics_storage/model_metrics/test_batch_metrics_repository.py::test_fetch_paginated_parses_metadata PASSED [  2%]
tests/agents/core/monitoring/visualization/utils/charting/test_chartjs_code.py::test_format_chart_data_for_js_generates_const_declaration PASSED [  2%]
tests/agents/core/monitoring/visualization/utils/charting/test_chartjs_code.py::test_create_chart_js_code_includes_chart_id PASSED [  2%]
tests/agents/core/monitoring/visualization/utils/charting/test_chartjs_code.py::test_chart_js_serializer_renders_using_instance_chart_id PASSED [  2%]
tests/agents/core/monitoring/visualization/utils/charting/test_chartjs_code.py::test_chart_js_serializer_format_config_delegates PASSED [  2%]
tests/agents/core/monitoring/visualization/utils/charting/test_config_builders.py::TestChartConfigFactory::test_create_time_series PASSED [  2%]
tests/agents/core/monitoring/visualization/utils/charting/test_config_builders.py::TestChartConfigFactory::test_create_bar PASSED [  2%]
tests/agents/core/monitoring/visualization/utils/charting/test_config_builders.py::TestChartConfigFactory::test_create_multi_bar PASSED [  2%]
tests/agents/core/monitoring/visualization/utils/charting/test_config_builders.py::TestChartConfigFactory::test_create_pie PASSED [  2%]
tests/agents/core/monitoring/visualization/utils/charting/test_config_builders.py::TestChartConfigFactory::test_create_matrix PASSED [  2%]
tests/agents/core/monitoring/visualization/utils/charting/test_config_builders.py::TestChartConfigFactory::test_create_scatter PASSED [  2%]
tests/agents/core/monitoring/visualization/utils/charting/test_config_builders.py::TestChartConfigFactory::test_create_gauge PASSED [  2%]
tests/agents/core/monitoring/visualization/utils/charting/test_config_builders.py::test_function_wrappers[create_time_series_chart_config-args0-line] PASSED [  3%]
tests/agents/core/monitoring/visualization/utils/charting/test_config_builders.py::test_function_wrappers[create_bar_chart_config-args1-bar] PASSED [  3%]
tests/agents/core/monitoring/visualization/utils/charting/test_config_builders.py::test_function_wrappers[create_multi_bar_chart_config-args2-bar] PASSED [  3%]
tests/agents/core/monitoring/visualization/utils/charting/test_config_builders.py::test_function_wrappers[create_pie_chart_config-args3-pie] PASSED [  3%]
tests/agents/core/monitoring/visualization/utils/charting/test_config_builders.py::test_function_wrappers[create_matrix_chart_config-args4-matrix] PASSED [  3%]
tests/agents/core/monitoring/visualization/utils/charting/test_config_builders.py::test_function_wrappers[create_scatter_chart_config-args5-scatter] PASSED [  3%]
tests/agents/core/monitoring/visualization/utils/charting/test_config_builders.py::test_function_wrappers[create_gauge_chart_config-args6-gauge] PASSED [  3%]
tests/agents/core/monitoring/visualization/utils/charting/test_palette.py::test_generate_color_palette_lengths[#4e79a7-0-0] PASSED [  3%]
tests/agents/core/monitoring/visualization/utils/charting/test_palette.py::test_generate_color_palette_lengths[#4e79a7-1-1] PASSED [  3%]
tests/agents/core/monitoring/visualization/utils/charting/test_palette.py::test_generate_color_palette_lengths[#4e79a7-3-3] PASSED [  3%]
tests/agents/core/monitoring/visualization/utils/charting/test_palette.py::test_generate_color_palette_lengths[#badbad-5-5] PASSED [  3%]
tests/agents/core/monitoring/visualization/utils/charting/test_palette.py::test_color_palette_generator_defaults PASSED [  3%]
tests/agents/core/monitoring/visualization/utils/charting/test_palette.py::test_get_chart_colors_handles_default_palette[1] PASSED [  3%]
tests/agents/core/monitoring/visualization/utils/charting/test_palette.py::test_get_chart_colors_handles_default_palette[2] PASSED [  3%]
tests/agents/core/monitoring/visualization/utils/charting/test_palette.py::test_get_chart_colors_handles_default_palette[3] PASSED [  4%]
tests/agents/core/monitoring/visualization/utils/charting/test_palette.py::test_get_chart_colors_handles_default_palette[4] PASSED [  4%]
tests/agents/core/monitoring/visualization/utils/charting/test_palette.py::test_get_chart_colors_handles_default_palette[5] PASSED [  4%]
tests/agents/core/monitoring/visualization/utils/charting/test_palette.py::test_get_chart_colors_handles_default_palette[6] PASSED [  4%]
tests/agents/core/monitoring/visualization/utils/charting/test_palette.py::test_get_chart_colors_handles_default_palette[7] PASSED [  4%]
tests/agents/core/monitoring/visualization/utils/charting/test_palette.py::test_get_chart_colors_handles_default_palette[8] PASSED [  4%]
tests/agents/core/monitoring/visualization/utils/charting/test_palette.py::test_get_chart_colors_handles_default_palette[9] PASSED [  4%]
tests/agents/core/monitoring/visualization/utils/charting/test_palette.py::test_get_chart_colors_handles_default_palette[10] PASSED [  4%]
tests/agents/core/monitoring/visualization/utils/charting/test_palette.py::test_get_chart_colors_handles_default_palette[15] PASSED [  4%]
tests/agents/core/monitoring/visualization/utils/charting/test_palette.py::test_get_chart_colors_extends_with_base_color PASSED [  4%]
tests/agents/core/monitoring/visualization/utils/data_processing/test_common_tabular.py::test_data_grouper_skips_missing_keys PASSED [  4%]
tests/agents/core/monitoring/visualization/utils/data_processing/test_common_tabular.py::test_nested_dict_utils_flatten_and_extract PASSED [  4%]
tests/agents/core/monitoring/visualization/utils/data_processing/test_common_tabular.py::test_pivot_table_builder_returns_expected_matrix PASSED [  4%]
tests/agents/core/monitoring/visualization/utils/data_processing/test_facade.py::test_group_by_delegates_to_data_grouper PASSED [  4%]
tests/agents/core/monitoring/visualization/utils/data_processing/test_facade.py::test_aggregate_by_time_matches_expected_average PASSED [  4%]
tests/agents/core/monitoring/visualization/utils/data_processing/test_facade.py::test_find_anomalies_retains_api PASSED [  5%]
tests/agents/core/monitoring/visualization/utils/data_processing/test_facade.py::test_interpolate_missing_points_facade PASSED [  5%]
tests/agents/core/monitoring/visualization/utils/data_processing/test_statistics.py::test_find_anomalies_with_zscore PASSED [  5%]
tests/agents/core/monitoring/visualization/utils/data_processing/test_statistics.py::test_find_anomalies_with_threshold PASSED [  5%]
tests/agents/core/monitoring/visualization/utils/data_processing/test_timeseries.py::test_group_by_time_rounds_to_nearest_interval PASSED [  5%]
tests/agents/core/monitoring/visualization/utils/data_processing/test_timeseries.py::test_group_by_day_handles_invalid_timestamps PASSED [  5%]
tests/agents/core/monitoring/visualization/utils/data_processing/test_timeseries.py::test_aggregate_by_time_supports_count PASSED [  5%]
tests/agents/core/monitoring/visualization/utils/data_processing/test_timeseries.py::test_aggregate_by_time_with_average PASSED [  5%]
tests/agents/core/monitoring/visualization/utils/data_processing/test_timeseries.py::test_calculate_percentiles_returns_defaults PASSED [  5%]
tests/agents/core/monitoring/visualization/utils/data_processing/test_timeseries.py::test_calculate_distribution_handles_constant_values PASSED [  5%]
tests/agents/core/monitoring/visualization/utils/data_processing/test_timeseries.py::test_interpolate_missing_points_fills_gaps PASSED [  5%]
tests/agents/core/monitoring/visualization/utils/data_processing/test_timeseries.py::test_interpolate_missing_points_respects_custom_range PASSED [  5%]
tests/agents/core/test_agent_template.py::test_agent_start_stop_and_metrics PASSED [  5%]
tests/agents/core/test_agent_template.py::test_ensure_eventbus_subscription_background PASSED [  5%]
tests/agents/core/test_agent_template.py::test_agent_error_metric_increments PASSED [  6%]
tests/agents/core/test_agent_template.py::test_agent_uses_mocked_event_bus PASSED [  6%]
tests/agents/core/test_agent_template.py::test_filter_resubscribe_via_ws_json_control SKIPPED [  6%]
tests/agents/core/test_context.py::test_init_ephemeral_idempotent PASSED [  6%]
tests/agents/core/test_context.py::test_get_state_store_lazy_init PASSED [  6%]
tests/agents/core/test_context.py::test_get_event_bus_lazily_initializes_without_env PASSED [  6%]
tests/agents/core/test_context.py::test_get_event_bus_respects_event_buffer_size_env PASSED [  6%]
tests/agents/core/test_context.py::test_get_event_bus_reuses_builtins PASSED [  6%]
tests/agents/core/test_context.py::test_init_store_enables_event_bridge_and_emits PASSED [  6%]
tests/agents/core/test_context.py::test_bridge_respects_state_emit_hooks_disabled PASSED [  6%]
tests/agents/core/test_context.py::test_persist_true_no_running_loop_starts_no_timer PASSED [  6%]
tests/agents/core/test_context.py::test_persist_true_with_env_path_starts_timer_and_cancel PASSED [  6%]
tests/agents/core/test_context.py::test_enable_events_without_bridge_no_emission PASSED [  6%]
tests/agents/core/test_context.py::test_bridge_hook_error_resilience PASSED [  6%]
tests/agents/core/test_context.py::test_get_event_bus_enable_events_logging_path PASSED [  6%]
tests/agents/core/test_context.py::test_bridge_only_env_triggers_bus_and_emits PASSED [  7%]
tests/agents/core/test_context.py::test_builtins_wrong_type_is_overwritten_in_init PASSED [  7%]
tests/agents/core/test_context.py::test_snapshot_interval_minimum PASSED [  7%]
tests/agents/core/test_context.py::test_periodic_snapshot_invokes_persist PASSED [  7%]
tests/agents/core/test_context.py::test_init_state_store_reuses_builtins_bus PASSED [  7%]
tests/agents/core/test_context_events_bridge.py::test_ensure_events_bridge_idempotent_and_emits_on_change PASSED [  7%]
tests/agents/core/test_context_events_bridge.py::test_ensure_events_bridge_off_when_env_missing PASSED [  7%]
tests/agents/core/test_core_intent_router.py::test_classify_defaults_to_general_qa_when_no_match PASSED [  7%]
tests/agents/core/test_core_intent_router.py::test_python_keywords_map_to_python_coding_without_rag[Write a python function to add two numbers] PASSED [  7%]
tests/agents/core/test_core_intent_router.py::test_python_keywords_map_to_python_coding_without_rag[Design a Python class for a cache] PASSED [  7%]
tests/agents/core/test_core_intent_router.py::test_python_keywords_map_to_python_coding_without_rag[python function class] PASSED [  7%]
tests/agents/core/test_core_intent_router.py::test_documentation_keywords_enable_rag[Create an API spec for the new endpoint] PASSED [  7%]
tests/agents/core/test_core_intent_router.py::test_documentation_keywords_enable_rag[Where is the swagger doc for this API?] PASSED [  7%]
tests/agents/core/test_core_intent_router.py::test_documentation_keywords_enable_rag[endpoint spec api swagger] PASSED [  7%]
tests/agents/core/test_core_intent_router.py::test_scoring_prefers_higher_count_task PASSED [  8%]
tests/agents/core/test_core_intent_router.py::test_tie_break_is_deterministic_prefers_first_encountered PASSED [  8%]
tests/agents/core/test_core_intent_router.py::test_confidence_is_zero_for_no_match PASSED [  8%]
tests/agents/core/test_core_intent_router.py::test_configured_patterns_override PASSED [  8%]
tests/agents/core/test_event_bus_edges.py::test_subscribe_requires_running_loop PASSED [  8%]
tests/agents/core/test_event_bus_edges.py::test_publish_with_bad_filter_does_not_break_and_is_skipped PASSED [  8%]
tests/agents/core/test_event_bus_edges.py::test_unsubscribe_handles_closed_loop_best_effort PASSED [  8%]
tests/agents/core/test_event_bus_edges.py::test_close_handles_closed_loop_on_signal PASSED [  8%]
tests/agents/core/test_event_bus_edges.py::test_recent_match_with_bad_filter_is_safe_and_returns_none PASSED [  8%]
tests/agents/core/test_event_bus_edges.py::test_subscribe_with_unsupported_policy_warns_and_uses_drop_oldest PASSED [  8%]
tests/agents/core/test_event_filter_validation.py::test_validate_filter_accepts_none_topics PASSED [  8%]
tests/agents/core/test_event_filter_validation.py::test_validate_filter_rejects_empty_topics PASSED [  8%]
tests/agents/core/test_event_filter_validation.py::test_validate_filter_rejects_empty_topic_string PASSED [  8%]
tests/agents/core/test_event_filter_validation.py::test_validate_filter_rejects_empty_namespace_prefix PASSED [  8%]
tests/agents/core/test_event_filter_validation.py::test_validate_filter_rejects_bad_regex PASSED [  8%]
tests/agents/core/test_event_filter_validation.py::test_validate_filter_compiles_regex PASSED [  9%]
tests/agents/core/test_events_filter.py::test_event_model_basic_and_extra_fields PASSED [  9%]
tests/agents/core/test_events_filter.py::test_eventtopic_is_string_enum PASSED [  9%]
tests/agents/core/test_events_filter.py::test_filter_matches_by_topic_exact_and_set PASSED [  9%]
tests/agents/core/test_events_filter.py::test_filter_matches_namespace_prefix PASSED [  9%]
tests/agents/core/test_events_filter.py::test_filter_key_regex_matching PASSED [  9%]
tests/agents/core/test_events_filter.py::test_filter_empty_criteria_matches_all PASSED [  9%]
tests/agents/core/test_events_filter.py::test_filter_combined_all_conditions PASSED [  9%]
tests/agents/core/test_events_filter.py::test_filter_non_matching_any_condition PASSED [  9%]
tests/agents/core/test_events_filter.py::test_filter_invalid_regex_raises PASSED [  9%]
tests/agents/core/test_events_filter.py::test_filter_topics_is_frozenset_immutable PASSED [  9%]
tests/agents/core/test_events_filter_additional.py::test_filter_allows_empty_criteria_and_blocks_nonmatching PASSED [  9%]
tests/agents/core/test_import_neutrality_core.py::test_jarvis_api_import_neutrality PASSED [  9%]
tests/agents/core/test_intent_router_backward_compat.py::test_negative_token_only_yields_general_and_no_rag PASSED [  9%]
tests/agents/core/test_intent_router_backward_compat.py::test_negative_token_subtracts_but_positive_enables_rag PASSED [ 10%]
tests/agents/core/test_intent_router_backward_compat.py::test_legacy_schema_warns_only_once PASSED [ 10%]
tests/agents/core/test_intent_router_backward_compat.py::test_python_coding_rag_off_guard PASSED [ 10%]
tests/agents/core/test_intent_router_backward_compat.py::test_env_vs_arg_precedence_policy_and_topk PASSED [ 10%]
tests/agents/core/test_intent_router_phase1.py::test_unicode_normalization_enables_matches_casefold PASSED [ 10%]
tests/agents/core/test_intent_router_phase1.py::test_deterministic_tiebreaker_with_priority PASSED [ 10%]
tests/agents/core/test_intent_router_phase1.py::test_rag_gating_threshold_and_no_match_disable PASSED [ 10%]
tests/agents/core/test_intent_router_phase1.py::test_config_ttl_reload_on_mtime PASSED [ 10%]
tests/agents/core/test_intent_router_phase1.py::test_classify_debug_returns_details PASSED [ 10%]
tests/agents/core/test_intent_router_phase2.py::test_boundary_aware_reduces_false_positive_api_in_capillary PASSED [ 10%]
tests/agents/core/test_intent_router_phase2.py::test_token_weights_influence_outcome PASSED [ 10%]
tests/agents/core/test_intent_router_phase2.py::test_confidence_policies_emit_unit_interval[coverage-expect_range0] PASSED [ 10%]
tests/agents/core/test_intent_router_phase2.py::test_confidence_policies_emit_unit_interval[max_count-expect_range1] PASSED [ 10%]
tests/agents/core/test_intent_router_phase2.py::test_confidence_policies_emit_unit_interval[margin-expect_range2] PASSED [ 10%]
tests/agents/core/test_intent_router_phase2.py::test_topk_candidates_sorted_and_limited PASSED [ 11%]
tests/agents/core/test_intent_router_phase2.py::test_boundary_aware_matches_token_with_trailing_punctuation PASSED [ 11%]
tests/agents/core/test_intent_router_phase2.py::test_boundary_aware_matches_token_with_leading_punctuation PASSED [ 11%]
tests/agents/core/test_intent_router_phase3.py::test_config_loads_versioned_inline_and_file PASSED [ 11%]
tests/agents/core/test_intent_router_phase3.py::test_invalid_entries_fall_back_to_builtins PASSED [ 11%]
tests/agents/core/test_intent_router_phase3.py::test_cache_mtime_reload_and_ttl PASSED [ 11%]
tests/agents/core/test_intent_router_phase3.py::test_optional_liberal_max_tokens_cap PASSED [ 11%]
tests/agents/core/test_intent_router_phase3.py::test_boundary_vs_substring_toggle PASSED [ 11%]
tests/agents/core/test_intent_router_phase3.py::test_tie_break_priority_is_deterministic PASSED [ 11%]
tests/agents/core/test_intent_router_phase3.py::test_confidence_coverage_exact PASSED [ 11%]
tests/agents/core/test_intent_router_phase3.py::test_confidence_policies_expected_values PASSED [ 11%]
tests/agents/core/test_intent_router_phase3.py::test_rag_gating_thresholds PASSED [ 11%]
tests/agents/core/test_intent_router_phase3.py::test_concurrency_debug_payloads_are_request_scoped PASSED [ 11%]
tests/agents/core/test_intent_router_phase3.py::test_performance_compiled_regex_path_is_not_worse SKIPPED [ 11%]
tests/agents/core/test_messaging_adapter_compat.py::test_compat_subscribe_publish_sync_handler PASSED [ 11%]
tests/agents/core/test_messaging_adapter_compat.py::test_compat_subscribe_publish_async_handler PASSED [ 12%]
tests/agents/core/test_messaging_adapter_compat.py::test_compat_unsubscribe_stops_sync_handler PASSED [ 12%]
tests/agents/core/test_messaging_adapter_compat.py::test_compat_unsubscribe_stops_async_handler PASSED [ 12%]
tests/agents/core/test_messaging_adapter_compat.py::test_compat_once_true_delivers_only_first PASSED [ 12%]
tests/agents/core/test_messaging_adapter_compat.py::test_compat_type_filter_predicate PASSED [ 12%]
tests/agents/core/test_messaging_adapter_compat.py::test_compat_unsubscribe_is_idempotent PASSED [ 12%]
tests/agents/core/test_missions_archive_complete_overdue_summary.py::test_archive_completed_moves_only_completed_and_announces PASSED [ 12%]
tests/agents/core/test_missions_archive_complete_overdue_summary.py::test_archive_completed_no_completed PASSED [ 12%]
tests/agents/core/test_missions_archive_complete_overdue_summary.py::test_archive_completed_pluralization PASSED [ 12%]
tests/agents/core/test_missions_archive_complete_overdue_summary.py::test_mark_complete_matches_and_writes PASSED [ 12%]
tests/agents/core/test_missions_archive_complete_overdue_summary.py::test_mark_complete_no_match PASSED [ 12%]
tests/agents/core/test_missions_archive_complete_overdue_summary.py::test_mark_complete_skips_completed_and_non_tasks PASSED [ 12%]
tests/agents/core/test_missions_archive_complete_overdue_summary.py::test_get_overdue_and_speak_report PASSED [ 12%]
tests/agents/core/test_missions_archive_complete_overdue_summary.py::test_overdue_report_no_overdue PASSED [ 12%]
tests/agents/core/test_missions_archive_complete_overdue_summary.py::test_overdue_report_many_overdue PASSED [ 13%]
tests/agents/core/test_missions_archive_complete_overdue_summary.py::test_overdue_sorted_and_invalid_dates_ignored PASSED [ 13%]
tests/agents/core/test_missions_archive_complete_overdue_summary.py::test_summarize_and_speak_summary PASSED [ 13%]
tests/agents/core/test_missions_archive_complete_overdue_summary.py::test_summary_empty_and_error_paths PASSED [ 13%]
tests/agents/core/test_missions_archive_complete_overdue_summary.py::test_speak_summary_empty_branches PASSED [ 13%]
tests/agents/core/test_missions_archive_complete_overdue_summary.py::test_mission_summary_invalid_date_and_time_paths PASSED [ 13%]
tests/agents/core/test_missions_scheduler.py::test_check_due_today_true_false PASSED [ 13%]
tests/agents/core/test_missions_scheduler.py::test_check_reminder_now_window PASSED [ 13%]
tests/agents/core/test_missions_scheduler.py::test_main_runs_single_tick_and_sleeps PASSED [ 13%]
tests/agents/core/test_missions_scheduler.py::test_scheduler_load_missions_missing_and_bad_json PASSED [ 13%]
tests/agents/core/test_missions_scheduler.py::test_check_due_today_and_reminder_bad_values PASSED [ 13%]
tests/agents/core/test_missions_scheduler.py::test_main_announces_due_and_reminder_and_dedup PASSED [ 13%]
tests/agents/core/test_model_catalog.py::test_model_patterns_include_new_families PASSED [ 13%]
tests/agents/core/test_model_catalog.py::test_guess_family_variants PASSED [ 13%]
tests/agents/core/test_model_metrics.py::test_model_metrics_creates_db_and_tables PASSED [ 13%]
tests/agents/core/test_model_metrics.py::test_log_usage_and_aggregate PASSED [ 14%]
tests/agents/core/test_model_registry.py::test_scan_models_and_getters PASSED [ 14%]
tests/agents/core/test_model_registry.py::test_run_inference_with_stats_tracks_metrics PASSED [ 14%]
tests/agents/core/test_model_registry.py::test_track_error_and_performance_report PASSED [ 14%]
tests/agents/core/test_model_registry.py::test_monitor_gpu_usage_parsing_and_failure PASSED [ 14%]
tests/agents/core/test_model_registry.py::test_healthcheck_happy_path PASSED [ 14%]
tests/agents/core/test_model_registry.py::test_calculate_similarity_basic PASSED [ 14%]
tests/agents/core/test_model_registry.py::test_optimize_model_usage_selection PASSED [ 14%]
tests/agents/core/test_model_registry.py::test_get_quantization_info_unknown PASSED [ 14%]
tests/agents/core/test_model_registry.py::test_scan_models_additional_patterns PASSED [ 14%]
tests/agents/core/test_model_registry.py::test_analyze_prompt_categories PASSED [ 14%]
tests/agents/core/test_model_registry.py::test_track_inference_saves_every_10 PASSED [ 14%]
tests/agents/core/test_model_registry.py::test_track_error_high_rate_warning PASSED [ 14%]
tests/agents/core/test_model_registry.py::test_save_system_metrics_with_psutil PASSED [ 14%]
tests/agents/core/test_model_registry.py::test_run_model_benchmark_error_cases PASSED [ 15%]
tests/agents/core/test_model_registry.py::test_get_model_performance_report_all PASSED [ 15%]
tests/agents/core/test_model_registry.py::test_initialize_data_directories_creates_readmes PASSED [ 15%]
tests/agents/core/test_model_registry.py::test_best_model_creative_and_general_tasks PASSED [ 15%]
tests/agents/core/test_model_registry.py::test_quantization_info_match_and_guess_family PASSED [ 15%]
tests/agents/core/test_model_registry.py::test_estimate_model_vram_q4 PASSED [ 15%]
tests/agents/core/test_model_registry.py::test_get_model_capabilities_unknown PASSED [ 15%]
tests/agents/core/test_model_registry.py::test_get_model_performance_report_specific_missing PASSED [ 15%]
tests/agents/core/test_model_registry.py::test_best_general_model_fallback_to_first PASSED [ 15%]
tests/agents/core/test_model_registry.py::test_healthcheck_model_file_missing_warns PASSED [ 15%]
tests/agents/core/test_model_registry.py::test_run_inference_with_stats_timeout_error PASSED [ 15%]
tests/agents/core/test_model_registry.py::test_model_scores_invalid_last_used PASSED [ 15%]
tests/agents/core/test_model_registry.py::test_scan_models_unknown_skipped PASSED [ 15%]
tests/agents/core/test_model_registry.py::test_scan_models_skip_existing PASSED [ 15%]
tests/agents/core/test_model_registry.py::test_estimate_model_vram_other_quant PASSED [ 15%]
tests/agents/core/test_model_registry.py::test_module_main_block_executes_with_runpy PASSED [ 16%]
tests/agents/core/test_model_registry.py::test_monitor_gpu_usage_exception_path PASSED [ 16%]
tests/agents/core/test_model_registry.py::test_best_model_for_prompt_general_qa PASSED [ 16%]
tests/agents/core/test_model_registry.py::test_parse_nvidia_smi_malformed_line PASSED [ 16%]
tests/agents/core/test_model_registry.py::test_estimate_model_vram_quant_none PASSED [ 16%]
tests/agents/core/test_model_registry.py::test_healthcheck_missing_dir_and_llama PASSED [ 16%]
tests/agents/core/test_model_registry.py::test_detect_available_vram_default_error PASSED [ 16%]
tests/agents/core/test_model_registry.py::test_instrumentation_writer_labels PASSED [ 16%]
tests/agents/core/test_model_registry.py::test_registry_persistence_loads_from_file PASSED [ 16%]
tests/agents/core/test_model_registry.py::test_load_models_metadata_and_defaults PASSED [ 16%]
tests/agents/core/test_model_registry.py::test_run_inference_variants PASSED [ 16%]
tests/agents/core/test_model_registry.py::test_run_inference_with_stats_error_paths PASSED [ 16%]
tests/agents/core/test_model_registry.py::test_scan_models_detects_nemotron_and_arch_agent PASSED [ 16%]
tests/agents/core/test_model_registry.py::test_load_models_metadata_override_for_new_models PASSED [ 16%]
tests/agents/core/test_model_registry.py::test_guess_family_new_models PASSED [ 17%]
tests/agents/core/test_model_registry.py::test_save_and_load_inference_stats PASSED [ 17%]
tests/agents/core/test_model_registry.py::test_benchmarks_and_metrics_io PASSED [ 17%]
tests/agents/core/test_model_registry.py::test_detect_available_vram_and_loaded_models_usage PASSED [ 17%]
tests/agents/core/test_model_registry.py::test_model_scoring_sort_and_selection PASSED [ 17%]
tests/agents/core/test_model_registry.py::test_get_best_model_for_task_scoring_mode PASSED [ 17%]
tests/agents/core/test_model_scoring_edges.py::test_zero_inference_time_and_fallback_tokens_per_second PASSED [ 17%]
tests/agents/core/test_model_scoring_edges.py::test_missing_stats_candidate_is_handled PASSED [ 17%]
tests/agents/core/test_model_scoring_edges.py::test_deterministic_tie_breaker_on_equal_scores PASSED [ 17%]
tests/agents/core/test_model_selection_scoring.py::test_scoring_prefers_strength_match[python_coding-code] PASSED [ 17%]
tests/agents/core/test_model_selection_scoring.py::test_scoring_prefers_strength_match[documentation-doc] PASSED [ 17%]
tests/agents/core/test_model_selection_scoring.py::test_scoring_penalizes_unavailable PASSED [ 17%]
tests/agents/core/test_models_cli.py::test_models_cli_refresh_list_health_run PASSED [ 17%]
tests/agents/core/test_models_cli.py::test_models_cli_parser_and_main_help PASSED [ 17%]
tests/agents/core/test_models_cli.py::test_models_cli_benchmark_and_optimize PASSED [ 17%]
tests/agents/core/test_persistence.py::test_snapshot_and_restore_roundtrip PASSED [ 18%]
tests/agents/core/test_persistence.py::test_restore_preserves_max_version PASSED [ 18%]
tests/agents/core/test_state_cache_invalidation.py::test_ui_paths_for_key_mappings_and_dedup PASSED [ 18%]
tests/agents/core/test_state_cache_invalidation.py::test_install_bridge_attaches_and_invalidates PASSED [ 18%]
tests/agents/core/test_state_cache_invalidation.py::test_get_invalidator_dynamic_resolution PASSED [ 18%]
tests/agents/core/test_state_cache_invalidation.py::test_bridge_ignores_non_statekey PASSED [ 18%]
tests/agents/core/test_state_cache_invalidation.py::test_install_bridge_no_middleware_attached PASSED [ 18%]
tests/agents/core/test_state_events.py::test_emit_one_event_per_set PASSED [ 18%]
tests/agents/core/test_state_events.py::test_deleted_emits_state_deleted PASSED [ 18%]
tests/agents/core/test_state_events.py::test_respect_disable_flag PASSED [ 18%]
tests/agents/core/test_state_pubsub.py::test_wire_roundtrip_includes_expected_fields PASSED [ 18%]
tests/agents/core/test_state_pubsub.py::test_from_wire_handles_missing_key_with_defaults PASSED [ 18%]
tests/agents/core/test_state_pubsub.py::test_to_wire_accepts_dict_key_and_optional_fields PASSED [ 18%]
tests/agents/core/test_state_pubsub.py::test_start_publishes_on_local_change PASSED [ 18%]
tests/agents/core/test_state_pubsub.py::test_start_skips_when_connect_fails PASSED [ 19%]
tests/agents/core/test_state_pubsub.py::test_start_handles_subscribe_exception_still_starts_thread PASSED [ 19%]
tests/agents/core/test_state_pubsub.py::test_subscriber_loop_calls_invalidator_for_foreign_origin PASSED [ 19%]
tests/agents/core/test_state_pubsub.py::test_stop_is_graceful_when_not_started PASSED [ 19%]
tests/agents/core/test_state_pubsub.py::test_setup_state_pubsub_enables_with_env_and_store PASSED [ 19%]
tests/agents/core/test_state_pubsub.py::test_setup_state_pubsub_no_env_noop PASSED [ 19%]
tests/agents/core/test_state_pubsub.py::test_setup_state_pubsub_env_but_no_store PASSED [ 19%]
tests/agents/core/test_state_pubsub.py::test_subscriber_loop_handles_bytes_and_malformed PASSED [ 19%]
tests/agents/core/test_state_store.py::test_set_get_version_monotonic PASSED [ 19%]
tests/agents/core/test_state_store.py::test_update_cas_conflict PASSED   [ 19%]
tests/agents/core/test_state_store.py::test_delete_and_notfound PASSED   [ 19%]
tests/agents/core/test_state_store.py::test_list_by_namespace_and_prefix PASSED [ 19%]
tests/agents/core/test_state_store.py::test_change_hooks_called_and_unsubscribe PASSED [ 19%]
tests/agents/core/test_state_store_bridge_and_persistence.py::test_cas_success_and_conflict PASSED [ 19%]
tests/agents/core/test_state_store_bridge_and_persistence.py::test_change_hooks_with_and_without_event_bridge PASSED [ 20%]
tests/agents/core/test_state_store_bridge_and_persistence.py::test_bridge_counters_and_backpressure_drop PASSED [ 20%]
tests/agents/core/test_state_store_bridge_and_persistence.py::test_persist_restore_smoke_and_utc_check PASSED [ 20%]
tests/agents/core/test_state_store_utc_and_cas.py::test_change_record_ts_is_utc_and_monotonic PASSED [ 20%]
tests/agents/core/test_state_store_utc_and_cas.py::test_cas_semantics_exact_and_plus_one PASSED [ 20%]
tests/agents/core/test_subproc_stream.py::test_run_cmd_stream_happy_path_and_idle_tick PASSED [ 20%]
tests/agents/core/test_subproc_stream.py::test_run_cmd_stream_hard_idle_timeout PASSED [ 20%]
tests/agents/core/test_subscriber.py::test_subscriber_invokes_handler_and_stops_cleanly PASSED [ 20%]
tests/agents/core/test_subscriber.py::test_subscriber_resilient_to_handler_errors PASSED [ 20%]
tests/agents/diagnostics/test_diagnostic_probes_and_metrics.py::test_rules_hash_present_metric_and_probe PASSED [ 20%]
tests/agents/diagnostics/test_diagnostic_probes_and_metrics.py::test_diagnostic_counters_exposed PASSED [ 20%]
tests/agents/diagnostics/test_diagnostic_probes_and_metrics.py::test_sse_cached_anomaly_flag_is_zero_by_default PASSED [ 20%]
tests/agents/diagnostics/test_diagnostic_probes_and_metrics.py::test_low_304_rate_probe_heuristic_non_failing PASSED [ 20%]
tests/agents/diagnostics/test_event_diagnostics_agent.py::test_event_diagnostics_agent_detects_bus_drops PASSED [ 20%]
tests/agents/interface/chainlit/widgets/test_anomaly_thresholds.py::test_load_anomaly_thresholds_resolves_overrides PASSED [ 20%]
tests/agents/interface/chainlit/widgets/test_anomaly_thresholds.py::test_load_anomaly_thresholds_invalid_override_logs_and_falls_back PASSED [ 21%]
tests/agents/interface/chainlit/widgets/test_anomaly_thresholds.py::test_get_anomaly_threshold_map_indexes_by_badge PASSED [ 21%]
tests/agents/interface/test_export_toolkit.py::test_export_requires_feature_flag PASSED [ 21%]
tests/agents/interface/test_export_toolkit.py::test_export_json_bundle_with_metadata PASSED [ 21%]
tests/agents/interface/test_export_toolkit.py::test_export_csv_bundle_compressed PASSED [ 21%]
tests/agents/interface/test_model_comparison_adapters.py::test_build_model_comparison_payload_happy_path PASSED [ 21%]
tests/agents/interface/test_model_comparison_adapters.py::test_build_model_comparison_payload_errors_when_missing PASSED [ 21%]
tests/agents/interface/test_model_comparison_adapters.py::test_build_model_comparison_payload_rejects_non_v2_summaries PASSED [ 21%]
tests/agents/optimization/test_negative_cache_proposal.py::test_negative_cache_proposal_and_mrp_logging PASSED [ 21%]
tests/agents/optimization/test_optimization_agent_metrics_and_proposal.py::test_optimization_agent_emits_proposal_and_counters PASSED [ 21%]
tests/agents/orchestrator/test_agent_factory.py::test_instantiate_agents_injects_config_when_supported PASSED [ 21%]
tests/agents/orchestrator/test_agent_factory.py::test_instantiate_agents_skips_config_when_not_supported PASSED [ 21%]
tests/agents/orchestrator/test_agent_factory.py::test_instantiate_agents_respects_dry_run PASSED [ 21%]
tests/agents/orchestrator/test_agent_factory.py::test_instantiate_agents_fallback_when_missing_module PASSED [ 21%]
tests/agents/orchestrator/test_agent_factory_instrumentation.py::test_fallback_metric_increments_for_missing_class PASSED [ 22%]
tests/agents/orchestrator/test_agent_factory_instrumentation.py::test_fallback_metric_increments_on_constructor_exception PASSED [ 22%]
tests/agents/orchestrator/test_agent_factory_instrumentation.py::test_strict_mode_raises_on_missing_agent PASSED [ 22%]
tests/agents/orchestrator/test_agent_factory_instrumentation.py::test_dynamic_plugin_registration_injects_config PASSED [ 22%]
tests/agents/orchestrator/test_bounded_queue.py::test_bounded_queue_drops_oldest_and_enqueues_new PASSED [ 22%]
tests/agents/orchestrator/test_bounded_queue.py::test_bounded_queue_stats_timestamps_progress_monotonic PASSED [ 22%]
tests/agents/orchestrator/test_config_deprecated_phase13.py::test_strict_accepts_valid_deprecated_list PASSED [ 22%]
tests/agents/orchestrator/test_config_deprecated_phase13.py::test_strict_rejects_invalid_deprecated_entries PASSED [ 22%]
tests/agents/orchestrator/test_config_deprecated_phase13.py::test_lenient_drops_invalid_deprecated_list PASSED [ 22%]
tests/agents/orchestrator/test_config_deprecated_phase13.py::test_metric_not_incremented_when_absent PASSED [ 22%]
tests/agents/orchestrator/test_config_deprecated_phase13.py::test_metric_not_incremented_when_empty_list PASSED [ 22%]
tests/agents/orchestrator/test_config_includes_basic.py::test_include_adds_agents_and_metrics PASSED [ 22%]
tests/agents/orchestrator/test_config_includes_basic.py::test_include_main_overrides_conflict PASSED [ 22%]
tests/agents/orchestrator/test_config_includes_basic.py::test_missing_include_lenient_increments_counter PASSED [ 22%]
tests/agents/orchestrator/test_config_includes_basic.py::test_missing_include_strict_errors PASSED [ 22%]
tests/agents/orchestrator/test_config_includes_basic.py::test_circular_include_errors_and_counters PASSED [ 23%]
tests/agents/orchestrator/test_config_includes_basic.py::test_multilevel_precedence PASSED [ 23%]
tests/agents/orchestrator/test_config_includes_reload_diff.py::test_reload_diff_with_included_file_change PASSED [ 23%]
tests/agents/orchestrator/test_config_inventory_sync.py::test_all_code_flags_documented PASSED [ 23%]
tests/agents/orchestrator/test_config_logging_phase8.py::test_load_success_has_agents_total_and_version PASSED [ 23%]
tests/agents/orchestrator/test_config_logging_phase8.py::test_load_error_emits_config_error_and_config_load PASSED [ 23%]
tests/agents/orchestrator/test_config_logging_phase8.py::test_reload_success_has_counts_and_totals PASSED [ 23%]
tests/agents/orchestrator/test_config_logging_phase8.py::test_reload_error_emits_config_error PASSED [ 23%]
tests/agents/orchestrator/test_config_logging_phase8.py::test_lenient_unknown_keys_only_when_lenient PASSED [ 23%]
tests/agents/orchestrator/test_config_metrics_phase7.py::test_reload_success_metrics_updates PASSED [ 23%]
tests/agents/orchestrator/test_config_metrics_phase7.py::test_reload_error_sets_error_flag PASSED [ 23%]
tests/agents/orchestrator/test_config_metrics_phase7.py::test_lenient_unknown_keys_counter PASSED [ 23%]
tests/agents/orchestrator/test_config_perf_phase14.py::test_registry_parse_200_agents_under_100ms SKIPPED [ 23%]
tests/agents/orchestrator/test_config_perf_phase14.py::test_registry_parse_500_agents_under_120ms SKIPPED [ 23%]
tests/agents/orchestrator/test_config_perf_phase14.py::test_registry_parse_distribution_200_agents SKIPPED [ 24%]
tests/agents/orchestrator/test_config_redaction_extended_phase12.py::test_pattern_override PASSED [ 24%]
tests/agents/orchestrator/test_config_redaction_extended_phase12.py::test_hash_mode PASSED [ 24%]
tests/agents/orchestrator/test_config_redaction_extended_phase12.py::test_allowlist_skips PASSED [ 24%]
tests/agents/orchestrator/test_config_redaction_extended_phase12.py::test_spike_detection PASSED [ 24%]
tests/agents/orchestrator/test_config_redaction_extended_phase12.py::test_performance_budget PASSED [ 24%]
tests/agents/orchestrator/test_config_redaction_extended_phase12.py::test_performance_with_matching PASSED [ 24%]
tests/agents/orchestrator/test_config_redaction_phase12.py::test_redact_metadata_nested_and_negative_controls PASSED [ 24%]
tests/agents/orchestrator/test_config_redaction_phase12.py::test_redact_and_count_reports_number PASSED [ 24%]
tests/agents/orchestrator/test_config_redaction_phase12.py::test_load_and_reload_redaction_in_logs PASSED [ 24%]
tests/agents/orchestrator/test_config_rollout_phase16.py::test_rollout_disabled_blocks_mutation PASSED [ 24%]
tests/agents/orchestrator/test_config_rollout_phase16.py::test_rollout_enabled_mutation_disabled PASSED [ 24%]
tests/agents/orchestrator/test_config_rollout_phase16.py::test_rollout_and_mutation_enabled PASSED [ 24%]
tests/agents/orchestrator/test_config_rollout_phase16.py::test_unknown_key_counter_stable_across_reloads PASSED [ 24%]
tests/agents/orchestrator/test_config_rollout_phase16.py::test_gauge_transitions PASSED [ 24%]
tests/agents/orchestrator/test_eventbus_metrics_exposition.py::test_eventbus_metrics_series_present_and_labeled PASSED [ 25%]
tests/agents/orchestrator/test_eventbus_metrics_exposition.py::test_orchestrator_emits_queue_and_backoff_metrics PASSED [ 25%]
tests/agents/orchestrator/test_eventbus_metrics_exposition.py::test_orchestrator_emits_staleness_metric_with_live_supervisor PASSED [ 25%]
tests/agents/orchestrator/test_loader_override_order.py::test_resolve_registry_path_precedence PASSED [ 25%]
tests/agents/orchestrator/test_loader_phase4.py::test_path_precedence_env_vs_explicit PASSED [ 25%]
tests/agents/orchestrator/test_loader_phase4.py::test_path_precedence_env_used_when_no_explicit PASSED [ 25%]
tests/agents/orchestrator/test_loader_phase4.py::test_resolve_registry_path_default PASSED [ 25%]
tests/agents/orchestrator/test_loader_phase4.py::test_strict_override_arg_beats_env PASSED [ 25%]
tests/agents/orchestrator/test_loader_phase4.py::test_return_type_is_registry_model PASSED [ 25%]
tests/agents/orchestrator/test_loader_phase4.py::test_atomic_failure_no_partial_state PASSED [ 25%]
tests/agents/orchestrator/test_loader_phase4.py::test_missing_file_raises_config_not_found PASSED [ 25%]
tests/agents/orchestrator/test_orchestrator_startup_abort_phase5.py::test_startup_abort_on_invalid_registry PASSED [ 25%]
tests/agents/orchestrator/test_orchestrator_startup_abort_phase5.py::test_startup_missing_file PASSED [ 25%]
tests/agents/orchestrator/test_parse_timing_cap_and_histogram.py::test_parse_timing_series_capped PASSED [ 25%]
tests/agents/orchestrator/test_parse_timing_cap_and_histogram.py::test_parse_histogram_opt_in PASSED [ 26%]
tests/agents/orchestrator/test_registry_mapping.py::test_mapping_form_strict_success PASSED [ 26%]
tests/agents/orchestrator/test_registry_mapping.py::test_mapping_form_name_override PASSED [ 26%]
tests/agents/orchestrator/test_registry_mapping.py::test_list_form_backward_compat PASSED [ 26%]
tests/agents/orchestrator/test_registry_mapping.py::test_missing_version_rejected PASSED [ 26%]
tests/agents/orchestrator/test_registry_schema.py::test_validate_registry_strict_success PASSED [ 26%]
tests/agents/orchestrator/test_registry_schema.py::test_missing_required_field_strict PASSED [ 26%]
tests/agents/orchestrator/test_registry_schema.py::test_missing_required_field_lenient PASSED [ 26%]
tests/agents/orchestrator/test_registry_schema.py::test_type_mismatch_timeout_strict PASSED [ 26%]
tests/agents/orchestrator/test_registry_schema.py::test_type_mismatch_timeout_lenient PASSED [ 26%]
tests/agents/orchestrator/test_registry_schema.py::test_extra_field_strict_rejected PASSED [ 26%]
tests/agents/orchestrator/test_registry_schema.py::test_extra_field_lenient_dropped PASSED [ 26%]
tests/agents/orchestrator/test_registry_schema.py::test_strict_rejects_nested_unknown_key PASSED [ 26%]
tests/agents/orchestrator/test_registry_schema.py::test_lenient_strips_nested_unknown_key PASSED [ 26%]
tests/agents/orchestrator/test_registry_schema.py::test_lenient_unknown_keys_increment_metrics PASSED [ 26%]
tests/agents/orchestrator/test_registry_schema.py::test_loader_lenient_unknown_key_logs_warning PASSED [ 27%]
tests/agents/orchestrator/test_registry_schema.py::test_loader_lenient_nested_unknown_key_logs_warning PASSED [ 27%]
tests/agents/orchestrator/test_reload_diff.py::test_diff_registries_added_removed_changed PASSED [ 27%]
tests/agents/orchestrator/test_reload_phase6.py::test_reload_added_agent PASSED [ 27%]
tests/agents/orchestrator/test_reload_phase6.py::test_reload_removed_agent_quiesce PASSED [ 27%]
tests/agents/orchestrator/test_reload_phase6.py::test_reload_changed_field PASSED [ 27%]
tests/agents/orchestrator/test_reload_phase6.py::test_compute_registry_diff_model_vs_dict PASSED [ 27%]
tests/agents/orchestrator/test_runtime_and_metrics.py::test_staleness_fallback_emits_for_all_declared_agents PASSED [ 27%]
tests/agents/orchestrator/test_runtime_and_metrics.py::test_load_enabled_agents_from_registry_filters_by_flag PASSED [ 27%]
tests/agents/orchestrator/test_runtime_and_metrics.py::test_build_orchestrator_metrics_lines_emits_zero_when_absent PASSED [ 27%]
tests/agents/orchestrator/test_runtime_and_metrics.py::test_build_orchestrator_metrics_lines_with_snapshot PASSED [ 27%]
tests/agents/orchestrator/test_runtime_and_metrics.py::test_orchestrator_breadcrumb_help_lines_present PASSED [ 27%]
tests/agents/orchestrator/test_runtime_and_metrics.py::test_staleness_fallback_defaults_to_zero PASSED [ 27%]
tests/agents/orchestrator/test_schema_hash.py::test_schema_source_hash_matches_constant PASSED [ 27%]
tests/agents/orchestrator/test_startup_abort.py::test_invalid_registry_startup_abort_missing_key PASSED [ 28%]
tests/agents/orchestrator/test_startup_abort.py::test_missing_file_raises PASSED [ 28%]
tests/agents/orchestrator/test_supervisor_start_stop.py::test_supervisor_start_stop_no_agents_metrics_zero PASSED [ 28%]
tests/agents/repair/test_extended_approvals_logging.py::test_log_mrp_approval_extended_fields PASSED [ 28%]
tests/agents/repair/test_repair_agent_aider_approval_ui.py::test_export_aider_context_and_ui_snapshot PASSED [ 28%]
tests/agents/repair/test_repair_agent_aider_approval_ui.py::test_approval_gate_and_token PASSED [ 28%]
tests/agents/repair/test_repair_agent_aider_approval_ui.py::test_git_hints_enrichment_flag_off PASSED [ 28%]
tests/agents/repair/test_repair_agent_aider_approval_ui.py::test_mrp_approval_placeholder PASSED [ 28%]
tests/agents/repair/test_repair_agent_plan_and_artifacts.py::test_compute_repair_plan_maps_findings_and_regressions PASSED [ 28%]
tests/agents/repair/test_repair_agent_plan_and_artifacts.py::test_write_mrp_and_stage_sandbox PASSED [ 28%]
tests/agents/repair/test_repair_commit_window.py::test_commit_window_flag_off_noop PASSED [ 28%]
tests/agents/repair/test_repair_commit_window.py::test_commit_window_flag_on_nonexistent_path_safe PASSED [ 28%]
tests/agents/repair/test_repair_orchestrator_and_ui.py::test_repair_agent_flag_off_no_side_effects PASSED [ 28%]
tests/agents/repair/test_repair_orchestrator_and_ui.py::test_repair_ui_endpoint_flagged PASSED [ 28%]
tests/agents/repair/test_repair_orchestrator_and_ui.py::test_repair_ui_endpoint_404_when_disabled PASSED [ 28%]
tests/agents/repair/test_repair_orchestrator_tight_loop.py::test_orchestrator_runs_repair_agent_and_updates_snapshot PASSED [ 29%]
tests/agents/service_management/test_acceptance_timing.py::test_acceptance_timing_fast_start PASSED [ 29%]
tests/agents/service_management/test_agents_metrics_exposition.py::test_lifecycle_agents_enabled_metric_present PASSED [ 29%]
tests/agents/service_management/test_agents_start_phase.py::test_agents_start_skipped_with_no_agents_flag PASSED [ 29%]
tests/agents/service_management/test_agents_start_phase.py::test_agents_start_enabled_flags PASSED [ 29%]
tests/agents/service_management/test_agents_start_phase_unit.py::test_run_agents_start_when_skip_flag PASSED [ 29%]
tests/agents/service_management/test_agents_start_phase_unit.py::test_run_agents_start_when_flags_enabled PASSED [ 29%]
tests/agents/service_management/test_agents_start_phase_unit.py::test_run_agents_start_when_no_flags PASSED [ 29%]
tests/agents/service_management/test_cache_warm_filters_and_timeout.py::test_cache_warm_include_exclude[negative_cache_selfcheck--expect_present0-expect_absent0] PASSED [ 29%]
tests/agents/service_management/test_cache_warm_filters_and_timeout.py::test_cache_warm_include_exclude[-embedding_viability_probe-expect_present1-expect_absent1] PASSED [ 29%]
tests/agents/service_management/test_cache_warm_filters_and_timeout.py::test_cache_warm_per_warmer_timeout PASSED [ 29%]
tests/agents/service_management/test_cache_warm_metrics_exposition.py::test_per_warmer_metrics[success-expect_reason0-lifecycle_warmer_success_total] PASSED [ 29%]
tests/agents/service_management/test_cache_warm_metrics_exposition.py::test_per_warmer_metrics[failure-expect_reason1-lifecycle_warmer_failure_total] PASSED [ 29%]
tests/agents/service_management/test_cache_warm_metrics_exposition.py::test_per_warmer_metrics[slow-expect_reason2-lifecycle_warmer_slow_total] PASSED [ 29%]
tests/agents/service_management/test_cache_warm_phase_unit.py::test_cache_warm_disable_flag PASSED [ 30%]
tests/agents/service_management/test_cache_warm_phase_unit.py::test_cache_warm_forced_failure PASSED [ 30%]
tests/agents/service_management/test_cache_warm_phase_unit.py::test_cache_warm_slow PASSED [ 30%]
tests/agents/service_management/test_lifecycle_hydration_unit.py::test_hydration_merges_degraded_reasons_and_details PASSED [ 30%]
tests/agents/service_management/test_manifest_validation.py::test_validate_manifest_happy_path PASSED [ 30%]
tests/agents/service_management/test_manifest_validation.py::test_duplicate_service_name_raises PASSED [ 30%]
tests/agents/service_management/test_manifest_validation.py::test_unknown_dependency_raises PASSED [ 30%]
tests/agents/service_management/test_manifest_validation.py::test_cycle_detection_raises PASSED [ 30%]
tests/agents/service_management/test_manifest_validation.py::test_missing_mandatory_field_raises PASSED [ 30%]
tests/agents/service_management/test_manifest_validation.py::test_load_manifest_yaml PASSED [ 30%]
tests/agents/service_management/test_pid_file_plumbing.py::test_pid_file_created_and_removed PASSED [ 30%]
tests/agents/service_management/test_restart_wrapper.py::test_fail_once_without_restart PASSED [ 30%]
tests/agents/service_management/test_restart_wrapper.py::test_restart_wrapper_recovers PASSED [ 30%]
tests/agents/service_management/test_restart_wrapper.py::test_restart_giveup PASSED [ 30%]
tests/agents/service_management/test_service_start_cache_warm.py::test_cache_warm_success_only_phase PASSED [ 31%]
tests/agents/service_management/test_service_start_cache_warm.py::test_cache_warm_forced_failure_marks_degraded PASSED [ 31%]
tests/agents/service_management/test_service_start_cache_warm.py::test_cache_warm_slow_threshold_marks_degraded PASSED [ 31%]
tests/agents/service_management/test_service_start_cache_warm.py::test_cache_warm_disable_flag_noop PASSED [ 31%]
tests/agents/service_management/test_service_start_capabilities_artifact.py::test_capabilities_artifact_written PASSED [ 31%]
tests/agents/service_management/test_service_start_debug_dump.py::test_service_start_debug_dump_cache_warm_only PASSED [ 31%]
tests/agents/service_management/test_service_start_dry_run.py::test_service_start_dry_run_lists_phases PASSED [ 31%]
tests/agents/service_management/test_service_start_dry_run_schema.py::test_service_start_dry_run_json_matches_schema_minimal PASSED [ 31%]
tests/agents/service_management/test_service_start_dynamic_agent_registry.py::test_dynamic_agent_registration PASSED [ 31%]
tests/agents/service_management/test_service_start_exit_code_policy.py::test_exit_code_policy_constants_stable PASSED [ 31%]
tests/agents/service_management/test_service_start_exit_code_policy.py::test_exit_code_policy_values_unique_and_range PASSED [ 31%]
tests/agents/service_management/test_service_start_helpers.py::test_select_port_ephemeral_returns_free_port PASSED [ 31%]
tests/agents/service_management/test_service_start_helpers.py::test_probe_endpoint_returns_false_for_unbound_port PASSED [ 31%]
tests/agents/service_management/test_service_start_helpers.py::test_probe_endpoint_success_after_temp_server PASSED [ 31%]
tests/agents/service_management/test_service_start_instrumentation.py::test_phase_duration_logged[api_start] PASSED [ 31%]
tests/agents/service_management/test_service_start_instrumentation.py::test_phase_duration_logged[cache_warm] PASSED [ 32%]
tests/agents/service_management/test_service_start_instrumentation.py::test_warmer_result_lines_present PASSED [ 32%]
tests/agents/service_management/test_service_start_json_output.py::test_service_start_dry_run_json_basic PASSED [ 32%]
tests/agents/service_management/test_service_start_json_output.py::test_service_start_dry_run_json_with_manifest_hash PASSED [ 32%]
tests/agents/service_management/test_service_start_lifecycle_state.py::test_lifecycle_state_agents_and_degraded PASSED [ 32%]
tests/agents/service_management/test_service_start_lifecycle_state.py::test_lifecycle_state_ready_full_run PASSED [ 32%]
tests/agents/service_management/test_service_start_list_phases_flag.py::test_service_start_list_phases_flag_text_output PASSED [ 32%]
tests/agents/service_management/test_service_start_list_phases_flag.py::test_service_start_list_phases_supersedes_dry_run PASSED [ 32%]
tests/agents/service_management/test_service_start_metrics_tier.py::test_api_start_metrics_tier_enabled_assume_ready_bypass PASSED [ 32%]
tests/agents/service_management/test_service_start_metrics_tier.py::test_api_start_metrics_tier_probes_and_debug_logging SKIPPED [ 32%]
tests/agents/service_management/test_service_start_misc_flags.py::test_service_start_until_phase_text PASSED [ 32%]
tests/agents/service_management/test_service_start_misc_flags.py::test_service_start_invalid_phase_exit_code PASSED [ 32%]
tests/agents/service_management/test_service_start_misc_flags.py::test_api_start_success_only_phase PASSED [ 32%]
tests/agents/service_management/test_service_start_misc_flags.py::test_api_start_timeout_simulated_delay PASSED [ 32%]
tests/agents/service_management/test_service_start_misc_flags.py::test_service_start_manifest_hash_text PASSED [ 33%]
tests/agents/service_management/test_service_start_only_flag.py::test_service_start_only_single_phase_text PASSED [ 33%]
tests/agents/service_management/test_service_start_only_flag.py::test_service_start_only_single_phase_json PASSED [ 33%]
tests/agents/service_management/test_service_start_phase_timings_until_agents.py::test_until_agents_includes_preflight_cache PASSED [ 33%]
tests/agents/service_management/test_service_start_phase_trace.py::test_phase_trace_until_agents PASSED [ 33%]
tests/agents/service_management/test_service_start_preflight.py::test_preflight_only_success PASSED [ 33%]
tests/agents/service_management/test_service_start_preflight.py::test_preflight_forced_failure_exit_code_10 PASSED [ 33%]
tests/agents/service_management/test_service_start_preflight.py::test_preflight_disk_space_failure_exit_code_10 PASSED [ 33%]
tests/agents/service_management/test_service_start_preflight.py::test_preflight_only_exec_success PASSED [ 33%]
tests/agents/service_management/test_service_start_preflight_disable.py::test_preflight_disable_env_flags_allows_missing_internal_api_key PASSED [ 33%]
tests/agents/service_management/test_service_start_preflight_json.py::test_preflight_json_output_structure PASSED [ 33%]
tests/agents/service_management/test_service_start_preflight_json.py::test_preflight_json_warn_only_downgrade PASSED [ 33%]
tests/agents/service_management/test_service_start_preflight_json.py::test_preflight_json_failure_exit PASSED [ 33%]
tests/agents/service_management/test_service_start_preflight_schema.py::test_preflight_json_matches_schema PASSED [ 33%]
tests/agents/service_management/test_service_start_preflight_timeout.py::test_preflight_per_check_timeout_failure PASSED [ 33%]
tests/agents/service_management/test_service_start_preflight_timeout.py::test_preflight_per_check_timeout_warn_only PASSED [ 34%]
tests/agents/service_management/test_service_start_probe_metrics_exposition.py::test_api_start_probe_metrics_exposed SKIPPED [ 34%]
tests/agents/service_management/test_service_start_shutdown_snapshot.py::test_shutdown_snapshot_written PASSED [ 34%]
tests/agents/service_management/test_service_start_shutdown_snapshot.py::test_shutdown_timeout_warning PASSED [ 34%]
tests/agents/service_management/test_service_start_strict_mode.py::test_strict_mode_failure_on_degraded PASSED [ 34%]
tests/agents/service_management/test_service_start_strict_mode.py::test_strict_mode_success_without_degraded PASSED [ 34%]
tests/agents/service_management/test_service_start_unified_flag_config.py::test_startup_unified_flag_dataclass_list_phases_equivalence[text] PASSED [ 34%]
tests/agents/service_management/test_service_start_unified_flag_config.py::test_startup_unified_flag_dataclass_list_phases_equivalence[json] PASSED [ 34%]
tests/agents/service_management/test_service_start_unified_flag_config.py::test_startup_unified_flag_dataclass_dry_run_json_manifest_hash SKIPPED [ 34%]
tests/agents/service_management/test_shutdown_integration.py::test_stay_alive_shutdown_via_signal PASSED [ 34%]
tests/agents/system/test_diagnostic_agent.py::test_lifecycle_idempotent PASSED [ 34%]
tests/agents/system/test_diagnostic_agent.py::test_happy_path_processed_counts PASSED [ 34%]
tests/agents/system/test_diagnostic_agent.py::test_error_path_increments_error_counter_and_continues PASSED [ 34%]
tests/agents/system/test_diagnostic_agent_last_ts.py::test_last_event_ts_ms_increments_on_publish PASSED [ 34%]
tests/agents/system/test_registry_and_scheduler.py::test_unknown_agent_activate_returns_none PASSED [ 35%]
tests/agents/system/test_registry_and_scheduler.py::test_activate_idempotent_and_getters PASSED [ 35%]
tests/agents/system/test_registry_and_scheduler.py::test_schedule_requires_active PASSED [ 35%]
tests/agents/system/test_registry_and_scheduler.py::test_schedule_runs_and_stops_on_deactivate PASSED [ 35%]
tests/agents/system/test_registry_and_scheduler.py::test_deactivate_unknown_returns_false_and_cancel_counts PASSED [ 35%]
tests/agents/template/test_example_agent.py::test_example_agent_receives_event PASSED [ 35%]
tests/agents/template/test_queue_worker_agent.py::test_queue_worker_agent_drop_oldest_then_process PASSED [ 35%]
tests/agents/test_model_metadata_adapter.py::test_with_model_metadata_sets_and_restores_env PASSED [ 35%]
tests/agents/test_model_metadata_adapter.py::test_attach_model_metadata_decorator_sets_env_and_restores PASSED [ 35%]
tests/agents/test_mrp_logger.py::test_log_interaction_writes_required_and_optional_fields PASSED [ 35%]
tests/agents/test_optimization_agent.py::test_import_and_defaults PASSED [ 35%]
tests/agents/test_optimization_agent.py::test_evaluate_policy_thresholds PASSED [ 35%]
tests/agents/test_optimization_agent.py::test_evaluate_policy_metrics_branches PASSED [ 35%]
tests/agents/test_optimization_agent.py::test_subscription_and_coalescing PASSED [ 35%]
tests/agents/test_optimization_agent.py::test_apply_plan_dry_run_and_emit_controls_toggle PASSED [ 35%]
tests/agents/test_optimization_agent_apply.py::test_apply_plan_dry_run_records_and_counts PASSED [ 36%]
tests/agents/test_optimization_agent_apply.py::test_apply_plan_publishes_when_enabled PASSED [ 36%]
tests/agents/test_state_store_memory.py::test_memory_store_set_get_list_delete PASSED [ 36%]
tests/agents/test_state_store_memory.py::test_memory_store_subscriptions_emit_change_records PASSED [ 36%]
tests/agents/test_state_store_persistence.py::test_snapshot_restore_json_round_trip PASSED [ 36%]
tests/agents/test_state_store_persistence.py::test_json_file_adapter_save_and_load PASSED [ 36%]
tests/api/metrics/test_orchestrator_fallback.py::test_load_registry_data_json_and_yaml PASSED [ 36%]
tests/api/metrics/test_orchestrator_fallback.py::test_agent_names_from_registry_with_and_without_flags PASSED [ 36%]
tests/api/metrics/test_orchestrator_fallback.py::test_emit_default_agent_metrics_shape PASSED [ 36%]
tests/api/metrics/test_orchestrator_fallback.py::test_emit_fallback_from_registry_path PASSED [ 36%]
tests/api/metrics/test_restart_delay_metrics.py::test_restart_delay_histogram_lines PASSED [ 36%]
tests/api/test_agent_config_perf_endpoint.py::test_agent_config_perf_endpoint_returns_percentiles PASSED [ 36%]
tests/api/test_agent_config_reload_endpoint.py::test_happy_path_reload_add_agent PASSED [ 36%]
tests/api/test_agent_config_reload_endpoint.py::test_idempotent_second_call_no_changes PASSED [ 36%]
tests/api/test_agent_config_reload_endpoint.py::test_invalid_path_error PASSED [ 37%]
tests/api/test_agent_config_reload_endpoint.py::test_unauthorized_missing_key PASSED [ 37%]
tests/api/test_agent_config_reload_endpoint.py::test_flag_disabled PASSED [ 37%]
tests/api/test_agent_instance_metrics.py::test_agent_instance_register_heartbeat_metrics_delete SKIPPED [ 37%]
tests/api/test_agent_instance_metrics.py::test_agent_instance_duplicate_register_conflict SKIPPED [ 37%]
tests/api/test_agent_label_metrics.py::test_labeled_agent_metrics_present_and_increment PASSED [ 37%]
tests/api/test_agent_label_metrics.py::test_labeled_errors_counter_increments_on_handler_error PASSED [ 37%]
tests/api/test_alerts_router_basic.py::test_alerts_and_rules_monkeypatched PASSED [ 37%]
tests/api/test_anomaly_badges.py::test_compute_anomaly_badges_triggers_alert PASSED [ 37%]
tests/api/test_anomaly_badges.py::test_compute_anomaly_badges_insufficient_data PASSED [ 37%]
tests/api/test_app_factory_guardrails.py::test_factory_builds_app_and_routes_present PASSED [ 37%]
tests/api/test_app_factory_guardrails.py::test_metrics_emits_mandatory_lines PASSED [ 37%]
tests/api/test_cache_annotations_scaling.py::test_cache_annotation_discovery_and_scaling PASSED [ 37%]
tests/api/test_cache_bypass_and_headers.py::test_bypass_via_query_and_headers PASSED [ 37%]
tests/api/test_cache_bypass_and_headers.py::test_header_bypass_disabled_when_flag_off PASSED [ 37%]
tests/api/test_cache_headers.py::test_cache_control_present_on_core_endpoints PASSED [ 38%]
tests/api/test_cache_headers.py::test_etag_optional_and_stable_for_catalog PASSED [ 38%]
tests/api/test_cache_headers.py::test_etag_toggle_off PASSED             [ 38%]
tests/api/test_cache_hit_then_etag_304.py::test_cache_hit_then_etag_304[/ui/metrics/catalog] PASSED [ 38%]
tests/api/test_cache_hit_then_etag_304.py::test_cache_hit_then_etag_304[/ui/config] PASSED [ 38%]
tests/api/test_cache_invariants.py::test_cache_precedence_order PASSED   [ 38%]
tests/api/test_cache_invariants.py::test_sse_bypass_headers_no_304 PASSED [ 38%]
tests/api/test_cache_invariants.py::test_ui_304_sets_x_cache_bypass PASSED [ 38%]
tests/api/test_cache_invariants.py::test_cross_scope_hit_counter_zero_if_present SKIPPED [ 38%]
tests/api/test_cache_legacy_deprecation.py::test_legacy_fallback_can_be_disabled PASSED [ 38%]
tests/api/test_cache_negative_policy.py::test_negative_caching_ttl_fraction_and_refresh PASSED [ 38%]
tests/api/test_cache_negative_policy.py::test_negative_caching_404_latest_metric_hit_within_ttl_no_304 PASSED [ 38%]
tests/api/test_cache_observability.py::test_cache_metrics_and_sse_bypass_counters PASSED [ 38%]
tests/api/test_cache_observability.py::test_cache_bypass_reason_counters_increment PASSED [ 38%]
tests/api/test_charts_endpoint.py::test_resource_usage_charts_schema PASSED [ 39%]
tests/api/test_classic_endpoints.py::test_chat_returns_502_when_missing_binary_or_model PASSED [ 39%]
tests/api/test_classic_endpoints.py::test_chat_returns_408_on_timeout PASSED [ 39%]
tests/api/test_classic_speak_and_rate.py::test_speak_returns_501_when_not_configured PASSED [ 39%]
tests/api/test_classic_speak_and_rate.py::test_speak_success_when_configured PASSED [ 39%]
tests/api/test_classic_speak_and_rate.py::test_speak_failure_when_command_errors PASSED [ 39%]
tests/api/test_classic_speak_and_rate.py::test_speak_base64_returns_501_when_not_configured PASSED [ 39%]
tests/api/test_classic_speak_and_rate.py::test_speak_base64_success_reads_output_file PASSED [ 39%]
tests/api/test_classic_speak_and_rate.py::test_speak_base64_returns_500_when_output_missing PASSED [ 39%]
tests/api/test_classic_speak_and_rate.py::test_rate_limiting_enforced_after_5_requests_when_enabled PASSED [ 39%]
tests/api/test_classic_speak_and_rate.py::test_rate_limiting_disabled_when_flag_off PASSED [ 39%]
tests/api/test_diagnostic_agent_metrics.py::test_metrics_expose_diag_counters_when_auto_activated PASSED [ 39%]
tests/api/test_diagnostic_agent_metrics.py::test_diag_counters_increment_on_event_publish PASSED [ 39%]
tests/api/test_diagnostic_agent_metrics.py::test_no_value_lines_when_agent_not_active PASSED [ 39%]
tests/api/test_diagnostic_agent_metrics.py::test_auto_activated_agent_deactivates_on_shutdown PASSED [ 40%]
tests/api/test_diagnostic_agent_metrics_v2.py::test_metrics_expose_diag_counters_when_auto_activated_v2 PASSED [ 40%]
tests/api/test_diagnostic_agent_metrics_v2.py::test_diag_counters_increment_on_event_publish_v2 PASSED [ 40%]
tests/api/test_diagnostic_agent_metrics_v2.py::test_auto_activated_agent_deactivates_on_shutdown_v2 PASSED [ 40%]
tests/api/test_diagnostic_agent_overrides.py::test_diag_namespace_and_topic_filters_enforced PASSED [ 40%]
tests/api/test_diagnostic_agent_overrides.py::test_diag_topics_override_blocks_other_topics PASSED [ 40%]
tests/api/test_diagnostic_metrics_exposure.py::test_metrics_exposes_diag_counters_and_increments PASSED [ 40%]
tests/api/test_error_envelope.py::test_snapshot_health_error_envelope PASSED [ 40%]
tests/api/test_error_envelope_extra.py::test_metrics_latest_404_envelope PASSED [ 40%]
tests/api/test_error_envelope_extra.py::test_rate_limit_429_envelope PASSED [ 40%]
tests/api/test_eventbus_metrics_exposure.py::test_eventbus_metrics_increments_with_publish_and_sse PASSED [ 40%]
tests/api/test_events_bus_stats.py::test_events_bus_stats_schema PASSED  [ 40%]
tests/api/test_events_sse.py::test_sse_stream_basic_and_cleanup PASSED   [ 40%]
tests/api/test_events_sse.py::test_sse_receives_emitted_event_minimal PASSED [ 40%]
tests/api/test_events_sse.py::test_sse_burst_delivery_and_stats_update PASSED [ 40%]
tests/api/test_events_sse.py::test_sse_stream_burst_via_uvicorn_integration SKIPPED [ 41%]
tests/api/test_events_ws.py::test_ws_receives_emitted_event_minimal PASSED [ 41%]
tests/api/test_events_ws.py::test_ws_burst_delivery_and_stats_update PASSED [ 41%]
tests/api/test_events_ws.py::test_metrics_rate_limiting PASSED           [ 41%]
tests/api/test_events_ws_acl.py::test_ws_events_resubscribe_acl[dis.allowed-sub_topics0-ok.-False] PASSED [ 41%]
tests/api/test_events_ws_acl.py::test_ws_events_resubscribe_acl[ok.alpha,ok.beta-sub_topics1-ok.-True] PASSED [ 41%]
tests/api/test_events_ws_acl.py::test_ws_events_resubscribe_acl[None-sub_topics2-allow.-False] PASSED [ 41%]
tests/api/test_events_ws_resubscribe.py::test_ws_resubscribe_via_json_control_updates_filter PASSED [ 41%]
tests/api/test_governance_metrics_exposure.py::test_governance_metrics_counter_increments_for_logged_interaction PASSED [ 41%]
tests/api/test_health_alerts_ui.py::test_health_endpoints_and_alerts_and_ui_snapshot PASSED [ 41%]
tests/api/test_health_lifecycle_endpoint.py::test_health_lifecycle_endpoint_session_available PASSED [ 41%]
tests/api/test_health_lifecycle_endpoint.py::test_health_lifecycle_degraded_details_variants[False-False] PASSED [ 41%]
tests/api/test_health_lifecycle_endpoint.py::test_health_lifecycle_degraded_details_variants[True-True] PASSED [ 41%]
tests/api/test_health_lifecycle_endpoint.py::test_startup_debug_dump_contains_phase_timestamps PASSED [ 41%]
tests/api/test_health_lifecycle_endpoint.py::test_health_lifecycle_etag_304_flow PASSED [ 42%]
tests/api/test_health_lifecycle_endpoint.py::test_health_lifecycle_etag_304_flow_suppressed PASSED [ 42%]
tests/api/test_health_router_basic.py::test_health_basic_monkeypatched PASSED [ 42%]
tests/api/test_health_router_basic.py::test_health_storage_endpoint PASSED [ 42%]
tests/api/test_health_shims.py::test_health_endpoint_returns_minimal_snapshot PASSED [ 42%]
tests/api/test_health_shims.py::test_health_summary_endpoint_returns_compact_summary PASSED [ 42%]
tests/api/test_http_cache_normalize_etag.py::test_normalize_etag_variants[abc123-"abc123"] PASSED [ 42%]
tests/api/test_http_cache_normalize_etag.py::test_normalize_etag_variants["abc123"-"abc123"] PASSED [ 42%]
tests/api/test_http_cache_normalize_etag.py::test_normalize_etag_variants[W/abc123-W/"abc123"] PASSED [ 42%]
tests/api/test_http_cache_normalize_etag.py::test_normalize_etag_variants[W/ abc123-W/"abc123"] PASSED [ 42%]
tests/api/test_http_cache_normalize_etag.py::test_normalize_etag_variants[W/"abc123"-W/"abc123"] PASSED [ 42%]
tests/api/test_http_cache_normalize_etag.py::test_normalize_etag_variants[  W/  "abc123"  -W/"abc123"] PASSED [ 42%]
tests/api/test_http_cache_normalize_etag.py::test_normalize_etag_variants[-""] PASSED [ 42%]
tests/api/test_intent_metrics_exposure.py::test_intent_metrics_exposed_when_enabled PASSED [ 42%]
tests/api/test_intent_metrics_exposure.py::test_intent_metrics_dedicated_endpoint PASSED [ 42%]
tests/api/test_internal_events_stats.py::test_internal_events_stats_disabled PASSED [ 43%]
tests/api/test_internal_events_stats.py::test_internal_events_stats_enabled PASSED [ 43%]
tests/api/test_invalidation_events.py::test_sidebar_cache_invalidation_on_metric_event PASSED [ 43%]
tests/api/test_invalidation_metrics.py::test_invalidation_metrics_exposed PASSED [ 43%]
tests/api/test_invalidation_selective_and_histogram.py::test_selective_invalidation_and_histogram PASSED [ 43%]
tests/api/test_lifecycle_metrics_contract.py::test_lifecycle_metrics_contract_presence PASSED [ 43%]
tests/api/test_lifecycle_metrics_exposure.py::test_lifecycle_metrics_lines_basic PASSED [ 43%]
tests/api/test_lifecycle_metrics_exposure.py::test_ready_timestamp_metric_one_shot PASSED [ 43%]
tests/api/test_lifecycle_metrics_name_stability.py::test_lifecycle_metric_names_stable PASSED [ 43%]
tests/api/test_lifespan_bootstrap.py::test_app_boots_and_state_exposed_light_mode PASSED [ 43%]
tests/api/test_lifespan_component.py::test_lifespan_wires_state_store PASSED [ 43%]
tests/api/test_lifespan_component.py::test_lifespan_calls_setup_state_pubsub_when_enabled PASSED [ 43%]
tests/api/test_livez_readyz.py::test_livez_and_readyz_are_fast PASSED    [ 43%]
tests/api/test_memory_builder_base_dir_override.py::test_build_memory_metrics_lines_when_base_dir_overridden PASSED [ 43%]
tests/api/test_memory_metrics_exposure.py::test_memory_metrics_present_and_sane PASSED [ 44%]
tests/api/test_metrics_memory_and_cache_fallbacks.py::test_memory_metrics_stamp_fallback PASSED [ 44%]
tests/api/test_metrics_memory_and_cache_fallbacks.py::test_memory_metrics_index_json_parse_error PASSED [ 44%]
tests/api/test_metrics_memory_and_cache_fallbacks.py::test_memory_metrics_log_failure_heuristic PASSED [ 44%]
tests/api/test_metrics_memory_and_cache_fallbacks.py::test_cache_middleware_late_install_does_not_break_metrics PASSED [ 44%]
tests/api/test_metrics_router_basic.py::test_metrics_schema_version PASSED [ 44%]
tests/api/test_metrics_router_range_latest.py::test_metrics_range_and_latest_multi PASSED [ 44%]
tests/api/test_metrics_schema_version_shim.py::test_metrics_schema_version_when_table_absent PASSED [ 44%]
tests/api/test_metrics_schema_version_shim.py::test_metrics_schema_version_when_table_present PASSED [ 44%]
tests/api/test_metrics_token_auth.py::test_metrics_requires_token_when_configured PASSED [ 44%]
tests/api/test_middleware_lifecycle.py::test_cache_middleware_absent_on_raw_fastapi_app PASSED [ 44%]
tests/api/test_middleware_lifecycle.py::test_cache_middleware_present_after_build PASSED [ 44%]
tests/api/test_model_selection_histogram_and_endpoint.py::test_model_selection_dedicated_endpoint_and_histogram_lines PASSED [ 44%]
tests/api/test_model_selection_histogram_and_endpoint.py::test_model_selection_histogram_lines_present_in_metrics PASSED [ 44%]
tests/api/test_model_selection_metrics_exposure.py::test_model_selection_metrics_exposed_when_chat_autoselects PASSED [ 44%]
tests/api/test_models_status.py::test_models_status_endpoint_builds PASSED [ 45%]
tests/api/test_negative_and_invalidation_flow.py::test_negative_alerts_summary_and_invalidation PASSED [ 45%]
tests/api/test_negative_if_none_match_bypass_guard.py::test_if_none_match_does_not_bypass_negative_paths PASSED [ 45%]
tests/api/test_optimization_agent_metrics.py::test_no_value_lines_when_opt_agent_not_enabled PASSED [ 45%]
tests/api/test_optimization_agent_metrics.py::test_opt_metrics_lines_present_when_flag_enabled PASSED [ 45%]
tests/api/test_optimization_agent_metrics.py::test_opt_counters_increment_on_event_publish PASSED [ 45%]
tests/api/test_planned_metrics_exposure.py::test_cache_bypass_reason_query PASSED [ 45%]
tests/api/test_planned_metrics_exposure.py::test_sse_bypass_counter PASSED [ 45%]
tests/api/test_planned_metrics_exposure.py::test_ui_etag_304_total_increments PASSED [ 45%]
tests/api/test_planned_metrics_exposure.py::test_metrics_auth_fail_total PASSED [ 45%]
tests/api/test_planned_metrics_exposure.py::test_metrics_auth_variants_accept_and_reject PASSED [ 45%]
tests/api/test_readiness_and_realtime_flags.py::test_livez_bypass_increments_cache_bypass_counter PASSED [ 45%]
tests/api/test_readiness_and_realtime_flags.py::test_realtime_router_included_when_flag_enabled PASSED [ 45%]
tests/api/test_rollout_flags_toggle_safety.py::test_endpoints_ok_with_all_flags_off PASSED [ 45%]
tests/api/test_rollout_flags_toggle_safety.py::test_endpoints_ok_with_agent_flag_without_orchestrator PASSED [ 46%]
tests/api/test_rollout_flags_toggle_safety.py::test_orchestrator_enabled_exposes_orchestrator_metrics PASSED [ 46%]
tests/api/test_rollout_flags_toggle_safety.py::test_orchestrator_enabled_without_agents_fallback PASSED [ 46%]
tests/api/test_rollout_flags_toggle_safety.py::test_enabling_micro_agent_flags_keeps_endpoints_ok[ENABLE_MEMORY_REFRESH_AGENT] PASSED [ 46%]
tests/api/test_rollout_flags_toggle_safety.py::test_enabling_micro_agent_flags_keeps_endpoints_ok[ENABLE_STORAGE_RETENTION_AGENT] PASSED [ 46%]
tests/api/test_rollout_flags_toggle_safety.py::test_enabling_micro_agent_flags_keeps_endpoints_ok[ENABLE_UI_CONTRACTS_AGENT] PASSED [ 46%]
tests/api/test_rollout_flags_toggle_safety.py::test_optimization_apply_alone_has_no_effect PASSED [ 46%]
tests/api/test_route_contract.py::test_route_contract_and_ui_etags PASSED [ 46%]
tests/api/test_rules_hash_present_metric.py::test_rules_hash_present_metric_exposed_and_one PASSED [ 46%]
tests/api/test_server_entrypoint_thin.py::test_entrypoint_builds_app_default PASSED [ 46%]
tests/api/test_server_entrypoint_thin.py::test_entrypoint_builds_app_when_factory_disabled PASSED [ 46%]
tests/api/test_server_factory_cache_controls.py::test_cache_middleware_installed_by_default PASSED [ 46%]
tests/api/test_server_factory_cache_controls.py::test_cache_middleware_respects_disable_flag PASSED [ 46%]
tests/api/test_server_factory_internal_cache_stats.py::test_internal_cache_stats_endpoint_ok PASSED [ 46%]
tests/api/test_server_factory_internal_cache_stats.py::test_metrics_includes_cache_and_memory_lines PASSED [ 46%]
tests/api/test_shutdown_metrics.py::test_shutdown_metrics_basic PASSED   [ 47%]
tests/api/test_standards_metrics_exposure.py::test_standards_metrics_basic PASSED [ 47%]
tests/api/test_startup_middleware.py::test_malformed_path_guard_blocks_encoded_pipes PASSED [ 47%]
tests/api/test_state_admin_persist.py::test_state_persist_store_unavailable PASSED [ 47%]
tests/api/test_state_admin_persist.py::test_state_persist_all_vs_list PASSED [ 47%]
tests/api/test_status_summary_restored.py::test_status_returns_snapshot PASSED [ 47%]
tests/api/test_status_summary_restored.py::test_summary_returns_last_response_and_uptime PASSED [ 47%]
tests/api/test_status_summary_restored.py::test_malformed_pipeline_path_returns_400 PASSED [ 47%]
tests/api/test_ui_alerts_summary.py::test_alerts_summary PASSED          [ 47%]
tests/api/test_ui_composites.py::test_ui_config_etag_and_shape PASSED    [ 47%]
tests/api/test_ui_composites.py::test_ui_metrics_catalog_etag_and_shape PASSED [ 47%]
tests/api/test_ui_composites.py::test_ui_sidebar_snapshot_etag_and_shape PASSED [ 47%]
tests/api/test_ui_composites_server.py::test_ui_config_with_etag_304 PASSED [ 47%]
tests/api/test_ui_composites_server.py::test_ui_metrics_catalog_with_etag_304 PASSED [ 47%]
tests/api/test_ui_composites_server.py::test_ui_sidebar_snapshot_with_etag_304 PASSED [ 48%]
tests/api/test_ui_config_endpoint.py::test_ui_config_sanitized PASSED    [ 48%]
tests/api/test_ui_dashboard_instrumentation.py::test_dashboard_render_metrics_record_views PASSED [ 48%]
tests/api/test_ui_dashboard_instrumentation.py::test_dashboard_notify_events_on_errors PASSED [ 48%]
tests/api/test_ui_data_facade.py::test_build_sidebar_snapshot_basic PASSED [ 48%]
tests/api/test_ui_data_facade.py::test_build_sidebar_snapshot_sections_toggle PASSED [ 48%]
tests/api/test_ui_etag_endpoints.py::test_etag_catalog_and_config PASSED [ 48%]
tests/api/test_ui_metrics_catalog.py::test_metrics_catalog_basic PASSED  [ 48%]
tests/api/test_ui_metrics_catalog.py::test_metrics_contract_doc_lists_advanced_metrics PASSED [ 48%]
tests/api/test_ui_metrics_catalog.py::test_advanced_metrics_exposed_when_flag_enabled PASSED [ 48%]
tests/api/test_ui_models.py::test_metric_catalog_entry_defaults PASSED   [ 48%]
tests/api/test_ui_models.py::test_sidebar_snapshot_defaults PASSED       [ 48%]
tests/api/test_ui_models.py::test_alerts_summary_model PASSED            [ 48%]
tests/api/test_ui_performance_dashboard.py::test_build_dashboard_payload_anomaly_states[5.0-alert-1-True] PASSED [ 48%]
tests/api/test_ui_performance_dashboard.py::test_build_dashboard_payload_anomaly_states[101.0-ok-0-False] PASSED [ 48%]
tests/api/test_ui_performance_dashboard.py::test_build_dashboard_payload_swallows_toast_errors PASSED [ 49%]
tests/api/test_ui_schema_endpoint.py::test_ui_schema_contract_payload PASSED [ 49%]
tests/api/test_ui_schema_versions.py::test_historical_trend_serialization_latest_and_legacy PASSED [ 49%]
tests/api/test_ui_schema_versions.py::test_model_comparison_serialization_and_validation PASSED [ 49%]
tests/api/test_ui_schema_versions.py::test_performance_dashboard_serialization_and_legacy PASSED [ 49%]
tests/api/test_ui_sidebar_snapshot.py::test_full_snapshot_and_since_hash PASSED [ 49%]
tests/api/test_ui_sidebar_snapshot.py::test_alerts_only PASSED           [ 49%]
tests/api/test_ui_sidebar_snapshot.py::test_etag_304 PASSED              [ 49%]
tests/api/test_ui_snapshot_etag_strength.py::test_snapshot_etag_is_weak_when_health_included PASSED [ 49%]
tests/api/test_ui_snapshot_etag_strength.py::test_snapshot_etag_is_strong_when_health_excluded PASSED [ 49%]
tests/api/test_ui_snapshot_sincehash_omit.py::test_snapshot_since_hash_omits_sections PASSED [ 49%]
tests/api/test_ui_trends.py::test_historical_trend_hourly_payload PASSED [ 49%]
tests/api/test_ui_trends.py::test_historical_trend_fallback_to_raw_when_rollup_missing PASSED [ 49%]
tests/api/test_ui_trends.py::test_historical_trend_requires_metric PASSED [ 49%]
tests/api/test_ui_ws_metrics_exposure.py::test_ui_ws_counters_increment_on_connect_and_ping SKIPPED [ 50%]
tests/api/test_ws_chat.py::test_ws_chat_stream_happy_path PASSED         [ 50%]
tests/api/test_ws_chat.py::test_ws_chat_auth_enforced_when_api_key_set PASSED [ 50%]
tests/api/test_ws_chat.py::test_ws_chat_rate_limit_parity_emits_error PASSED [ 50%]
tests/api/test_ws_chat.py::test_ws_chat_idle_and_session_timeout_paths PASSED [ 50%]
tests/api/test_ws_chat.py::test_ws_chat_backpressure_many_small_deltas_when_low_threshold PASSED [ 50%]
tests/api/test_ws_chat.py::test_ws_chat_backpressure_fewer_deltas_when_large_threshold PASSED [ 50%]
tests/api/test_ws_chat.py::test_ws_chat_offline_guard_blocked XFAIL      [ 50%]
tests/api/test_ws_chat_contract_fake.py::test_ws_fake_happy_path_ack_delta_done PASSED [ 50%]
tests/api/test_ws_chat_contract_fake.py::test_ws_fake_idle_soft_emits_once PASSED [ 50%]
tests/api/test_ws_chat_contract_fake.py::test_ws_fake_idle_hard_timeout PASSED [ 50%]
tests/api/test_ws_chat_contract_fake.py::test_ws_fake_cancel PASSED      [ 50%]
tests/api/test_ws_chat_contract_fake.py::test_ws_fake_done_contains_elapsed_and_usage PASSED [ 50%]
tests/api/test_ws_chat_llama_stub.py::test_ws_llama_stub_ack_delta_done PASSED [ 50%]
tests/api/test_ws_chat_llama_stub.py::test_ws_llama_stub_timeout_hard PASSED [ 51%]
tests/api/test_ws_chat_llama_stub.py::test_ws_llama_stub_cancel PASSED   [ 51%]
tests/api/test_ws_metrics_messages.py::test_ws_messages_counters_increment PASSED [ 51%]
tests/api/test_ws_ui_scaffold.py::test_ws_ui_basic SKIPPED (ws/ui ro...) [ 51%]
tests/api/ui/test_builders_catalog.py::test_compute_metrics_catalog_aggregates_and_sorts PASSED [ 51%]
tests/api/ui/test_builders_config.py::test_build_ui_config_payload_normalizes_and_hashes PASSED [ 51%]
tests/api/ui/test_ui_cache_ttl.py::test_ui_cache_control_ttls_and_304_preserve_header PASSED [ 51%]
tests/api/ui/test_ui_control_metrics_and_status.py::test_control_metrics_and_status_fields PASSED [ 51%]
tests/api/ui/test_ui_controls.py::test_control_model_select_emits_event PASSED [ 51%]
tests/api/ui/test_ui_controls.py::test_control_benchmark_enqueue_returns_token_and_event PASSED [ 51%]
tests/api/ui/test_ui_events_sse.py::test_ui_events_sse_smoke_head_and_get PASSED [ 51%]
tests/api/ui/test_ui_handlers_api.py::test_ui_config_etag_304_and_counter PASSED [ 51%]
tests/api/ui/test_ui_handlers_api.py::test_sidebar_since_hash_minimal_body PASSED [ 51%]
tests/api/ui/test_ui_status_preview.py::test_ui_status_basic_and_304 PASSED [ 51%]
tests/api/ui/test_ui_status_preview.py::test_ui_metrics_preview_basic_and_304 PASSED [ 51%]
tests/cache_unit/test_bypass.py::test_bypass_query_and_header PASSED     [ 52%]
tests/cache_unit/test_bypass.py::test_bypass_if_none_match_and_global PASSED [ 52%]
tests/cache_unit/test_bypass.py::test_bypass_precedence_and_unknown_headers PASSED [ 52%]
tests/cache_unit/test_invalidation.py::test_invalidation_bump_and_suffix PASSED [ 52%]
tests/cache_unit/test_invalidation.py::test_token_suffix_changes_after_bump PASSED [ 52%]
tests/cache_unit/test_invalidation.py::test_shared_store_consistency_and_separation PASSED [ 52%]
tests/cache_unit/test_invalidation.py::test_bump_is_monotonic_for_same_path PASSED [ 52%]
tests/cache_unit/test_key_builder.py::test_build_key_deterministic_order PASSED [ 52%]
tests/cache_unit/test_key_builder.py::test_build_key_strategy_and_vary PASSED [ 52%]
tests/cache_unit/test_key_builder.py::test_build_key_invalidation_suffix PASSED [ 52%]
tests/cache_unit/test_legacy_cache_fallbacks.py::test_legacy_detect_sse_response[text/event-stream-/metrics-True] PASSED [ 52%]
tests/cache_unit/test_legacy_cache_fallbacks.py::test_legacy_detect_sse_response[application/json-/metrics/events/stream-True] PASSED [ 52%]
tests/cache_unit/test_legacy_cache_fallbacks.py::test_legacy_detect_sse_response[application/json-/metrics-False] PASSED [ 52%]
tests/cache_unit/test_legacy_cache_fallbacks.py::test_fallback_bypass_reason[env_values0-headers0-query0-global_disable] PASSED [ 52%]
tests/cache_unit/test_legacy_cache_fallbacks.py::test_fallback_bypass_reason[env_values1-headers1-query1-query] PASSED [ 53%]
tests/cache_unit/test_legacy_cache_fallbacks.py::test_fallback_bypass_reason[env_values2-headers2-query2-header] PASSED [ 53%]
tests/cache_unit/test_legacy_cache_fallbacks.py::test_fallback_bypass_reason[env_values3-headers3-query3-if_none_match] PASSED [ 53%]
tests/cache_unit/test_legacy_cache_fallbacks.py::test_fallback_bypass_reason[env_values4-headers4-query4-None] PASSED [ 53%]
tests/cache_unit/test_legacy_cache_fallbacks.py::test_parse_internal_key_mapping_supports_star PASSED [ 53%]
tests/cache_unit/test_legacy_cache_fallbacks.py::test_resolve_scopes_for_key[k1-mapping0-legacy-expected0] PASSED [ 53%]
tests/cache_unit/test_legacy_cache_fallbacks.py::test_resolve_scopes_for_key[None-mapping1-legacy-expected1] PASSED [ 53%]
tests/cache_unit/test_legacy_cache_fallbacks.py::test_resolve_scopes_for_key[legacy-None-legacy-expected2] PASSED [ 53%]
tests/cache_unit/test_legacy_cache_fallbacks.py::test_resolve_scopes_for_key[other-None-legacy-None] PASSED [ 53%]
tests/cache_unit/test_legacy_cache_fallbacks.py::test_resolve_scopes_for_key[x-None-None-expected4] PASSED [ 53%]
tests/cache_unit/test_legacy_cache_fallbacks.py::test_strategy_tokens_handles_headers PASSED [ 53%]
tests/cache_unit/test_legacy_cache_fallbacks.py::test_inmemory_lru_respects_env_override PASSED [ 53%]
tests/cache_unit/test_legacy_cache_fallbacks.py::test_inmemory_lru_reuses_existing_hits PASSED [ 53%]
tests/cache_unit/test_legacy_cache_fallbacks.py::test_redis_backend_get_miss_on_missing_data PASSED [ 53%]
tests/cache_unit/test_legacy_cache_fallbacks.py::test_redis_backend_get_returns_entry PASSED [ 53%]
tests/cache_unit/test_legacy_cache_fallbacks.py::test_redis_backend_get_expires_entry PASSED [ 54%]
tests/cache_unit/test_legacy_cache_fallbacks.py::test_redis_backend_set_serializes_payload PASSED [ 54%]
tests/cache_unit/test_legacy_cache_fallbacks.py::test_normalize_negative_query_fallback_removes_control_params PASSED [ 54%]
tests/cache_unit/test_legacy_cache_fallbacks.py::test_normalize_negative_query_fallback_handles_empty_input PASSED [ 54%]
tests/cache_unit/test_legacy_cache_fallbacks.py::test_normalize_negative_query_fallback_tolerates_non_string_input PASSED [ 54%]
tests/cache_unit/test_memory_backend.py::test_lru_eviction_and_stats PASSED [ 54%]
tests/cache_unit/test_memory_backend.py::test_overwrite_carries_hits PASSED [ 54%]
tests/cache_unit/test_memory_backend.py::test_capacity_runtime_shrink PASSED [ 54%]
tests/cache_unit/test_metrics_counters.py::test_inc_bypass_normalization_and_unknown PASSED [ 54%]
tests/cache_unit/test_metrics_counters.py::test_sse_counters_increment_locally PASSED [ 54%]
tests/cache_unit/test_metrics_counters.py::test_get_runtime_counters_merges_shared_and_local PASSED [ 54%]
tests/cache_unit/test_negative_cache.py::test_is_structurally_empty_covers_common_cases PASSED [ 54%]
tests/cache_unit/test_negative_cache.py::test_compute_negative_expiry_floor_and_fraction PASSED [ 54%]
tests/cache_unit/test_negative_cache.py::test_normalize_query_removes_internal_tokens PASSED [ 54%]
tests/cache_unit/test_policy.py::test_compute_effective_ttl_scales_and_clamps PASSED [ 55%]
tests/cache_unit/test_policy.py::test_compute_negative_expiry_fraction_and_floor PASSED [ 55%]
tests/cache_unit/test_policy.py::test_normalize_etag_handles_raw_quoted_and_weak PASSED [ 55%]
tests/cache_unit/test_policy.py::test_etag_not_modified_accepts_multi_and_weak PASSED [ 55%]
tests/cache_unit/test_policy.py::test_policy_should_bypass_delegates_to_bypass_module PASSED [ 55%]
tests/cache_unit/test_sse_helpers.py::test_is_sse_response_by_content_type_and_path PASSED [ 55%]
tests/cache_unit/test_sse_helpers.py::test_mark_sse_bypass_sets_header_and_metrics PASSED [ 55%]
tests/docs/test_anchor_checker.py::test_anchor_checker_script_runs_clean PASSED [ 55%]
tests/docs/test_backfill_docs.py::test_readme_mentions_backfill_section PASSED [ 55%]
tests/docs/test_config_quickstart_doc.py::test_quickstart_contains_required_heading[## Overview] PASSED [ 55%]
tests/docs/test_config_quickstart_doc.py::test_quickstart_contains_required_heading[## Environment Flags (Core)] PASSED [ 55%]
tests/docs/test_config_quickstart_doc.py::test_quickstart_contains_required_heading[## Metrics (Canonical Names)] PASSED [ 55%]
tests/docs/test_config_quickstart_doc.py::test_quickstart_contains_required_heading[## Basic Workflow] PASSED [ 55%]
tests/docs/test_config_quickstart_doc.py::test_quickstart_contains_required_heading[## Includes Layering] PASSED [ 55%]
tests/docs/test_config_quickstart_doc.py::test_quickstart_contains_required_heading[## Deprecation Handling] PASSED [ 55%]
tests/docs/test_config_quickstart_doc.py::test_quickstart_contains_required_heading[## Secret Redaction] PASSED [ 56%]
tests/docs/test_config_quickstart_doc.py::test_quickstart_contains_required_heading[## Performance & Percentiles] PASSED [ 56%]
tests/docs/test_config_quickstart_doc.py::test_quickstart_contains_required_heading[## Troubleshooting] PASSED [ 56%]
tests/docs/test_config_quickstart_doc.py::test_quickstart_contains_required_heading[## FAQ] PASSED [ 56%]
tests/docs/test_config_quickstart_doc.py::test_readme_links_quickstart PASSED [ 56%]
tests/docs/test_config_quickstart_doc.py::test_metrics_table_contains_core_metric_examples PASSED [ 56%]
tests/docs/test_config_quickstart_doc.py::test_validation_checklist_present PASSED [ 56%]
tests/docs/test_config_quickstart_doc.py::test_no_todo_brackets_left PASSED [ 56%]
tests/docs/test_config_quickstart_doc.py::test_anchor_slug_stability PASSED [ 56%]
tests/docs/test_global_anchors.py::test_top_level_anchor_slug_uniqueness FAILED [ 56%]
tests/docs/test_ops_docs_metadata.py::test_ops_docs_metadata_contract PASSED [ 56%]
tests/e2e/test_events_end_to_end.py::test_sse_receives_state_change_event_end_to_end PASSED [ 56%]
tests/e2e/test_events_end_to_end.py::test_ws_receives_state_change_event_end_to_end XFAIL [ 56%]
tests/e2e/test_events_end_to_end.py::test_sse_streaming_variant_skipped SKIPPED [ 56%]
tests/health/test_faulthandler_pr_owner_signal.py::test_codeowners_matching_edge_cases PASSED [ 57%]
tests/health/test_faulthandler_pr_owner_signal.py::test_pr_comment_posting_via_gh_cli PASSED [ 57%]
tests/integration/test_cache_bypass_smoke.py::test_cache_bypass_end_to_end PASSED [ 57%]
tests/integration/test_optimization_event_counters_smoke.py::test_optimization_event_counters_smoke PASSED [ 57%]
tests/integration/test_state_cache_bridge_smoke.py::test_state_change_invalidate_bridge PASSED [ 57%]
tests/integration/test_storage_health_rules_hash.py::test_storage_health_exposes_rules_hash_and_detail PASSED [ 57%]
tests/lint/test_no_cache_impl_imports.py::test_no_imports_of_api_cache_impl PASSED [ 57%]
tests/maintenance/test_orchestrator_jobs.py::test_job_db_vacuum PASSED   [ 57%]
tests/maintenance/test_orchestrator_jobs.py::test_job_cache_health_inferred_hit_and_artifacts PASSED [ 57%]
tests/maintenance/test_orchestrator_jobs.py::test_job_db_vacuum_pragma_flow_and_toggles PASSED [ 57%]
tests/maintenance/test_orchestrator_jobs.py::test_job_check_triggers_invokes_vacuum PASSED [ 57%]
tests/maintenance/test_orchestrator_jobs.py::test_run_once_smoke_cache_health_and_vacuum PASSED [ 57%]
tests/messaging/test_integration_event_emissions.py::test_optimization_agent_lifecycle_events PASSED [ 57%]
tests/messaging/test_integration_event_emissions.py::test_collector_service_emits_metrics_and_alerts FAILED [ 57%]
tests/messaging/test_messaging_config.py::test_config_env_overrides_max_queue PASSED [ 57%]
tests/monitoring/test_buffered_writer.py::test_buffered_writer_batching_size_flush PASSED [ 58%]
tests/monitoring/test_buffered_writer.py::test_buffered_writer_time_flush PASSED [ 58%]
tests/monitoring/test_db_pool.py::test_acquire_release_returns_connection_to_pool PASSED [ 58%]
tests/monitoring/test_db_pool.py::test_acquire_timeout_when_pool_exhausted PASSED [ 58%]
tests/monitoring/test_db_pool.py::test_close_all_disallows_future_acquire PASSED [ 58%]
tests/monitoring/test_db_pool.py::test_custom_factory_is_used PASSED     [ 58%]
tests/monitoring/test_event_writer.py::test_uncaught_exception_recorded PASSED [ 58%]
tests/monitoring/test_exceptions.py::TestErrorEnums::test_error_code_enum PASSED [ 58%]
tests/monitoring/test_exceptions.py::TestErrorEnums::test_error_component_enum PASSED [ 58%]
tests/monitoring/test_exceptions.py::TestErrorEnums::test_error_severity_enum PASSED [ 58%]
tests/monitoring/test_exceptions.py::TestMetricsStorageException::test_basic_initialization PASSED [ 58%]
tests/monitoring/test_exceptions.py::TestMetricsStorageException::test_component_determination PASSED [ 58%]
tests/monitoring/test_exceptions.py::TestMetricsStorageException::test_extract_message_pattern PASSED [ 58%]
tests/monitoring/test_exceptions.py::TestMetricsStorageException::test_full_initialization PASSED [ 58%]
tests/monitoring/test_exceptions.py::TestMetricsStorageException::test_get_fingerprint PASSED [ 59%]
tests/monitoring/test_exceptions.py::TestMetricsStorageException::test_to_dict PASSED [ 59%]
tests/monitoring/test_exceptions.py::TestSpecializedExceptions::test_cache_exception PASSED [ 59%]
tests/monitoring/test_exceptions.py::TestSpecializedExceptions::test_database_exception PASSED [ 59%]
tests/monitoring/test_exceptions.py::TestSpecializedExceptions::test_file_storage_exception PASSED [ 59%]
tests/monitoring/test_exceptions.py::TestSpecializedExceptions::test_legacy_exceptions_exist PASSED [ 59%]
tests/monitoring/test_exceptions.py::TestSpecializedExceptions::test_model_metrics_exception PASSED [ 59%]
tests/monitoring/test_exceptions.py::TestSpecializedExceptions::test_query_exception PASSED [ 59%]
tests/monitoring/test_exceptions.py::TestSpecializedExceptions::test_resource_metrics_exception PASSED [ 59%]
tests/monitoring/test_exceptions.py::TestSpecializedExceptions::test_time_series_exception PASSED [ 59%]
tests/monitoring/test_instrumentation_decorators.py::test_track_latency_decorator_success PASSED [ 59%]
tests/monitoring/test_instrumentation_decorators.py::test_track_latency_decorator_error PASSED [ 59%]
tests/monitoring/test_instrumentation_decorators.py::test_track_latency_ctx PASSED [ 59%]
tests/monitoring/test_metrics_validator.py::test_valid_sample_passes PASSED [ 59%]
tests/monitoring/test_metrics_validator.py::test_unknown_name_rejected PASSED [ 60%]
tests/monitoring/test_metrics_validator.py::test_illegal_label_rejected PASSED [ 60%]
tests/monitoring/test_metrics_validator.py::test_non_finite_rejected PASSED [ 60%]
tests/monitoring/test_metrics_validator.py::test_batch_validation PASSED [ 60%]
tests/retention/backup/test_backup_manager.py::test_create_backup_returns_path_when_data_inline PASSED [ 60%]
tests/retention/backup/test_backup_manager.py::test_create_backup_fetches_item_from_storage PASSED [ 60%]
tests/retention/backup/test_backup_manager.py::test_restore_returns_data_when_no_storage PASSED [ 60%]
tests/retention/backup/test_backup_manager.py::test_restore_stores_payload_when_storage_provided PASSED [ 60%]
tests/retention/scheduler/test_scheduler_state_store.py::test_save_without_state_file_returns_false PASSED [ 60%]
tests/retention/scheduler/test_scheduler_state_store.py::test_round_trip_persists_jobs PASSED [ 60%]
tests/retention/scheduler/test_scheduler_state_store.py::test_load_missing_file_returns_false PASSED [ 60%]
tests/retention/scheduler/test_scheduler_state_store.py::test_load_skips_invalid_jobs PASSED [ 60%]
tests/scripts/test_run_server.py::test__port_in_use_detects_bound_socket PASSED [ 60%]
tests/scripts/test_run_server.py::test_main_exits_when_port_in_use PASSED [ 60%]
tests/scripts/test_run_server.py::test_main_runs_with_free_port_and_sets_defaults PASSED [ 60%]
tests/scripts/test_run_server.py::test_main_uses_env_overrides_when_no_args PASSED [ 61%]
tests/scripts/test_scale_agents.py::test_add_and_status PASSED           [ 61%]
tests/scripts/test_scale_agents.py::test_remove_and_dry_run PASSED       [ 61%]
tests/scripts/test_scale_agents.py::test_add_insufficient_ids PASSED     [ 61%]
tests/scripts/test_scale_agents.py::test_json_mode_add_status_remove PASSED [ 61%]
tests/state/test_change_hooks.py::test_change_hook_emission_and_ring_buffer PASSED [ 61%]
tests/state/test_change_hooks.py::test_unsubscribe_stops_emission PASSED [ 61%]
tests/state/test_change_hooks_flags.py::test_emit_disabled_env_flag PASSED [ 61%]
tests/state/test_change_hooks_flags.py::test_ring_buffer_maxlen_trimming PASSED [ 61%]
tests/systemd/test_agent_multi_instance_skeleton.py::test_template_placeholders_support_two_instances PASSED [ 61%]
tests/systemd/test_agent_template_unit.py::test_template_exists PASSED   [ 61%]
tests/systemd/test_agent_template_unit.py::test_placeholders_present PASSED [ 61%]
tests/systemd/test_agent_template_unit.py::test_security_baseline_subset PASSED [ 61%]
tests/systemd/test_agent_template_unit.py::test_memory_limit_lower_than_orchestrator PASSED [ 61%]
tests/systemd/test_deprecated_units_enforcement.py::test_deprecated_units_marker_and_whitelist PASSED [ 62%]
tests/systemd/test_generate_agent_instance_env.py::test_create_env_file PASSED [ 62%]
tests/systemd/test_generate_agent_instance_env.py::test_skip_existing_without_force PASSED [ 62%]
tests/systemd/test_generate_agent_instance_env.py::test_force_overwrite PASSED [ 62%]
tests/systemd/test_generate_agent_instance_env.py::test_extra_vars_append PASSED [ 62%]
tests/systemd/test_generate_agent_instance_env.py::test_duplicate_key_rejected PASSED [ 62%]
tests/systemd/test_generate_agent_instance_env.py::test_invalid_id_raises PASSED [ 62%]
tests/systemd/test_heartbeat_fallback.py::test_heartbeat_file_created_and_updated_when_notify_disabled PASSED [ 62%]
tests/systemd/test_inventory_integrity_manifest.py::test_integrity_manifest_generation_and_stability PASSED [ 62%]
tests/systemd/test_inventory_parser.py::test_parse_directory_and_classification PASSED [ 62%]
tests/systemd/test_inventory_parser.py::test_graph_contains_nodes_and_edges PASSED [ 62%]
tests/systemd/test_inventory_summary.py::test_inventory_summary_schema PASSED [ 62%]
tests/systemd/test_logging_modes.py::test_text_logging_default_mode PASSED [ 62%]
tests/systemd/test_logging_modes.py::test_json_logging_mode_includes_session_id PASSED [ 62%]
tests/systemd/test_logging_modes.py::test_json_phase_parsing_fields PASSED [ 62%]
tests/systemd/test_notify_probe_exclusion.py::test_notify_dropin_clears_execstartpost PASSED [ 63%]
tests/systemd/test_orchestrator_unit_basic.py::test_unit_exists_and_basic_directives PASSED [ 63%]
tests/systemd/test_orchestrator_unit_basic.py::test_comments_document_staged_notify PASSED [ 63%]
tests/systemd/test_restart_alignment.py::test_internal_supervision_disabled_in_prod PASSED [ 63%]
tests/systemd/test_restart_alignment.py::test_internal_supervision_disabled_when_supervised PASSED [ 63%]
tests/systemd/test_restart_alignment.py::test_dev_single_retry_path PASSED [ 63%]
tests/systemd/test_restart_alignment.py::test_dev_restart_wrapper_enabled PASSED [ 63%]
tests/systemd/test_sd_notify_helper.py::test_notify_disabled_when_flag_absent PASSED [ 63%]
tests/systemd/test_sd_notify_helper.py::test_notify_disabled_when_import_fails PASSED [ 63%]
tests/systemd/test_sd_notify_helper.py::test_notify_success_path PASSED  [ 63%]
tests/systemd/test_sd_notify_helper.py::test_watchdog_interval_parse PASSED [ 63%]
tests/systemd/test_security_profile_enforcement.py::test_security_validator_json_schema PASSED [ 63%]
tests/systemd/test_security_profile_enforcement.py::test_security_validator_markdown PASSED [ 63%]
tests/systemd/test_service_start_notify_integration.py::test_service_start_emits_ready_and_status_when_notify_enabled PASSED [ 63%]
tests/systemd/test_service_start_shim_deprecation.py::test_service_start_shim_emits_single_deprecation_warning PASSED [ 64%]
tests/systemd/test_slice_examples.py::test_root_slice_example PASSED     [ 64%]
tests/systemd/test_slice_examples.py::test_agents_slice_example PASSED   [ 64%]
tests/systemd/test_supervision_mode_logging.py::test_supervision_mode_systemd_disabled_internal PASSED [ 64%]
tests/systemd/test_supervision_mode_logging.py::test_supervision_mode_internal_single_retry PASSED [ 64%]
tests/systemd/test_target_dependencies.py::test_target_exists_and_requires_orchestrator PASSED [ 64%]
tests/systemd/test_target_dependencies.py::test_ancillary_units_marked_deprecated_and_part_of_target PASSED [ 64%]
tests/systemd/test_target_dependencies.py::test_ingest_unit_keeps_restart_policy_transitional PASSED [ 64%]
tests/systemd/test_wait_ready_probe.py::test_wait_ready_immediate PASSED [ 64%]
tests/systemd/test_wait_ready_probe.py::test_wait_ready_timeout PASSED   [ 64%]
tests/systemd/test_watchdog_interval_config.py::test_interval_accepted_when_above_floor PASSED [ 64%]
tests/systemd/test_watchdog_interval_config.py::test_interval_clamped_to_floor_prod PASSED [ 64%]
tests/systemd/test_watchdog_interval_config.py::test_interval_floor_test_mode PASSED [ 64%]
tests/systemd/test_watchdog_interval_config.py::test_negative_interval_fallback PASSED [ 64%]
tests/systemd/test_watchdog_interval_config.py::test_stale_config_metrics PASSED [ 64%]
tests/systemd/test_watchdog_metrics.py::test_metrics_flag_disabled_excludes_counters PASSED [ 65%]
tests/systemd/test_watchdog_metrics.py::test_notify_send_counter_increments PASSED [ 65%]
tests/systemd/test_watchdog_metrics.py::test_heartbeat_write_and_mismatch PASSED [ 65%]
tests/systemd/test_watchdog_mismatch_degraded.py::test_escalation_triggers_at_threshold PASSED [ 65%]
tests/systemd/test_watchdog_mismatch_degraded.py::test_escalation_suppression PASSED [ 65%]
tests/systemd/test_watchdog_mismatch_degraded.py::test_reset_on_compliant_interval PASSED [ 65%]
tests/systemd/test_watchdog_mismatch_degraded.py::test_threshold_zero_disables PASSED [ 65%]
tests/systemd/test_watchdog_simulation.py::test_heartbeat_stale_detection_basic PASSED [ 65%]
tests/systemd/test_watchdog_simulation.py::test_heartbeat_stale_when_missing PASSED [ 65%]
tests/systemd/test_watchdog_simulation.py::test_watchdog_interval_mismatch_warning PASSED [ 65%]
tests/systemd/test_watchdog_simulation.py::test_watchdog_thread_sends PASSED [ 65%]
tests/systemd/test_watchdog_stale_detection.py::test_stale_event_and_gauge PASSED [ 65%]
tests/systemd/test_watchdog_status_updates.py::test_status_emits_periodically PASSED [ 65%]
tests/systemd/test_watchdog_status_updates.py::test_status_disable_flag PASSED [ 65%]
tests/systemd/test_watchdog_status_updates.py::test_status_custom_interval PASSED [ 66%]
tests/test_agents_cli.py::test_agents_list_runs_and_prints PASSED        [ 66%]
tests/test_agents_cli.py::test_agent_run_cache_inspector_writes_report PASSED [ 66%]
tests/test_agents_cli.py::test_cache_inspector_zero_and_negative_ttls PASSED [ 66%]
tests/test_api_cache_annotations.py::test_cache_hit_and_bypass PASSED    [ 66%]
tests/test_api_cache_annotations.py::test_cache_stats_interface PASSED   [ 66%]
tests/test_api_cache_extended.py::test_lru_eviction_and_vary_header PASSED [ 66%]
tests/test_api_cache_extended.py::test_disable_and_scale_flags PASSED    [ 66%]
tests/test_api_cache_negative_advanced.py::test_negative_caching_404_metric_latest PASSED [ 66%]
tests/test_api_cache_negative_advanced.py::test_negative_caching_structurally_empty_alerts_summary PASSED [ 66%]
tests/test_api_cache_negative_advanced.py::test_negative_ttl_expiry_timing_structural_empty PASSED [ 66%]
tests/test_api_cache_negative_advanced.py::test_negative_ttl_expiry_timing_404_latest_metric PASSED [ 66%]
tests/test_api_cache_negative_advanced.py::test_negative_ttl_expiry_timing_empty_catalog PASSED [ 66%]
tests/test_api_cache_negative_invalidation.py::test_negative_caching_empty_catalog PASSED [ 66%]
tests/test_api_cache_negative_invalidation.py::test_invalidation_hook PASSED [ 66%]
tests/test_api_cache_scope_strategy.py::test_cache_key_strategy_none_same_entry PASSED [ 67%]
tests/test_api_cache_scope_strategy.py::test_cache_key_strategy_key_separates_api_keys PASSED [ 67%]
tests/test_api_cache_scope_strategy.py::test_cache_key_strategy_scope_separates_scopes PASSED [ 67%]
tests/test_cache_key_segregation.py::test_no_cross_hit_on_scope_changes[/health] PASSED [ 67%]
tests/test_cache_key_segregation.py::test_no_cross_hit_on_scope_changes[/health/summary] PASSED [ 67%]
tests/test_cache_key_segregation.py::test_no_cross_hit_on_key_hash_changes[key] PASSED [ 67%]
tests/test_cache_key_segregation.py::test_no_cross_hit_on_key_hash_changes[scope+key] PASSED [ 67%]
tests/test_cache_key_segregation.py::test_metrics_token_requirement_segregates PASSED [ 67%]
tests/test_cache_key_segregation.py::test_env_dimensions_affect_key[METRICS_DB_PATH-/tmp/db1.sqlite-/tmp/db2.sqlite] PASSED [ 67%]
tests/test_cache_key_segregation.py::test_env_dimensions_affect_key[CACHE_TTL_SCALE-0.05-0.2] PASSED [ 67%]
tests/test_cache_key_segregation.py::test_invalidation_token_changes_key PASSED [ 67%]
tests/test_cleanup_bak_files.py::test_find_bak_files PASSED              [ 67%]
tests/test_cleanup_bak_files.py::test_cleanup_bak_dry_run PASSED         [ 67%]
tests/test_cleanup_bak_files.py::test_cleanup_bak_delete PASSED          [ 67%]
tests/test_event_bus.py::test_basic_publish_and_receive PASSED           [ 68%]
tests/test_event_bus.py::test_drop_oldest_policy PASSED                  [ 68%]
tests/test_event_bus.py::test_close_signals_iterators PASSED             [ 68%]
tests/test_event_bus_recent_and_multi.py::test_recent_match_windowing PASSED [ 68%]
tests/test_event_bus_recent_and_multi.py::test_multi_subscriber_delivery_and_unsubscribe PASSED [ 68%]
tests/test_gpu_aggregation.py::test_gpu_metric_raw_and_manual_aggregation PASSED [ 68%]
tests/test_gpu_collector.py::test_gpu_collector_no_gpu PASSED            [ 68%]
tests/test_gpu_collector.py::test_gpu_collector_nvidia_smi_fallback PASSED [ 68%]
tests/test_gpu_collector.py::test_gpu_collector_nvml PASSED              [ 68%]
tests/test_gpu_ingest_db.py::test_gpu_collector_ingests_samples_into_db PASSED [ 68%]
tests/test_gpu_scheduler_integration.py::test_gpu_collector_scheduler_dispatch_no_gpu PASSED [ 68%]
tests/test_hornet_backend_stub.py::test_hornet_stub_shape_basic PASSED   [ 68%]
tests/test_latency_percentiles.py::test_model_latency_percentiles PASSED [ 68%]
tests/test_metrics_planned_counters.py::test_metrics_planned_counters_present PASSED [ 68%]
tests/test_metrics_schema_doc_guard.py::test_metrics_schema_doc_version_header_matches_expected PASSED [ 68%]
tests/test_metrics_schema_meta.py::test_schema_meta_table_idempotent PASSED [ 69%]
tests/test_metrics_schema_meta.py::test_schema_meta_bump_and_api PASSED  [ 69%]
tests/test_metrics_schema_meta.py::test_schema_meta_bump_validation PASSED [ 69%]
tests/test_migration_checker.py::test_schema_baseline_required PASSED    [ 69%]
tests/test_migration_checker.py::test_schema_change_without_pending_fails PASSED [ 69%]
tests/test_migration_checker.py::test_schema_change_with_pending_passes_pending_stage PASSED [ 69%]
tests/test_negative_percentiles.py::test_no_percentiles_generated_for_metric_without_config PASSED [ 69%]
tests/test_pct_threshold_parsing.py::test_parse_pct_thresholds_basic PASSED [ 69%]
tests/test_pct_threshold_parsing.py::test_parse_pct_thresholds_prefixed PASSED [ 69%]
tests/test_pct_threshold_parsing.py::test_parse_pct_thresholds_invalid_segments PASSED [ 69%]
tests/test_pct_threshold_parsing.py::test_diff_perf_markdown PASSED      [ 69%]
tests/test_pct_threshold_parsing.py::test_drift_percentile_threshold_enforced PASSED [ 69%]
tests/test_pct_threshold_parsing.py::test_suspicious_improvement_flag PASSED [ 69%]
tests/test_percentile_config_drift.py::test_percentile_config_matches_schema_rollups PASSED [ 69%]
tests/test_percentile_rollups.py::test_percentile_rollups_generated PASSED [ 70%]
tests/test_percentile_yaml_sanity.py::test_percentile_yaml_values_valid PASSED [ 70%]
tests/test_perf_regression_example.py::test_perf_regression_example PASSED [ 70%]
tests/test_perf_thresholds.py::test_perf_thresholds PASSED               [ 70%]
tests/test_release_notes.py::test_draft_runs_idempotent PASSED           [ 70%]
tests/test_release_notes.py::test_cut_aborts_without_changes PASSED      [ 70%]
tests/test_schema_meta_guard.py::test_schema_meta_current_version_guard PASSED [ 70%]
tests/test_standards_cli_severity_alias.py::test_severity_alias_low_maps_to_info PASSED [ 70%]
tests/test_standards_cli_severity_alias.py::test_severity_alias_high_maps_to_error PASSED [ 70%]
tests/test_standards_cli_severity_alias.py::test_invalid_severity_rejected PASSED [ 70%]
tests/test_standards_extraction.py::test_extract_marker_block PASSED     [ 70%]
tests/test_standards_extraction.py::test_extract_heading_pattern PASSED  [ 70%]
tests/test_standards_extraction.py::test_conflict_with_seed_id PASSED    [ 70%]
tests/test_standards_extraction.py::test_build_integration_auto_accept PASSED [ 70%]
tests/test_standards_index.py::test_top_level_keys_present PASSED        [ 71%]
tests/test_standards_index.py::test_rule_ids_unique PASSED               [ 71%]
tests/test_standards_index.py::test_categories_exist_for_rules PASSED    [ 71%]
tests/test_standards_index.py::test_source_files_exist PASSED            [ 71%]
tests/test_standards_index.py::test_required_rule_fields_present PASSED  [ 71%]
tests/test_standards_index.py::test_severity_values_valid PASSED         [ 71%]
tests/test_standards_index.py::test_integrity_hash_stable_after_rebuild PASSED [ 71%]
tests/test_streaming_bypass.py::test_sse_head_bypasses_cache_and_never_304 PASSED [ 71%]
tests/test_ui_hash_utils.py::test_hash_stable_and_length PASSED          [ 71%]
tests/test_ui_hash_utils.py::test_hash_special_numbers PASSED            [ 71%]
tests/test_ui_readiness_cache_metrics.py::test_cache_metrics_readiness_flag PASSED [ 71%]
tests/test_ui_snapshot.py::test_sidebar_snapshot_hash_and_since PASSED   [ 71%]
tests/test_ui_snapshot.py::test_catalog_etag_and_order PASSED            [ 71%]
tests/test_ui_snapshot.py::test_ui_config_etag_304 PASSED                [ 71%]
tests/test_ui_snapshot.py::test_schema_map_hashes_stable PASSED          [ 71%]
tests/test_ui_snapshot.py::test_alerts_summary_empty_db PASSED           [ 72%]
tests/test_ui_snapshot.py::test_catalog_empty_and_schema_again PASSED    [ 72%]
tests/test_ui_snapshot.py::test_health_cache PASSED                      [ 72%]
tests/test_ui_snapshot.py::test_ui_config_hash_and_304 PASSED            [ 72%]
tests/test_verify_ui_readiness_smoke.py::test_verify_ui_readiness_outputs_json PASSED [ 72%]
tests/utils/test_hash_utils.py::test_order_invariance_dict_keys PASSED   [ 72%]
tests/utils/test_hash_utils.py::test_float_integer_equivalence PASSED    [ 72%]
tests/utils/test_hash_utils.py::test_nested_structure_stability PASSED   [ 72%]
tests/utils/test_hash_utils.py::test_nan_and_infinity_canonicalization PASSED [ 72%]
tests/utils/test_hash_utils.py::test_list_order_significance PASSED      [ 72%]
tests/utils/test_http_cache.py::test_build_etag_quotes PASSED            [ 72%]
tests/utils/test_http_cache.py::test_etag_not_modified_basic PASSED      [ 72%]
tests/utils/test_http_cache.py::test_etag_not_modified_weak_and_multiple PASSED [ 72%]
tests/utils/test_http_cache.py::test_etag_not_modified_raw_tokens PASSED [ 72%]
tests/visualization/dashboard/test_models_section.py::test_model_section_returns_placeholder_when_input_missing PASSED [ 73%]
tests/visualization/dashboard/test_models_section.py::test_performance_overview_renders_stats_when_summary_provided PASSED [ 73%]
tests/visualization/dashboard/test_models_section.py::test_model_comparison_includes_scripts_when_charts_supplied PASSED [ 73%]
tests/visualization/dashboard/test_models_section.py::test_model_section_uses_injected_renderers_when_overridden PASSED [ 73%]
tests/visualization/dashboard/test_sections_misc.py::test_system_section_returns_placeholder_when_data_missing PASSED [ 73%]
tests/visualization/dashboard/test_sections_misc.py::test_system_section_renders_cards_when_metrics_present PASSED [ 73%]
tests/visualization/dashboard/test_sections_misc.py::test_summary_section_returns_empty_when_no_metrics_present PASSED [ 73%]
tests/visualization/dashboard/test_sections_misc.py::test_summary_section_renders_cards_when_metrics_provided PASSED [ 73%]
tests/visualization/dashboard/test_sections_misc.py::test_error_summary_renderer_limits_to_three_when_more_errors PASSED [ 73%]
tests/visualization/dashboard/test_sections_misc.py::test_error_section_returns_placeholder_when_no_data_present PASSED [ 73%]
tests/visualization/dashboard/test_sections_misc.py::test_error_section_renders_components_when_metrics_present PASSED [ 73%]
tests/visualization/dashboard/test_sections_misc.py::test_specialized_section_returns_placeholder_when_no_metrics_present PASSED [ 73%]
tests/visualization/dashboard/test_sections_misc.py::test_specialized_section_renders_tabs_when_metrics_present PASSED [ 73%]
tests/visualization/dashboard/test_sections_misc.py::test_chart_script_assembler_creates_entries_when_configs_present PASSED [ 73%]
tests/visualization/dashboard/test_sections_misc.py::test_evaluate_threshold_state_returns_warning_when_between_thresholds PASSED [ 73%]
tests/visualization/dashboard/test_sections_misc.py::test_evaluate_threshold_state_supports_reverse_logic_when_reverse_true PASSED [ 74%]
tests/visualization/error_analytics/test_components.py::test_error_trend_builder_when_errors_present FAILED [ 74%]
tests/visualization/error_analytics/test_components.py::test_error_trends_generator_when_no_errors_returns_message PASSED [ 74%]
tests/visualization/error_analytics/test_components.py::test_error_distribution_builder_when_counts_requested PASSED [ 74%]
tests/visualization/error_analytics/test_components.py::test_error_distribution_generator_when_no_errors_returns_message PASSED [ 74%]
tests/visualization/error_analytics/test_components.py::test_error_distribution_builder_when_storage_missing_raises PASSED [ 74%]
tests/visualization/error_analytics/test_components.py::test_error_pattern_formatter_when_patterns_present PASSED [ 74%]
tests/visualization/error_analytics/test_components.py::test_error_pattern_generator_when_tracker_missing_returns_message PASSED [ 74%]
tests/visualization/error_analytics/test_components.py::test_error_pattern_generator_when_tracker_provides_patterns PASSED [ 74%]
tests/visualization/error_analytics/test_components.py::test_error_pattern_generator_when_storage_missing_raises PASSED [ 74%]
tests/visualization/error_analytics/test_components.py::test_top_errors_builder_when_summary_present PASSED [ 74%]
tests/visualization/error_analytics/test_components.py::test_top_errors_builder_when_storage_missing_raises PASSED [ 74%]
tests/visualization/error_analytics/test_components.py::test_top_errors_generator_when_no_data_returns_message PASSED [ 74%]
tests/visualization/error_analytics/test_components.py::test_top_errors_generator_when_storage_missing_raises PASSED [ 74%]
tests/visualization/error_analytics/test_components.py::test_dashboard_generator_when_components_succeed PASSED [ 75%]
tests/visualization/error_analytics/test_components.py::test_dashboard_generator_when_storage_missing_raises PASSED [ 75%]
tests/visualization/error_analytics/test_components.py::test_dashboard_renderer_when_sections_provided PASSED [ 75%]
tests/visualization/error_analytics/test_components.py::test_dashboard_renderer_when_summary_fails PASSED [ 75%]
tests/visualization/model_performance/test_latency_histogram_builder.py::test_build_returns_histogram_and_percentiles PASSED [ 75%]
tests/visualization/model_performance/test_latency_histogram_builder.py::test_build_with_no_metrics_returns_empty_dict PASSED [ 75%]
tests/visualization/model_performance/test_legacy_adapter.py::test_apply_populates_legacy_fields PASSED [ 75%]
tests/visualization/model_performance/test_model_comparison_generator.py::test_generate_data_returns_matrices_and_charts PASSED [ 75%]
tests/visualization/model_performance/test_model_performance_generator.py::test_generate_data_returns_expected_keys PASSED [ 75%]
tests/visualization/model_performance/test_model_performance_generator.py::test_generate_model_trend_data_filters_by_model PASSED [ 75%]
tests/visualization/model_performance/test_model_performance_generator.py::test_generate_data_with_guard_wraps_failures PASSED [ 75%]
tests/visualization/model_performance/test_summary_builder.py::test_build_returns_totals_and_per_model_stats PASSED [ 75%]
tests/visualization/model_performance/test_summary_builder.py::test_build_handles_empty_metrics PASSED [ 75%]
tests/visualization/model_performance/test_time_series_builder.py::test_build_generates_latency_and_volume_charts PASSED [ 75%]
tests/visualization/model_performance/test_time_series_builder.py::test_build_with_no_metrics_returns_empty_charts PASSED [ 75%]
tests/visualization/model_performance/test_trend_builder.py::test_group_metrics_by_day_clusters_by_calendar_day PASSED [ 76%]
tests/visualization/model_performance/test_trend_builder.py::test_build_trend_payload_produces_charts PASSED [ 76%]
tests/visualization/test_baseline_snapshots.py::test_resource_usage_snapshot PASSED [ 76%]
tests/visualization/test_baseline_snapshots.py::test_system_health_snapshot PASSED [ 76%]
tests/visualization/test_baseline_snapshots.py::test_model_performance_snapshot PASSED [ 76%]
tests/visualization/test_baseline_snapshots.py::test_model_comparison_snapshot PASSED [ 76%]
tests/visualization/test_baseline_snapshots.py::test_streaming_snapshot PASSED [ 76%]
tests/visualization/test_baseline_snapshots.py::test_batch_snapshot PASSED [ 76%]
tests/visualization/test_baseline_snapshots.py::test_errors_snapshot PASSED [ 76%]
tests/visualization/test_chart_schema_validation.py::test_chart_schema_validation[ResourceUsageChartGenerator-kwargs0] SKIPPED [ 76%]
tests/visualization/test_chart_schema_validation.py::test_chart_schema_validation[SystemHealthChartGenerator-kwargs1] SKIPPED [ 76%]
tests/visualization/test_chart_schema_validation.py::test_chart_schema_validation[BatchSizeOptimizationChartGenerator-kwargs2] SKIPPED [ 76%]
tests/visualization/test_chart_schema_validation.py::test_chart_schema_validation[ModelPerformanceChartGenerator-kwargs3] SKIPPED [ 76%]
tests/visualization/test_dashboard_context.py::test_build_uses_provided_charts_summary_and_meta PASSED [ 76%]
tests/visualization/test_dashboard_context.py::test_build_converts_legacy_payloads_to_chart_sections PASSED [ 77%]
tests/visualization/test_dashboard_renderer.py::test_render_composes_sections_and_scripts PASSED [ 77%]
tests/visualization/test_dashboard_renderer.py::test_render_skips_empty_sections PASSED [ 77%]
tests/visualization/test_dashboard_scripts.py::test_build_generates_scripts_for_available_charts PASSED [ 77%]
tests/visualization/test_dashboard_scripts.py::test_build_handles_missing_sections_gracefully PASSED [ 77%]
tests/visualization/test_schema_validator.py::test_structured_generators_schema[ResourceUsageChartGenerator-kwargs0] PASSED [ 77%]
tests/visualization/test_schema_validator.py::test_structured_generators_schema[SystemHealthChartGenerator-kwargs1] PASSED [ 77%]
tests/visualization/test_schema_validator.py::test_structured_generators_schema[BatchSizeOptimizationChartGenerator-kwargs2] PASSED [ 77%]
tests/voice/test_config_defaults.py::test_defaults_mirror_current_literals SKIPPED [ 77%]
tests/voice/test_config_overrides_apply.py::test_config_overrides_reflected PASSED [ 77%]
tests/voice/test_conversation_sm.py::test_import_neutrality PASSED       [ 77%]
tests/voice/test_conversation_sm.py::test_happy_path_followup_within_grace PASSED [ 77%]
tests/voice/test_conversation_sm.py::test_grace_expiry_ends_session PASSED [ 77%]
tests/voice/test_cutover_and_rollback.py::test_rollback_bypasses_new_modes PASSED [ 77%]
tests/voice/test_cutover_and_rollback.py::test_legacy_shim_warns_once PASSED [ 77%]
tests/voice/test_cutover_and_rollback.py::test_flags_on_still_use_orchestrator_path PASSED [ 78%]
tests/voice/test_health_heartbeat.py::test_voice_health_404_by_default PASSED [ 78%]
tests/voice/test_health_heartbeat.py::test_voice_health_ok_when_enabled PASSED [ 78%]
tests/voice/test_idle_grace_indicator_cadence.py::test_idle_grace_indicator_called_once PASSED [ 78%]
tests/voice/test_idle_grace_single_entry.py::test_idle_grace_indicator_called_once PASSED [ 78%]
tests/voice/test_import_neutrality.py::test_import_voice_config_has_no_side_effects PASSED [ 78%]
tests/voice/test_import_neutrality.py::test_import_stt_whisper_has_no_side_effects PASSED [ 78%]
tests/voice/test_import_neutrality.py::test_import_io_audio_has_no_side_effects PASSED [ 78%]
tests/voice/test_import_parity.py::test_import_parity[agents.companion.whisper_listener.audio-agents.companion.voice.stt_whisper-transcribe_audio-transcribe] PASSED [ 78%]
tests/voice/test_incident_log_policy.py::test_incident_log_off_by_default PASSED [ 78%]
tests/voice/test_incident_log_policy.py::test_incident_log_on_emits_minimal_json PASSED [ 78%]
tests/voice/test_incident_log_policy.py::test_privacy_guard_emits_incident_when_enabled PASSED [ 78%]
tests/voice/test_incident_log_policy.py::test_subproc_incident_on_failure_respects_flag PASSED [ 78%]
tests/voice/test_intent_router.py::test_route_intent_happy_path_note_returns_unhandled_signature_when_no_handler PASSED [ 78%]
tests/voice/test_intent_router.py::test_route_intent_unknown_falls_back_to_llm_service_stub[this will not match any intent] PASSED [ 79%]
tests/voice/test_intent_router.py::test_route_intent_unknown_falls_back_to_llm_service_stub[some random text] PASSED [ 79%]
tests/voice/test_intent_router.py::test_route_intent_unknown_falls_back_to_llm_service_stub[   \t  ] PASSED [ 79%]
tests/voice/test_intent_router.py::test_route_intent_unknown_falls_back_to_llm_service_stub[...?! \u2014\u2013\u2013 ,,, ( ) [ ] { } ;: /\\\\ ] PASSED [ 79%]
tests/voice/test_intent_router_contract.py::test_known_phrase_routes_to_action_when_actions_enabled PASSED [ 79%]
tests/voice/test_intent_router_contract.py::test_unknown_intents_fall_back_to_llm_service_stub[what time is it?] PASSED [ 79%]
tests/voice/test_intent_router_contract.py::test_unknown_intents_fall_back_to_llm_service_stub[random words that do not match] PASSED [ 79%]
tests/voice/test_intent_router_contract.py::test_config_override_can_force_service_even_for_known_action PASSED [ 79%]
tests/voice/test_intent_router_contract.py::test_task_phrase_routes_to_task_action_when_actions_enabled PASSED [ 79%]
tests/voice/test_intent_router_import_parity.py::test_legacy_router_shim_warns_and_exports[agents.companion.whisper_listener.intent_router-agents.companion.voice.orchestration.intent_router-route_intent-route_intent] PASSED [ 79%]
tests/voice/test_io_audio_contract.py::test_import_has_no_device_access PASSED [ 79%]
tests/voice/test_io_audio_contract.py::test_record_once_builds_args_from_config PASSED [ 79%]
tests/voice/test_io_audio_contract.py::test_record_with_vad_uses_shorter_window PASSED [ 79%]
tests/voice/test_latency_contract_smoke.py::test_latency_smoke_with_flips SKIPPED [ 79%]
tests/voice/test_log_redaction_filter.py::test_redaction_on_off[0] PASSED [ 80%]
tests/voice/test_log_redaction_filter.py::test_redaction_on_off[1] PASSED [ 80%]
tests/voice/test_log_redaction_filter.py::test_no_import_side_effects PASSED [ 80%]
tests/voice/test_logging_config.py::test_default_logging_disabled_creates_no_file PASSED [ 80%]
tests/voice/test_logging_config.py::test_enabled_logging_creates_rotating_file PASSED [ 80%]
tests/voice/test_logging_config.py::test_retention_removes_old_files PASSED [ 80%]
tests/voice/test_logging_config.py::test_setup_logger_triggers_retention_cleanup_when_enabled PASSED [ 80%]
tests/voice/test_logging_config.py::test_log_level_env_controls_emission PASSED [ 80%]
tests/voice/test_meeting_controller_and_stitcher.py::test_stitch_merges_and_dedups_overlap PASSED [ 80%]
tests/voice/test_meeting_controller_and_stitcher.py::test_controller_happy_path_and_ttft_under_budget PASSED [ 80%]
tests/voice/test_meeting_controller_and_stitcher.py::test_stitch_various[input_segs0-expected0] PASSED [ 80%]
tests/voice/test_meeting_controller_and_stitcher.py::test_stitch_various[input_segs1-expected1] PASSED [ 80%]
tests/voice/test_meeting_controller_and_stitcher.py::test_stitch_dedups_full_word_with_punct_overlap PASSED [ 80%]
tests/voice/test_meeting_controller_and_stitcher.py::test_stitch_handles_long_phrase_overlap PASSED [ 80%]
tests/voice/test_meeting_controller_and_stitcher.py::test_stitch_multi_segment_chain_with_punctuation PASSED [ 80%]
tests/voice/test_metrics_counters_optional.py::test_noop_by_default PASSED [ 81%]
tests/voice/test_metrics_counters_optional.py::test_enabled_counters_increment PASSED [ 81%]
tests/voice/test_metrics_export.py::test_voice_metrics_404_when_flag_off PASSED [ 81%]
tests/voice/test_metrics_export.py::test_voice_metrics_present_when_flag_on PASSED [ 81%]
tests/voice/test_metrics_export.py::test_voice_metrics_ops_alias_present_when_flag_on PASSED [ 81%]
tests/voice/test_metrics_export.py::test_voice_metrics_ops_404_when_flag_off PASSED [ 81%]
tests/voice/test_offline_mode.py::test_llm_offline_blocks_and_returns_fallback PASSED [ 81%]
tests/voice/test_offline_mode.py::test_backend_offline_blocks_and_returns_fallback PASSED [ 81%]
tests/voice/test_offline_mode.py::test_services_return_stubs_when_offline_disabled PASSED [ 81%]
tests/voice/test_orchestrator_bridge.py::test_flags_off_uses_legacy_path PASSED [ 81%]
tests/voice/test_orchestrator_bridge.py::test_flags_on_calls_orchestrator PASSED [ 81%]
tests/voice/test_orchestrator_bridge.py::test_orchestrator_exception_falls_back PASSED [ 81%]
tests/voice/test_orchestrator_plan_contract.py::test_stategraph_plan_sequences[True-False-expected_subsequence0] PASSED [ 81%]
tests/voice/test_orchestrator_plan_contract.py::test_stategraph_plan_sequences[False-True-expected_subsequence1] PASSED [ 81%]
tests/voice/test_orchestrator_plan_contract.py::test_stategraph_plan_sequences[True-True-expected_subsequence2] PASSED [ 82%]
tests/voice/test_privacy_guard_service_boundary.py::test_backend_service_uses_privacy_guard PASSED [ 82%]
tests/voice/test_privacy_guard_service_boundary.py::test_no_raw_subprocess_run_in_voice_package PASSED [ 82%]
tests/voice/test_rollout_flags.py::test_rollout_conv_100_always_on PASSED [ 82%]
tests/voice/test_rollout_flags.py::test_rollout_conv_0_always_skipped PASSED [ 82%]
tests/voice/test_rollout_flags.py::test_rollout_conv_50_halfish PASSED   [ 82%]
tests/voice/test_rollout_flags.py::test_rollout_meeting_0_100 PASSED     [ 82%]
tests/voice/test_rollout_flags.py::test_rollout_conv_50_statistical PASSED [ 82%]
tests/voice/test_router_force_service_flag.py::test_force_service_env_overrides_actions PASSED [ 82%]
tests/voice/test_router_import_neutrality.py::test_router_and_packages_import_neutral PASSED [ 82%]
tests/voice/test_stt_adapter_api.py::test_adapter_transcribe_cpu_calls_cli PASSED [ 82%]
tests/voice/test_stt_adapter_api.py::test_adapter_transcribe_gpu_adds_flag PASSED [ 82%]
tests/voice/test_stt_adapter_api.py::test_audio_shim_warns_and_exports_transcribe PASSED [ 82%]
tests/voice/test_stt_timeout_and_error_mapping.py::test_timeout_maps_to_timeout_error PASSED [ 82%]
tests/voice/test_stt_timeout_and_error_mapping.py::test_missing_binary_and_model PASSED [ 82%]
tests/voice/test_subproc_helper.py::test_failed_process_exposes_fields PASSED [ 83%]
tests/voice/test_subproc_helper.py::test_timeout_exposes_fields PASSED   [ 83%]
tests/voice/test_subproc_helper.py::test_failed_process_stderr_boundary_at_limit PASSED [ 83%]
tests/voice/test_subproc_helper.py::test_timeout_stderr_boundary_at_limit PASSED [ 83%]
tests/voice/test_summary_atomic_write.py::test_summary_write_is_atomic_and_sanitized PASSED [ 83%]
tests/voice/test_tts_dedup_and_cleanup.py::test_should_playback_normalization[Hello, world!-hello world-False] PASSED [ 83%]
tests/voice/test_tts_dedup_and_cleanup.py::test_should_playback_normalization[Hi-Hi-False] PASSED [ 83%]
tests/voice/test_tts_dedup_and_cleanup.py::test_should_playback_normalization[Hi-Hi!!!-False] PASSED [ 83%]
tests/voice/test_tts_dedup_and_cleanup.py::test_should_playback_normalization[Hello-Hello there-True] PASSED [ 83%]
tests/voice/test_tts_dedup_and_cleanup.py::test_should_playback_normalization[-Hello-True] PASSED [ 83%]
tests/voice/test_tts_dedup_and_cleanup.py::test_should_playback_normalization[Hello--False] PASSED [ 83%]
tests/voice/test_tts_dedup_and_cleanup.py::test_cleanup_temp_files_respects_voice_log_env PASSED [ 83%]
tests/voice/test_ui_badge_helper.py::test_all_widgets_share_rollback_badge[False] PASSED [ 83%]
tests/voice/test_ui_badge_helper.py::test_all_widgets_share_rollback_badge[True] PASSED [ 83%]
tests/voice/test_ui_toggles_and_panel.py::test_toggles_reflect_flags_import_neutral PASSED [ 84%]
tests/voice/test_ui_toggles_and_panel.py::test_meeting_panel_transcript_and_summary PASSED [ 84%]
tests/voice/test_ui_toggles_and_panel.py::test_idle_grace_indicator_called PASSED [ 84%]
tests/voice/test_voice_loop_conv_mode.py::test_legacy_single_turn_path_runs PASSED [ 84%]
tests/voice/test_voice_loop_conv_mode.py::test_conv_mode_invoked_and_followup_within_grace PASSED [ 84%]
tests/voice/test_voice_loop_meeting_guard.py::test_meeting_mode_guard_defaults_unchanged PASSED [ 84%]
tests/voice/test_voice_loop_meeting_guard.py::test_meeting_mode_guard_invokes_controller_and_overlap PASSED [ 84%]
tests/voice/test_voice_loop_meeting_mode.py::test_meeting_mode_uses_vad_capture_when_enabled PASSED [ 84%]
tests/voice/test_voice_loop_meeting_mode.py::test_meeting_mode_partial_emissions_are_ordered_no_dupes PASSED [ 84%]
tests/voice/test_whisper_cli_smoke.py::test_whisper_cli_end_to_end SKIPPED [ 84%]
agents/core/autonomy/tests/test_policy_loop.py::test_policy_emits_when_cpu_high PASSED [ 84%]
agents/core/autonomy/tests/test_policy_loop.py::test_policy_no_emit_when_cpu_normal PASSED [ 84%]
.repo_studios/tests/test_health_suite_orchestrator.py::test_orchestrator_includes_typecheck_step PASSED [ 84%]
.repo_studios/tests/test_health_suite_summary.py::test_summary_includes_typecheck_section PASSED [ 84%]
.repo_studios/tests/test_lizard_report.py::test_lizard_report_records_offenders PASSED [ 84%]
.repo_studios/tests/test_lizard_report.py::test_lizard_report_handles_missing_module PASSED [ 85%]
.repo_studios/tests/test_pytest_log_runner_paths.py::test_logs_dir_defaults_to_workspace_root PASSED [ 85%]
.repo_studios/tests/test_test_log_health_report_pick_best.py::test_pick_best_junit_prefers_multi_test_over_internal PASSED [ 85%]
.repo_studios/tests/test_typecheck_report.py::test_typecheck_report_with_mocked_mypy_output PASSED [ 85%]
.repo_studios/tests/test_typecheck_report_fast_mode.py::test_fast_mode_curates_targets PASSED [ 85%]
agents/core/monitoring/metrics_storage/tests/retention/metadata/test_api.py::TestModuleFunctions::test_find_recovery_options PASSED [ 85%]
agents/core/monitoring/metrics_storage/tests/retention/metadata/test_api.py::TestModuleFunctions::test_get_default_metadata_tracker PASSED [ 85%]
agents/core/monitoring/metrics_storage/tests/retention/metadata/test_api.py::TestModuleFunctions::test_record_cleanup PASSED [ 85%]
agents/core/monitoring/metrics_storage/tests/retention/metadata/test_api.py::TestModuleFunctions::test_set_default_metadata_tracker PASSED [ 85%]
agents/core/monitoring/metrics_storage/tests/retention/metadata/test_enums.py::TestCleanupEnums::test_cleanup_action_values PASSED [ 85%]
agents/core/monitoring/metrics_storage/tests/retention/metadata/test_enums.py::TestCleanupEnums::test_cleanup_reason_values PASSED [ 85%]
agents/core/monitoring/metrics_storage/tests/retention/metadata/test_integration.py::TestIntegration::test_end_to_end_metadata_workflow PASSED [ 85%]
agents/core/monitoring/metrics_storage/tests/retention/metadata/test_integration.py::TestIntegration::test_multiple_cleanup_operations PASSED [ 85%]
agents/core/monitoring/metrics_storage/tests/retention/metadata/test_record.py::TestMetadataRecord::test_from_dict PASSED [ 85%]
agents/core/monitoring/metrics_storage/tests/retention/metadata/test_record.py::TestMetadataRecord::test_from_json PASSED [ 86%]
agents/core/monitoring/metrics_storage/tests/retention/metadata/test_record.py::TestMetadataRecord::test_get_preferred_recovery_method PASSED [ 86%]
agents/core/monitoring/metrics_storage/tests/retention/metadata/test_record.py::TestMetadataRecord::test_has_recovery_options PASSED [ 86%]
agents/core/monitoring/metrics_storage/tests/retention/metadata/test_record.py::TestMetadataRecord::test_initialization PASSED [ 86%]
agents/core/monitoring/metrics_storage/tests/retention/metadata/test_record.py::TestMetadataRecord::test_record_recovery_attempt PASSED [ 86%]
agents/core/monitoring/metrics_storage/tests/retention/metadata/test_record.py::TestMetadataRecord::test_to_dict PASSED [ 86%]
agents/core/monitoring/metrics_storage/tests/retention/metadata/test_record.py::TestMetadataRecord::test_to_json PASSED [ 86%]
agents/core/monitoring/metrics_storage/tests/retention/metadata/test_record.py::TestMetadataRecord::test_update_recovery_options PASSED [ 86%]
agents/core/monitoring/metrics_storage/tests/retention/metadata/test_storage.py::TestMetadataStorage::test_delete_record PASSED [ 86%]
agents/core/monitoring/metrics_storage/tests/retention/metadata/test_storage.py::TestMetadataStorage::test_find_records PASSED [ 86%]
agents/core/monitoring/metrics_storage/tests/retention/metadata/test_storage.py::TestMetadataStorage::test_get_by_item PASSED [ 86%]
agents/core/monitoring/metrics_storage/tests/retention/metadata/test_storage.py::TestMetadataStorage::test_get_nonexistent PASSED [ 86%]
agents/core/monitoring/metrics_storage/tests/retention/metadata/test_storage.py::TestMetadataStorage::test_get_stats PASSED [ 86%]
agents/core/monitoring/metrics_storage/tests/retention/metadata/test_storage.py::TestMetadataStorage::test_initialization PASSED [ 86%]
agents/core/monitoring/metrics_storage/tests/retention/metadata/test_storage.py::TestMetadataStorage::test_purge_old_records PASSED [ 86%]
agents/core/monitoring/metrics_storage/tests/retention/metadata/test_storage.py::TestMetadataStorage::test_store_and_get PASSED [ 87%]
agents/core/monitoring/metrics_storage/tests/retention/metadata/test_storage.py::TestMetadataStorage::test_update_record PASSED [ 87%]
agents/core/monitoring/metrics_storage/tests/retention/metadata/test_tracker.py::TestCleanupMetadataTracker::test_find_recovery_options PASSED [ 87%]
agents/core/monitoring/metrics_storage/tests/retention/metadata/test_tracker.py::TestCleanupMetadataTracker::test_get_cleanup_info PASSED [ 87%]
agents/core/monitoring/metrics_storage/tests/retention/metadata/test_tracker.py::TestCleanupMetadataTracker::test_get_cleanup_stats PASSED [ 87%]
agents/core/monitoring/metrics_storage/tests/retention/metadata/test_tracker.py::TestCleanupMetadataTracker::test_initialization PASSED [ 87%]
agents/core/monitoring/metrics_storage/tests/retention/metadata/test_tracker.py::TestCleanupMetadataTracker::test_record_cleanup_aggregation PASSED [ 87%]
agents/core/monitoring/metrics_storage/tests/retention/metadata/test_tracker.py::TestCleanupMetadataTracker::test_record_cleanup_archival PASSED [ 87%]
agents/core/monitoring/metrics_storage/tests/retention/metadata/test_tracker.py::TestCleanupMetadataTracker::test_record_cleanup_with_audit_trail PASSED [ 87%]
agents/core/monitoring/metrics_storage/tests/retention/metadata/test_tracker.py::TestCleanupMetadataTracker::test_record_cleanup_with_tombstone PASSED [ 87%]
agents/core/monitoring/metrics_storage/tests/retention/metadata/test_tracker.py::TestCleanupMetadataTracker::test_record_recovery_attempt PASSED [ 87%]
agents/core/monitoring/metrics_storage/tests/retention/recovery/test_integrations.py::RecoveryIntegrationsTestCase::test_resolve_restore_from_tombstone_fallback PASSED [ 87%]
agents/core/monitoring/metrics_storage/tests/retention/recovery/test_integrations.py::RecoveryIntegrationsTestCase::test_resolve_restore_from_tombstone_prefers_alias_module PASSED [ 87%]
agents/core/monitoring/metrics_storage/tests/retention/recovery/test_manager_archive.py::RecoveryManagerArchiveTestCase::test_archive_copy_to_target_path PASSED [ 87%]
agents/core/monitoring/metrics_storage/tests/retention/recovery/test_manager_archive.py::RecoveryManagerArchiveTestCase::test_collect_recovery_options_detects_archive PASSED [ 88%]
agents/core/monitoring/metrics_storage/tests/retention/recovery/test_manager_archive.py::RecoveryManagerArchiveTestCase::test_recover_item_from_archive PASSED [ 88%]
agents/core/monitoring/metrics_storage/tests/retention/recovery/test_manager_archive.py::RecoveryManagerArchiveTestCase::test_restore_from_archive_missing_returns_none PASSED [ 88%]
agents/core/monitoring/metrics_storage/tests/retention/recovery/test_manager_archive.py::RecoveryManagerArchiveTestCase::test_restore_from_archive_non_json_with_target_path PASSED [ 88%]
agents/core/monitoring/metrics_storage/tests/retention/recovery/test_manager_archive.py::RecoveryManagerArchiveTestCase::test_restore_from_archive_non_json_without_target_returns_path PASSED [ 88%]
agents/core/monitoring/metrics_storage/tests/retention/recovery/test_manager_backup.py::RecoveryManagerBackupTestCase::test_find_recovery_options_includes_backup PASSED [ 88%]
agents/core/monitoring/metrics_storage/tests/retention/recovery/test_manager_backup.py::RecoveryManagerBackupTestCase::test_find_recovery_options_merges_metadata SKIPPED [ 88%]
agents/core/monitoring/metrics_storage/tests/retention/recovery/test_manager_backup.py::RecoveryManagerBackupTestCase::test_get_recovery_stats_reads_logs PASSED [ 88%]
agents/core/monitoring/metrics_storage/tests/retention/recovery/test_manager_backup.py::RecoveryManagerBackupTestCase::test_initialization_sets_directories PASSED [ 88%]
agents/core/monitoring/metrics_storage/tests/retention/recovery/test_manager_backup.py::RecoveryManagerBackupTestCase::test_log_recovery_result_persists_payload PASSED [ 88%]
agents/core/monitoring/metrics_storage/tests/retention/recovery/test_manager_backup.py::RecoveryManagerBackupTestCase::test_recover_item_from_backup_file PASSED [ 88%]
agents/core/monitoring/metrics_storage/tests/retention/recovery/test_manager_backup.py::RecoveryManagerBackupTestCase::test_recover_item_from_backup_uses_fallback_payload PASSED [ 88%]
agents/core/monitoring/metrics_storage/tests/retention/recovery/test_manager_backup.py::RecoveryManagerBackupTestCase::test_recover_nonexistent_item_records_error PASSED [ 88%]
agents/core/monitoring/metrics_storage/tests/retention/recovery/test_manager_backup.py::RecoveryManagerBackupTestCase::test_tombstone_short_circuit_success PASSED [ 88%]
agents/core/monitoring/metrics_storage/tests/retention/recovery/test_manager_original.py::RecoveryManagerOriginalDataTestCase::test_recover_item_from_original_data_option PASSED [ 88%]
agents/core/monitoring/metrics_storage/tests/retention/recovery/test_manager_original.py::RecoveryManagerOriginalDataTestCase::test_recover_item_original_data_option_missing_payload PASSED [ 89%]
agents/core/monitoring/metrics_storage/tests/retention/recovery/test_module_api.py::RecoveryModuleApiTestCase::test_find_recovery_options_delegates_to_manager PASSED [ 89%]
agents/core/monitoring/metrics_storage/tests/retention/recovery/test_module_api.py::RecoveryModuleApiTestCase::test_get_default_recovery_manager_singleton PASSED [ 89%]
agents/core/monitoring/metrics_storage/tests/retention/recovery/test_module_api.py::RecoveryModuleApiTestCase::test_recover_item_coerces_string_preference PASSED [ 89%]
agents/core/monitoring/metrics_storage/tests/retention/recovery/test_module_api.py::RecoveryModuleApiTestCase::test_set_default_recovery_manager_overrides PASSED [ 89%]
agents/core/monitoring/metrics_storage/tests/retention/recovery/test_options.py::RecoveryOptionsTestCase::test_attempt_restore_from_backup_missing PASSED [ 89%]
agents/core/monitoring/metrics_storage/tests/retention/recovery/test_options.py::RecoveryOptionsTestCase::test_attempt_restore_from_backup_reads_json PASSED [ 89%]
agents/core/monitoring/metrics_storage/tests/retention/recovery/test_options.py::RecoveryOptionsTestCase::test_attempt_restore_from_tombstone_handles_none PASSED [ 89%]
agents/core/monitoring/metrics_storage/tests/retention/recovery/test_options.py::RecoveryOptionsTestCase::test_attempt_restore_from_tombstone_invokes_callable PASSED [ 89%]
agents/core/monitoring/metrics_storage/tests/retention/recovery/test_options.py::RecoveryOptionsTestCase::test_normalize_preference_accepts_strings PASSED [ 89%]
agents/core/monitoring/metrics_storage/tests/retention/recovery/test_options.py::RecoveryOptionsTestCase::test_normalize_preference_handles_invalid PASSED [ 89%]
agents/core/monitoring/metrics_storage/tests/retention/recovery/test_options.py::RecoveryOptionsTestCase::test_prioritise_recovery_options_orders_sources PASSED [ 89%]
agents/core/monitoring/metrics_storage/tests/retention/recovery/test_options.py::RecoveryOptionsTestCase::test_prioritise_recovery_options_respects_preference PASSED [ 89%]
agents/core/monitoring/metrics_storage/tests/retention/recovery/test_options.py::RecoveryOptionsTestCase::test_resolve_recovery_options_from_metadata PASSED [ 89%]
agents/core/monitoring/metrics_storage/tests/retention/recovery/test_options.py::RecoveryOptionsTestCase::test_resolve_restore_callable_delegates PASSED [ 90%]
agents/core/monitoring/metrics_storage/tests/retention/recovery/test_results.py::TestRecoverySource::test_enum_values PASSED [ 90%]
agents/core/monitoring/metrics_storage/tests/retention/recovery/test_results.py::TestRecoveryError::test_initialization_defaults PASSED [ 90%]
agents/core/monitoring/metrics_storage/tests/retention/recovery/test_results.py::TestRecoveryError::test_initialization_with_code PASSED [ 90%]
agents/core/monitoring/metrics_storage/tests/retention/recovery/test_results.py::TestRecoveryResult::test_complete PASSED [ 90%]
agents/core/monitoring/metrics_storage/tests/retention/recovery/test_results.py::TestRecoveryResult::test_initial_state PASSED [ 90%]
agents/core/monitoring/metrics_storage/tests/retention/recovery/test_results.py::TestRecoveryResult::test_record_attempt PASSED [ 90%]
agents/core/monitoring/metrics_storage/tests/retention/recovery/test_results.py::TestRecoveryResult::test_record_error_flexibility PASSED [ 90%]
agents/core/monitoring/metrics_storage/tests/retention/recovery/test_results.py::TestRecoveryResult::test_set_metadata PASSED [ 90%]
agents/core/monitoring/metrics_storage/tests/retention/recovery/test_results.py::TestRecoveryResult::test_set_success PASSED [ 90%]
agents/core/monitoring/metrics_storage/tests/retention/recovery/test_results.py::TestRecoveryResult::test_to_dict_and_from_dict PASSED [ 90%]
agents/core/monitoring/metrics_storage/tests/retention/scheduler/test_scheduler_models.py::TestJobSchedule::test_serialization_round_trip PASSED [ 90%]
agents/core/monitoring/metrics_storage/tests/retention/scheduler/test_scheduler_models.py::TestJobSchedule::test_should_run_respects_time_constraints PASSED [ 90%]
agents/core/monitoring/metrics_storage/tests/retention/scheduler/test_scheduler_models.py::TestJobSchedule::test_update_after_run_advances_to_next_valid_slot PASSED [ 90%]
agents/core/monitoring/metrics_storage/tests/retention/scheduler/test_scheduler_models.py::TestJobInfo::test_serialization_round_trip PASSED [ 91%]
agents/core/monitoring/metrics_storage/tests/retention/scheduler/test_scheduler_models.py::TestJobInfo::test_status_and_result_tracking PASSED [ 91%]
agents/core/monitoring/metrics_storage/tests/retention/scheduler/test_scheduler_models.py::TestResourceLimits::test_from_legacy_arguments PASSED [ 91%]
agents/core/monitoring/metrics_storage/tests/retention/scheduler/test_scheduler_notifications.py::TestCleanupNotifier::test_notifications_respect_enabled_flag PASSED [ 91%]
agents/core/monitoring/metrics_storage/tests/retention/scheduler/test_scheduler_notifications.py::TestCleanupNotifier::test_notifications_write_logs_and_call_handlers PASSED [ 91%]
agents/core/monitoring/metrics_storage/tests/retention/scheduler/test_scheduler_resource_guard.py::TestResourceGuard::test_disk_space_emergency_callback PASSED [ 91%]
agents/core/monitoring/metrics_storage/tests/retention/scheduler/test_scheduler_resource_guard.py::TestResourceGuard::test_resource_constraints_detected PASSED [ 91%]
agents/core/monitoring/metrics_storage/tests/retention/scheduler/test_scheduler_worker_pool.py::TestWorkerPool::test_failing_job_execution PASSED [ 91%]
agents/core/monitoring/metrics_storage/tests/retention/scheduler/test_scheduler_worker_pool.py::TestWorkerPool::test_queue_full_returns_false PASSED [ 91%]
agents/core/monitoring/metrics_storage/tests/retention/scheduler/test_scheduler_worker_pool.py::TestWorkerPool::test_successful_job_execution PASSED [ 91%]
agents/core/monitoring/metrics_storage/tests/retention/test_aggregators.py::TestRetentionAggregators::test_apply_aggregation_strategy PASSED [ 91%]
agents/core/monitoring/metrics_storage/tests/retention/test_aggregators.py::TestRetentionAggregators::test_calculate_metrics_summary PASSED [ 91%]
agents/core/monitoring/metrics_storage/tests/retention/test_aggregators.py::TestRetentionAggregators::test_estimate_storage_savings PASSED [ 91%]
agents/core/monitoring/metrics_storage/tests/retention/test_audit.py::TestAudit::test_record_and_list PASSED [ 91%]
agents/core/monitoring/metrics_storage/tests/retention/test_audit.py::TestAudit::test_since_until_filters PASSED [ 91%]
agents/core/monitoring/metrics_storage/tests/retention/test_audit.py::TestAudit::test_summarize PASSED [ 92%]
agents/core/monitoring/metrics_storage/tests/retention/test_backup_cleanup_integration.py::TestBackupCleanupIntegration::test_backup_verification_during_cleanup PASSED [ 92%]
agents/core/monitoring/metrics_storage/tests/retention/test_backup_cleanup_integration.py::TestBackupCleanupIntegration::test_cleanup_with_different_importance_levels PASSED [ 92%]
agents/core/monitoring/metrics_storage/tests/retention/test_backup_cleanup_integration.py::TestBackupCleanupIntegration::test_integration_with_importance_based_backup PASSED [ 92%]
agents/core/monitoring/metrics_storage/tests/retention/test_backup_cleanup_integration.py::TestBackupCleanupIntegration::test_pre_cleanup_backup_creation PASSED [ 92%]
agents/core/monitoring/metrics_storage/tests/retention/test_backup_cleanup_integration.py::TestBackupCleanupIntegration::test_recovery_after_cleanup PASSED [ 92%]
agents/core/monitoring/metrics_storage/tests/retention/test_backup_cleanup_integration.py::TestBackupCleanupIntegration::test_tombstone_creation_during_cleanup PASSED [ 92%]
agents/core/monitoring/metrics_storage/tests/retention/test_cli.py::TestCLI::test_audit_record_and_list PASSED [ 92%]
agents/core/monitoring/metrics_storage/tests/retention/test_cli.py::TestCLI::test_batch_jsonl_stdout PASSED [ 92%]
agents/core/monitoring/metrics_storage/tests/retention/test_cli.py::TestCLI::test_env_base_dir_default_and_no_compress_flag PASSED [ 92%]
agents/core/monitoring/metrics_storage/tests/retention/test_cli.py::TestCLI::test_file_io_single_and_batch_and_errors PASSED [ 92%]
agents/core/monitoring/metrics_storage/tests/retention/test_cli.py::TestCLI::test_job_run_emits_insights PASSED [ 92%]
agents/core/monitoring/metrics_storage/tests/retention/test_cli.py::TestCLI::test_job_run_with_aggregate PASSED [ 92%]
agents/core/monitoring/metrics_storage/tests/retention/test_cli.py::TestCLI::test_policy_plan_plus_run_cli PASSED [ 92%]
agents/core/monitoring/metrics_storage/tests/retention/test_cli.py::TestCLI::test_unknown_cmd_error PASSED [ 93%]
agents/core/monitoring/metrics_storage/tests/retention/test_data_query.py::TestDataQuery::test_get_data_for_time_range_basic PASSED [ 93%]
agents/core/monitoring/metrics_storage/tests/retention/test_data_query.py::TestDataQuery::test_get_data_for_time_range_max_items_and_empty PASSED [ 93%]
agents/core/monitoring/metrics_storage/tests/retention/test_data_query.py::TestDataQuery::test_get_data_for_time_range_start_end_bounds PASSED [ 93%]
agents/core/monitoring/metrics_storage/tests/retention/test_jobs.py::TestJobBase::test_execute_success_and_failure PASSED [ 93%]
agents/core/monitoring/metrics_storage/tests/retention/test_jobs.py::TestAggregateMetricsJob::test_run_increments_aggregated PASSED [ 93%]
agents/core/monitoring/metrics_storage/tests/retention/test_jobs.py::TestArchiveDataJob::test_archives_items_from_context PASSED [ 93%]
agents/core/monitoring/metrics_storage/tests/retention/test_jobs.py::TestDeleteDataJob::test_deletes_items_not_in_keep PASSED [ 93%]
agents/core/monitoring/metrics_storage/tests/retention/test_jobs.py::TestPolicyExecutionJob::test_runs_subjobs_and_reports PASSED [ 93%]
agents/core/monitoring/metrics_storage/tests/retention/test_jobs.py::TestScheduleMaintenanceJob::test_run PASSED [ 93%]
agents/core/monitoring/metrics_storage/tests/retention/test_jobs.py::TestRegistry::test_job_types PASSED [ 93%]
agents/core/monitoring/metrics_storage/tests/retention/test_jobs_advanced.py::TestAdvancedArchiveJob::test_dry_run PASSED [ 93%]
agents/core/monitoring/metrics_storage/tests/retention/test_jobs_advanced.py::TestAdvancedArchiveJob::test_idempotency_marker_and_tar PASSED [ 93%]
agents/core/monitoring/metrics_storage/tests/retention/test_jobs_advanced.py::TestAdvancedArchiveJob::test_manifest_written PASSED [ 93%]
agents/core/monitoring/metrics_storage/tests/retention/test_jobs_advanced.py::TestAdvancedDeleteJob::test_delete_with_reason PASSED [ 93%]
agents/core/monitoring/metrics_storage/tests/retention/test_jobs_advanced.py::TestAdvancedDeleteJob::test_hard_delete_files PASSED [ 94%]
agents/core/monitoring/metrics_storage/tests/retention/test_jobs_advanced.py::TestPolicyPlanner::test_basic_insights_analyzer_emits_when_counts_positive PASSED [ 94%]
agents/core/monitoring/metrics_storage/tests/retention/test_jobs_advanced.py::TestPolicyPlanner::test_plan_simple_policy PASSED [ 94%]
agents/core/monitoring/metrics_storage/tests/retention/test_recovery.py::TestRecoverySource::test_enum_values PASSED [ 94%]
agents/core/monitoring/metrics_storage/tests/retention/test_recovery.py::TestRecoveryError::test_initialization PASSED [ 94%]
agents/core/monitoring/metrics_storage/tests/retention/test_recovery.py::TestRecoveryResult::test_complete PASSED [ 94%]
agents/core/monitoring/metrics_storage/tests/retention/test_recovery.py::TestRecoveryResult::test_from_dict PASSED [ 94%]
agents/core/monitoring/metrics_storage/tests/retention/test_recovery.py::TestRecoveryResult::test_initialization PASSED [ 94%]
agents/core/monitoring/metrics_storage/tests/retention/test_recovery.py::TestRecoveryResult::test_record_attempt PASSED [ 94%]
agents/core/monitoring/metrics_storage/tests/retention/test_recovery.py::TestRecoveryResult::test_record_error PASSED [ 94%]
agents/core/monitoring/metrics_storage/tests/retention/test_recovery.py::TestRecoveryResult::test_set_metadata PASSED [ 94%]
agents/core/monitoring/metrics_storage/tests/retention/test_recovery.py::TestRecoveryResult::test_set_success PASSED [ 94%]
agents/core/monitoring/metrics_storage/tests/retention/test_recovery.py::TestRecoveryResult::test_to_dict PASSED [ 94%]
agents/core/monitoring/metrics_storage/tests/retention/test_recovery.py::TestRecoveryManager::test_find_recovery_options PASSED [ 94%]
agents/core/monitoring/metrics_storage/tests/retention/test_recovery.py::TestRecoveryManager::test_get_recovery_stats PASSED [ 95%]
agents/core/monitoring/metrics_storage/tests/retention/test_recovery.py::TestRecoveryManager::test_initialization PASSED [ 95%]
agents/core/monitoring/metrics_storage/tests/retention/test_recovery.py::TestRecoveryManager::test_log_recovery_result PASSED [ 95%]
agents/core/monitoring/metrics_storage/tests/retention/test_recovery.py::TestRecoveryManager::test_recover_item_from_backup PASSED [ 95%]
agents/core/monitoring/metrics_storage/tests/retention/test_recovery.py::TestRecoveryManager::test_recover_item_from_original_data PASSED [ 95%]
agents/core/monitoring/metrics_storage/tests/retention/test_recovery.py::TestRecoveryManager::test_recover_item_from_tombstone PASSED [ 95%]
agents/core/monitoring/metrics_storage/tests/retention/test_recovery.py::TestRecoveryManager::test_recover_nonexistent_item PASSED [ 95%]
agents/core/monitoring/metrics_storage/tests/retention/test_recovery.py::TestModuleFunctions::test_find_recovery_options PASSED [ 95%]
agents/core/monitoring/metrics_storage/tests/retention/test_recovery.py::TestModuleFunctions::test_get_default_recovery_manager PASSED [ 95%]
agents/core/monitoring/metrics_storage/tests/retention/test_recovery.py::TestModuleFunctions::test_recover_item PASSED [ 95%]
agents/core/monitoring/metrics_storage/tests/retention/test_recovery.py::TestModuleFunctions::test_set_default_recovery_manager PASSED [ 95%]
agents/core/monitoring/metrics_storage/tests/retention/test_recovery.py::TestIntegration::test_end_to_end_recovery_workflow PASSED [ 95%]
agents/core/monitoring/metrics_storage/tests/retention/test_recovery.py::TestIntegration::test_recovery_priority_order PASSED [ 95%]
agents/core/monitoring/metrics_storage/tests/retention/test_recovery_alias_patch.py::TestRecoveryAliasPatching::test_patch_tombstone_under_agents_path PASSED [ 95%]
agents/core/monitoring/metrics_storage/tests/retention/test_schedular.py::TestJobSchedule::test_initialization PASSED [ 95%]
agents/core/monitoring/metrics_storage/tests/retention/test_schedular.py::TestJobSchedule::test_is_active PASSED [ 96%]
agents/core/monitoring/metrics_storage/tests/retention/test_schedular.py::TestJobSchedule::test_serialization PASSED [ 96%]
agents/core/monitoring/metrics_storage/tests/retention/test_schedular.py::TestJobSchedule::test_should_run_now PASSED [ 96%]
agents/core/monitoring/metrics_storage/tests/retention/test_schedular.py::TestJobSchedule::test_update_after_run PASSED [ 96%]
agents/core/monitoring/metrics_storage/tests/retention/test_schedular.py::TestJobInfo::test_initialization PASSED [ 96%]
agents/core/monitoring/metrics_storage/tests/retention/test_schedular.py::TestJobInfo::test_record_error PASSED [ 96%]
agents/core/monitoring/metrics_storage/tests/retention/test_schedular.py::TestJobInfo::test_record_result PASSED [ 96%]
agents/core/monitoring/metrics_storage/tests/retention/test_schedular.py::TestJobInfo::test_serialization PASSED [ 96%]
agents/core/monitoring/metrics_storage/tests/retention/test_schedular.py::TestJobInfo::test_update_status PASSED [ 96%]
agents/core/monitoring/metrics_storage/tests/retention/test_schedular.py::TestJobWorker::test_job_error PASSED [ 96%]
agents/core/monitoring/metrics_storage/tests/retention/test_schedular.py::TestJobWorker::test_run_job PASSED [ 96%]
agents/core/monitoring/metrics_storage/tests/retention/test_schedular.py::TestRetentionScheduler::test_cancel_job PASSED [ 96%]
agents/core/monitoring/metrics_storage/tests/retention/test_schedular.py::TestRetentionScheduler::test_get_job_info PASSED [ 96%]
agents/core/monitoring/metrics_storage/tests/retention/test_schedular.py::TestRetentionScheduler::test_get_scheduler_stats PASSED [ 96%]
agents/core/monitoring/metrics_storage/tests/retention/test_schedular.py::TestRetentionScheduler::test_list_jobs PASSED [ 97%]
agents/core/monitoring/metrics_storage/tests/retention/test_schedular.py::TestRetentionScheduler::test_pause_resume PASSED [ 97%]
agents/core/monitoring/metrics_storage/tests/retention/test_schedular.py::TestRetentionScheduler::test_save_load_state PASSED [ 97%]
agents/core/monitoring/metrics_storage/tests/retention/test_schedular.py::TestRetentionScheduler::test_schedule_job PASSED [ 97%]
agents/core/monitoring/metrics_storage/tests/retention/test_schedular.py::TestRetentionScheduler::test_schedule_unknown_job PASSED [ 97%]
agents/core/monitoring/metrics_storage/tests/retention/test_schedular.py::TestRetentionScheduler::test_scheduler_initialization PASSED [ 97%]
agents/core/monitoring/metrics_storage/tests/retention/test_schedular.py::TestRetentionScheduler::test_start_stop PASSED [ 97%]
agents/core/monitoring/metrics_storage/tests/retention/test_schedular.py::TestDefaultScheduler::test_get_default_scheduler PASSED [ 97%]
agents/core/monitoring/metrics_storage/tests/retention/test_schedular.py::TestDefaultScheduler::test_set_default_scheduler PASSED [ 97%]
agents/core/monitoring/metrics_storage/tests/retention/test_utils.py::TestRetentionUtils::test_aggregation_helpers_re_exported PASSED [ 97%]
agents/core/monitoring/metrics_storage/tests/retention/test_utils.py::TestRetentionUtils::test_cleanup_temporary_files PASSED [ 97%]
agents/core/monitoring/metrics_storage/tests/retention/test_utils.py::TestRetentionUtils::test_create_archive_metadata PASSED [ 97%]
agents/core/monitoring/metrics_storage/tests/retention/test_utils.py::TestRetentionUtils::test_get_data_for_time_range_alias PASSED [ 97%]
agents/core/monitoring/metrics_storage/tests/retention/test_utils.py::TestRetentionUtils::test_get_retention_info PASSED [ 97%]
agents/core/monitoring/metrics_storage/tests/retention/test_utils.py::TestRetentionUtils::test_validate_data_for_archive PASSED [ 97%]
agents/core/monitoring/metrics_storage/tests/retention/tombstones/test_tombstone_backup_integration.py::TestTombstoneBackupIntegration::test_tombstone_invokes_backup_verifier PASSED [ 98%]
agents/core/monitoring/metrics_storage/tests/retention/tombstones/test_tombstone_backup_integration.py::TestTombstoneBackupIntegration::test_tombstone_lifecycle_with_recovery PASSED [ 98%]
agents/core/monitoring/metrics_storage/tests/retention/tombstones/test_tombstone_manager.py::TestTombstoneManager::test_check_for_auto_purge_runs_once_per_day PASSED [ 98%]
agents/core/monitoring/metrics_storage/tests/retention/tombstones/test_tombstone_manager.py::TestTombstoneManager::test_create_and_get_tombstone PASSED [ 98%]
agents/core/monitoring/metrics_storage/tests/retention/tombstones/test_tombstone_manager.py::TestTombstoneManager::test_create_tombstone_from_deleted_item_extracts_metadata PASSED [ 98%]
agents/core/monitoring/metrics_storage/tests/retention/tombstones/test_tombstone_manager.py::TestTombstoneManager::test_find_tombstone_for_item_prefers_active PASSED [ 98%]
agents/core/monitoring/metrics_storage/tests/retention/tombstones/test_tombstone_manager.py::TestTombstoneManager::test_find_tombstones_by_filters PASSED [ 98%]
agents/core/monitoring/metrics_storage/tests/retention/tombstones/test_tombstone_manager.py::TestTombstoneManager::test_get_missing_tombstone_returns_none PASSED [ 98%]
agents/core/monitoring/metrics_storage/tests/retention/tombstones/test_tombstone_manager.py::TestTombstoneManager::test_get_tombstone_stats PASSED [ 98%]
agents/core/monitoring/metrics_storage/tests/retention/tombstones/test_tombstone_manager.py::TestTombstoneManager::test_initialization_uses_storage_dir PASSED [ 98%]
agents/core/monitoring/metrics_storage/tests/retention/tombstones/test_tombstone_manager.py::TestTombstoneManager::test_mark_tombstone_recovered_unknown_id PASSED [ 98%]
agents/core/monitoring/metrics_storage/tests/retention/tombstones/test_tombstone_manager.py::TestTombstoneManager::test_mark_tombstone_recovered_updates_state PASSED [ 98%]
agents/core/monitoring/metrics_storage/tests/retention/tombstones/test_tombstone_manager.py::TestTombstoneManager::test_purge_expired_tombstones PASSED [ 98%]
agents/core/monitoring/metrics_storage/tests/retention/tombstones/test_tombstone_manager.py::TestTombstoneManager::test_update_and_delete_tombstone PASSED [ 98%]
agents/core/monitoring/metrics_storage/tests/retention/tombstones/test_tombstone_module_functions.py::TestTombstoneModuleFunctions::test_create_tombstone_delegates_to_default_manager PASSED [ 99%]
agents/core/monitoring/metrics_storage/tests/retention/tombstones/test_tombstone_module_functions.py::TestTombstoneModuleFunctions::test_find_tombstone_for_item_delegates PASSED [ 99%]
agents/core/monitoring/metrics_storage/tests/retention/tombstones/test_tombstone_module_functions.py::TestTombstoneModuleFunctions::test_get_default_tombstone_manager_allows_custom_dir PASSED [ 99%]
agents/core/monitoring/metrics_storage/tests/retention/tombstones/test_tombstone_module_functions.py::TestTombstoneModuleFunctions::test_set_default_tombstone_manager_overrides_previous PASSED [ 99%]
agents/core/monitoring/metrics_storage/tests/retention/tombstones/test_tombstone_record.py::TestTombstoneRecord::test_custom_initialization_honors_inputs PASSED [ 99%]
agents/core/monitoring/metrics_storage/tests/retention/tombstones/test_tombstone_record.py::TestTombstoneRecord::test_from_dict_and_from_json_respects_data PASSED [ 99%]
agents/core/monitoring/metrics_storage/tests/retention/tombstones/test_tombstone_record.py::TestTombstoneRecord::test_has_backup PASSED [ 99%]
agents/core/monitoring/metrics_storage/tests/retention/tombstones/test_tombstone_record.py::TestTombstoneRecord::test_initialization_assigns_defaults PASSED [ 99%]
agents/core/monitoring/metrics_storage/tests/retention/tombstones/test_tombstone_record.py::TestTombstoneRecord::test_is_expired PASSED [ 99%]
agents/core/monitoring/metrics_storage/tests/retention/tombstones/test_tombstone_record.py::TestTombstoneRecord::test_record_recovery_attempt_updates_state PASSED [ 99%]
agents/core/monitoring/metrics_storage/tests/retention/tombstones/test_tombstone_record.py::TestTombstoneRecord::test_to_dict_and_to_json_roundtrip PASSED [ 99%]
agents/core/monitoring/metrics_storage/tests/retention/tombstones/test_tombstone_record.py::TestTombstoneRecord::test_update_status_records_recovery_time PASSED [ 99%]
agents/core/monitoring/metrics_storage/tests/retention/tombstones/test_tombstone_record.py::TestTombstoneRecord::test_verify_backup_exists_returns_true_when_backup_path_without_verifier PASSED [ 99%]
agents/core/monitoring/metrics_storage/tests/retention/tombstones/test_tombstone_record.py::TestTombstoneRecord::test_verify_backup_exists_uses_resolved_verifier PASSED [ 99%]
agents/core/monitoring/metrics_storage/tests/retention/tombstones/test_tombstone_status.py::TestTombstoneStatus::test_enum_values PASSED [100%]

=================================== FAILURES ===================================
____________________ test_top_level_anchor_slug_uniqueness _____________________

    def test_top_level_anchor_slug_uniqueness():  # noqa: D401 - simple assertion style
        """Enforce uniqueness and ratchet duplicate reduction.
    
            Two layers:
                1. Hard fail: No cross-file H1/H2 duplicates outside ALLOWED (transitional set + generic).
                2. Ratchet: Cross-file duplicate count (ignoring only GENERIC_ALLOWED) must not exceed
                     the snapshot in tests/docs/anchor_slug_baseline.json.
    
            Transitional state: ALLOWED will shrink only after headings are renamed; keep
            contraction work tracked under phase16-doc-dedupe.
        """
        # Enforcement layer (uses broad ALLOWED)
        enforced_map = _collect_h1_h2_slugs(ALLOWED)
        enforced_dupes = _multi_file_duplicates(enforced_map)
        if enforced_dupes:
            details = "\n".join(f"{s}: {', '.join(locs)}" for s, locs in sorted(enforced_dupes.items()))
>           raise AssertionError(
                "Duplicate top-level anchor slugs detected (outside ALLOWED).\n"
                "Reduce by renaming or temporarily extend ALLOWED with justification in test docstring.\n"
                f"Offenders ({len(enforced_dupes)}):\n{details}"
            )
E           AssertionError: Duplicate top-level anchor slugs detected (outside ALLOWED).
E           Reduce by renaming or temporarily extend ALLOWED with justification in test docstring.
E           Offenders (21):
E           1-cohort-overview: docs/agents/step18_pilot_report_template.md:9, docs/agents/step18_pilot_report.md:9
E           2-success-metrics-summary: docs/agents/step18_pilot_report_template.md:18, docs/agents/step18_pilot_report.md:20
E           3-telemetry-snapshots: docs/agents/step18_pilot_report_template.md:28, docs/agents/step18_pilot_report.md:35
E           4-standards-and-compliance-checklist: docs/agents/step18_pilot_report_template.md:37, docs/agents/step18_pilot_report.md:50
E           5-user-feedback-and-backlog: docs/agents/step18_pilot_report_template.md:51, docs/agents/step18_pilot_report.md:66
E           6-risk-and-rollback-assessment: docs/agents/step18_pilot_report_template.md:58, docs/agents/step18_pilot_report.md:75
E           7-decision-log: docs/agents/step18_pilot_report_template.md:65, docs/agents/step18_pilot_report.md:85
E           approvals: docs/agents/step18_founder_summary_template.md:47, docs/agents/step18_rollout_checklist.md:36, docs/agents/step18_founder_summary.md:47
E           data-shapes: docs/standards/trend_aggregation_standards.md:59, docs/standards/trend_pipeline.md:59
E           definitions: docs/standards/trend_aggregation_standards.md:29, docs/standards/trend_pipeline.md:29
E           evidence-links: docs/agents/step18_founder_summary_template.md:41, docs/agents/step18_founder_summary.md:41
E           executive-overview: docs/agents/step18_founder_summary_template.md:9, docs/agents/step18_founder_summary.md:7
E           governance-audit: docs/standards/trend_aggregation_standards.md:84, docs/standards/trend_pipeline.md:84
E           highlights-and-risks: docs/agents/step18_founder_summary_template.md:26, docs/agents/step18_founder_summary.md:24
E           key-outcomes: docs/agents/step18_founder_summary_template.md:16, docs/agents/step18_founder_summary.md:14
E           machine-readable-snapshot: docs/standards/trend_aggregation_standards.md:91, docs/standards/trend_pipeline.md:91
E           observability-hooks: docs/standards/trend_aggregation_standards.md:68, docs/standards/trend_pipeline.md:68, docs/extending/warmers.md:75
E           policy-and-procedures: docs/standards/trend_aggregation_standards.md:47, docs/standards/trend_pipeline.md:47
E           required-actions: docs/agents/step18_founder_summary_template.md:35, docs/agents/step18_founder_summary.md:35
E           standards-alignment: docs/standards/trend_aggregation_standards.md:38, docs/standards/dashboard_instrumentation_standards.md:23, docs/standards/trend_pipeline.md:38
E           validation-evidence: docs/standards/trend_aggregation_standards.md:75, docs/standards/trend_pipeline.md:75

tests/docs/test_global_anchors.py:148: AssertionError
_______________ test_collector_service_emits_metrics_and_alerts ________________

self = <agents.core.monitoring.collector.resource_pipeline.ResourcePipeline object at 0x7bf6ce4df3d0>
system_status = {'cpu_percent': 10.0, 'disk_percent': 30.0, 'gpu_available': False, 'ram_percent': 20.0, ...}

    def _store(self, system_status: dict[str, Any]) -> None:
        if not self._metrics_storage:
            return
        try:
>           self._metrics_storage.store_resource_metrics(system_status)
E           AttributeError: 'DatabaseMetricsStorage' object has no attribute 'store_resource_metrics'

agents/core/monitoring/collector/resource_pipeline.py:61: AttributeError

The above exception was the direct cause of the following exception:

monkeypatch = <_pytest.monkeypatch.MonkeyPatch object at 0x7bfa3fdbce50>

    def test_collector_service_emits_metrics_and_alerts(monkeypatch):
        # Use a resource monitor with deterministic output
        class DummyMonitor(ResourceMonitor):
            def __init__(self):
                pass
    
            def get_system_status(self):
                return {
                    "cpu_percent": 10.0,
                    "ram_percent": 20.0,
                    "disk_percent": 30.0,
                    "gpu_available": False,
                }
    
        bus = EventBus()
        topics: list[str] = []
        bus.subscribe("alerts.*", lambda m: topics.append(m.topic))
        bus.subscribe("metrics.*", lambda m: topics.append(m.topic))
    
        coll = CollectorService(resource_monitor=DummyMonitor(), collection_interval=0.01, bus=bus)
        # Call a single collection step
>       coll._collect_resource_metrics()

tests/messaging/test_integration_event_emissions.py:53: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
agents/core/monitoring/collector_service.py:404: in _collect_resource_metrics
    status = self.resource_pipeline.run_if_due(now)
agents/core/monitoring/collector/resource_pipeline.py:44: in run_if_due
    self._store(status)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <agents.core.monitoring.collector.resource_pipeline.ResourcePipeline object at 0x7bf6ce4df3d0>
system_status = {'cpu_percent': 10.0, 'disk_percent': 30.0, 'gpu_available': False, 'ram_percent': 20.0, ...}

    def _store(self, system_status: dict[str, Any]) -> None:
        if not self._metrics_storage:
            return
        try:
            self._metrics_storage.store_resource_metrics(system_status)
        except Exception as exc:
>           raise ResourcePipelineError("Failed to store resource metrics") from exc
E           agents.core.monitoring.collector.resource_pipeline.ResourcePipelineError: Failed to store resource metrics

agents/core/monitoring/collector/resource_pipeline.py:63: ResourcePipelineError
_________________ test_error_trend_builder_when_errors_present _________________

monkeypatch = <_pytest.monkeypatch.MonkeyPatch object at 0x7bf6ce14b4d0>

    def test_error_trend_builder_when_errors_present(monkeypatch: pytest.MonkeyPatch) -> None:
        base_time = datetime(2025, 1, 2, 12, 0, 0)
    
        class _FixedDatetime(datetime):
            @classmethod
            def now(cls, tz=None) -> _FixedDatetime:  # pylint: disable=unused-argument
                return cls.fromisoformat(base_time.isoformat())
    
        monkeypatch.setattr(
            ErrorTrendDataBuilder, "_format_timestamp", staticmethod(lambda value: value[:16])
        )
        monkeypatch.setattr("agents.core.monitoring.visualization.error_analytics_components.trends.datetime", _FixedDatetime)
    
        past = base_time - timedelta(hours=1)
        storage = _StubStorage(
            errors=[
                _build_error(past, severity="CRITICAL", component="ingest"),
                _build_error(past, severity="ERROR", component="ingest"),
                _build_error(base_time, severity="WARNING", component="processor"),
            ]
        )
        builder = ErrorTrendDataBuilder(storage)
    
        series = builder.build(days=1, interval_hours=1)
    
        assert series is not None
>       assert series.critical[-2:] == [1, 0]
E       AssertionError: assert [0, 0] == [1, 0]
E         
E         At index 0 diff: 0 != 1
E         
E         Full diff:
E           [
E         -     1,
E         ?     ^...
E         
E         ...Full output truncated (4 lines hidden), use '-vv' to show

tests/visualization/error_analytics/test_components.py:75: AssertionError
=============================== warnings summary ===============================
../../../mnt/jarvis2/.venv/lib/python3.11/site-packages/_pytest/config/__init__.py:831
  /mnt/jarvis2/.venv/lib/python3.11/site-packages/_pytest/config/__init__.py:831: PytestAssertRewriteWarning: Module already imported so cannot be rewritten: conftest_app_builder
    self.import_plugin(import_spec)

tests/agents/core/test_model_registry.py::test_module_main_block_executes_with_runpy
  <frozen runpy>:128: RuntimeWarning: 'agents.core.model_registry' found in sys.modules after import of package 'agents.core', but prior to execution of 'agents.core.model_registry'; this may result in unpredictable behaviour

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
- generated xml file: /home/founder/jarvis2/.repo_studios/pytest_logs/junit_2025-10-17_0708.xml -
================================ tests coverage ================================
_______________ coverage: platform linux, python 3.11.0-final-0 ________________

Coverage HTML written to dir /home/founder/jarvis2/.repo_studios/pytest_logs/coverage_html_2025-10-17_0708
Coverage XML written to file /home/founder/jarvis2/.repo_studios/pytest_logs/coverage_2025-10-17_0708.xml
============================= slowest 25 durations =============================
10.24s call     .repo_studios/tests/test_health_suite_orchestrator.py::test_orchestrator_includes_typecheck_step
9.42s call     tests/api/test_model_selection_histogram_and_endpoint.py::test_model_selection_dedicated_endpoint_and_histogram_lines
7.88s call     tests/api/test_eventbus_metrics_exposure.py::test_eventbus_metrics_increments_with_publish_and_sse
6.64s call     tests/lint/test_no_cache_impl_imports.py::test_no_imports_of_api_cache_impl
6.25s call     tests/api/test_ws_chat.py::test_ws_chat_auth_enforced_when_api_key_set
6.04s call     tests/agents/service_management/test_service_start_metrics_tier.py::test_api_start_metrics_tier_probes_and_debug_logging
6.02s call     tests/agents/service_management/test_service_start_probe_metrics_exposition.py::test_api_start_probe_metrics_exposed
5.72s call     tests/agents/service_management/test_service_start_shutdown_snapshot.py::test_shutdown_timeout_warning
4.06s call     tests/agents/service_management/test_restart_wrapper.py::test_restart_giveup
3.56s call     tests/api/test_ws_chat.py::test_ws_chat_backpressure_many_small_deltas_when_low_threshold
3.54s call     tests/api/test_ws_chat.py::test_ws_chat_backpressure_fewer_deltas_when_large_threshold
3.32s call     tests/api/test_ws_chat_contract_fake.py::test_ws_fake_idle_soft_emits_once
3.30s call     tests/test_perf_thresholds.py::test_perf_thresholds
3.20s call     tests/api/test_ws_chat.py::test_ws_chat_stream_happy_path
3.20s call     tests/api/test_ws_chat_contract_fake.py::test_ws_fake_happy_path_ack_delta_done
3.19s call     tests/api/test_ws_chat_contract_fake.py::test_ws_fake_done_contains_elapsed_and_usage
2.66s call     tests/api/test_model_selection_metrics_exposure.py::test_model_selection_metrics_exposed_when_chat_autoselects
2.65s call     tests/api/test_model_selection_histogram_and_endpoint.py::test_model_selection_histogram_lines_present_in_metrics
2.26s call     tests/integration/test_storage_health_rules_hash.py::test_storage_health_exposes_rules_hash_and_detail
2.18s call     tests/agents/repair/test_repair_orchestrator_tight_loop.py::test_orchestrator_runs_repair_agent_and_updates_snapshot
1.87s call     tests/agents/service_management/test_service_start_misc_flags.py::test_api_start_timeout_simulated_delay
1.82s call     tests/api/test_ws_chat.py::test_ws_chat_idle_and_session_timeout_paths
1.80s call     tests/systemd/test_watchdog_status_updates.py::test_status_emits_periodically
1.77s call     tests/agents/service_management/test_service_start_shutdown_snapshot.py::test_shutdown_snapshot_written
1.74s call     tests/agents/service_management/test_restart_wrapper.py::test_restart_wrapper_recovers
=========================== short test summary info ============================
SKIPPED [1] agents/core/monitoring/metrics_storage/tests/retention/test_tombstone.py:13: Legacy tombstone tests were replaced by modular suites under tests/retention/tombstones/
SKIPPED [1] tests/agents/core/test_agent_template.py:126: WS JSON control channel for resubscribe not implemented yet
SKIPPED [1] tests/agents/core/test_intent_router_phase3.py:262: Performance check disabled by default
SKIPPED [1] tests/agents/orchestrator/test_config_perf_phase14.py:38: ENABLE_HEAVY_TESTS not enabled
SKIPPED [1] tests/agents/orchestrator/test_config_perf_phase14.py:75: ENABLE_HEAVY_TESTS not enabled
SKIPPED [1] tests/agents/orchestrator/test_config_perf_phase14.py:109: ENABLE_HEAVY_TESTS not enabled
SKIPPED [1] tests/agents/service_management/test_service_start_metrics_tier.py:52: metrics probe lines absent due to readiness timeout
SKIPPED [1] tests/agents/service_management/test_service_start_probe_metrics_exposition.py:52: api_start did not reach ready state (no port discovered); skipping metrics probe assertion
SKIPPED [1] tests/agents/service_management/test_service_start_unified_flag_config.py:69: manifest loader rejected minimal stub: rc=14 stderr=2025-10-17 07:10:09,292 - chainlit - INFO - Loaded .env file
2025-10-17 07:10:09,685 - service_start - INFO - supervision.mode=internal internal_restart=disabled prod=False supervised=False single_retry=False
2025-10-17 07:10:09,713 - service_start - ERROR - manifest validation failed: service[0] unknown fields: ['kind']
SKIPPED [1] tests/api/test_agent_instance_metrics.py:26: feature flag disabled
SKIPPED [1] tests/api/test_agent_instance_metrics.py:75: feature flag disabled
SKIPPED [1] tests/api/test_cache_invariants.py:117: cache_cross_scope_hit_total not exported yet
SKIPPED [1] tests/api/test_events_sse.py:182: integration streaming disabled (set RUN_INTEGRATION_STREAM=1 to enable)
SKIPPED [1] tests/api/test_ui_ws_metrics_exposure.py:23: /ws/ui route not registered (feature flag off at app build time)
SKIPPED [1] tests/api/test_ws_ui_scaffold.py:23: ws/ui route not registered (feature flag off at import)
SKIPPED [1] tests/e2e/test_events_end_to_end.py:227: Streaming SSE variant is flaky under ASGITransport; stabilize later
SKIPPED [1] tests/visualization/test_chart_schema_validation.py:133: Generator ResourceUsageChartGenerator returned error in unit context: No metrics storage available
SKIPPED [1] tests/visualization/test_chart_schema_validation.py:133: Generator SystemHealthChartGenerator returned error in unit context: No metrics storage available
SKIPPED [1] tests/visualization/test_chart_schema_validation.py:133: Generator BatchSizeOptimizationChartGenerator returned error in unit context: No metrics storage available
SKIPPED [1] tests/visualization/test_chart_schema_validation.py:133: Generator ModelPerformanceChartGenerator returned error in unit context: No metrics storage available
SKIPPED [1] tests/voice/test_config_defaults.py:4: Phase 1 later step will enable
SKIPPED [1] tests/voice/test_latency_contract_smoke.py:6: Enabled in later phases or with explicit env flips
SKIPPED [1] tests/voice/test_whisper_cli_smoke.py:6: Requires local whisper-cli and model assets; enable manually
SKIPPED [1] agents/core/monitoring/metrics_storage/tests/retention/recovery/test_manager_backup.py:135: Metadata module not available
= 3 failed, 1417 passed, 24 skipped, 2 xfailed, 2 warnings in 411.39s (0:06:51) =
