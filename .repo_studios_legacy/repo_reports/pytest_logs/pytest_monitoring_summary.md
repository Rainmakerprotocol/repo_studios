# Monitoring Tests (2025-10-13 11:00)
testpaths: tests, agents/interface/chainlit/tests, agents/core/autonomy/tests, .repo_studios/tests, agents/core/monitoring/metrics_storage/tests
agents/core/monitoring/metrics_storage/tests/retention/test_audit.py::TestAudit::test_record_and_list PASSED [ 87%]
agents/core/monitoring/metrics_storage/tests/retention/test_audit.py::TestAudit::test_since_until_filters PASSED [ 87%]
agents/core/monitoring/metrics_storage/tests/retention/test_audit.py::TestAudit::test_summarize PASSED [ 88%]
agents/core/monitoring/metrics_storage/tests/retention/test_backup_cleanup_integration.py::TestBackupCleanupIntegration::test_backup_verification_during_cleanup PASSED [ 88%]
agents/core/monitoring/metrics_storage/tests/retention/test_backup_cleanup_integration.py::TestBackupCleanupIntegration::test_cleanup_with_different_importance_levels PASSED [ 88%]
agents/core/monitoring/metrics_storage/tests/retention/test_backup_cleanup_integration.py::TestBackupCleanupIntegration::test_integration_with_importance_based_backup PASSED [ 88%]
agents/core/monitoring/metrics_storage/tests/retention/test_backup_cleanup_integration.py::TestBackupCleanupIntegration::test_pre_cleanup_backup_creation PASSED [ 88%]
agents/core/monitoring/metrics_storage/tests/retention/test_backup_cleanup_integration.py::TestBackupCleanupIntegration::test_recovery_after_cleanup PASSED [ 88%]
agents/core/monitoring/metrics_storage/tests/retention/test_backup_cleanup_integration.py::TestBackupCleanupIntegration::test_tombstone_creation_during_cleanup PASSED [ 88%]
agents/core/monitoring/metrics_storage/tests/retention/test_cli.py::TestCLI::test_audit_record_and_list PASSED [ 88%]
agents/core/monitoring/metrics_storage/tests/retention/test_cli.py::TestCLI::test_batch_jsonl_stdout PASSED [ 88%]
agents/core/monitoring/metrics_storage/tests/retention/test_cli.py::TestCLI::test_env_base_dir_default_and_no_compress_flag PASSED [ 88%]
agents/core/monitoring/metrics_storage/tests/retention/test_cli.py::TestCLI::test_file_io_single_and_batch_and_errors PASSED [ 88%]
agents/core/monitoring/metrics_storage/tests/retention/test_cli.py::TestCLI::test_job_run_emits_insights PASSED [ 88%]
agents/core/monitoring/metrics_storage/tests/retention/test_cli.py::TestCLI::test_job_run_with_aggregate PASSED [ 88%]
agents/core/monitoring/metrics_storage/tests/retention/test_cli.py::TestCLI::test_policy_plan_plus_run_cli PASSED [ 89%]
agents/core/monitoring/metrics_storage/tests/retention/test_cli.py::TestCLI::test_unknown_cmd_error PASSED [ 89%]
agents/core/monitoring/metrics_storage/tests/retention/test_jobs.py::TestJobBase::test_execute_success_and_failure PASSED [ 89%]
agents/core/monitoring/metrics_storage/tests/retention/test_jobs.py::TestAggregateMetricsJob::test_run_increments_aggregated PASSED [ 89%]
agents/core/monitoring/metrics_storage/tests/retention/test_jobs.py::TestArchiveDataJob::test_archives_items_from_context PASSED [ 89%]
agents/core/monitoring/metrics_storage/tests/retention/test_jobs.py::TestDeleteDataJob::test_deletes_items_not_in_keep PASSED [ 89%]
agents/core/monitoring/metrics_storage/tests/retention/test_jobs.py::TestPolicyExecutionJob::test_runs_subjobs_and_reports PASSED [ 89%]
agents/core/monitoring/metrics_storage/tests/retention/test_jobs.py::TestScheduleMaintenanceJob::test_run PASSED [ 89%]
agents/core/monitoring/metrics_storage/tests/retention/test_jobs.py::TestRegistry::test_job_types PASSED [ 89%]
agents/core/monitoring/metrics_storage/tests/retention/test_jobs_advanced.py::TestAdvancedArchiveJob::test_dry_run PASSED [ 89%]
agents/core/monitoring/metrics_storage/tests/retention/test_jobs_advanced.py::TestAdvancedArchiveJob::test_idempotency_marker_and_tar PASSED [ 89%]
agents/core/monitoring/metrics_storage/tests/retention/test_jobs_advanced.py::TestAdvancedArchiveJob::test_manifest_written PASSED [ 89%]
agents/core/monitoring/metrics_storage/tests/retention/test_jobs_advanced.py::TestAdvancedDeleteJob::test_delete_with_reason PASSED [ 89%]
agents/core/monitoring/metrics_storage/tests/retention/test_jobs_advanced.py::TestAdvancedDeleteJob::test_hard_delete_files PASSED [ 90%]
agents/core/monitoring/metrics_storage/tests/retention/test_jobs_advanced.py::TestPolicyPlanner::test_basic_insights_analyzer_emits_when_counts_positive PASSED [ 90%]
agents/core/monitoring/metrics_storage/tests/retention/test_jobs_advanced.py::TestPolicyPlanner::test_plan_simple_policy PASSED [ 90%]
agents/core/monitoring/metrics_storage/tests/retention/test_metadata.py::TestCleanupEnums::test_cleanup_action_values PASSED [ 90%]
agents/core/monitoring/metrics_storage/tests/retention/test_metadata.py::TestCleanupEnums::test_cleanup_reason_values PASSED [ 90%]
agents/core/monitoring/metrics_storage/tests/retention/test_metadata.py::TestMetadataRecord::test_from_dict PASSED [ 90%]
agents/core/monitoring/metrics_storage/tests/retention/test_metadata.py::TestMetadataRecord::test_from_json PASSED [ 90%]
agents/core/monitoring/metrics_storage/tests/retention/test_metadata.py::TestMetadataRecord::test_get_preferred_recovery_method PASSED [ 90%]
agents/core/monitoring/metrics_storage/tests/retention/test_metadata.py::TestMetadataRecord::test_has_recovery_options PASSED [ 90%]
agents/core/monitoring/metrics_storage/tests/retention/test_metadata.py::TestMetadataRecord::test_initialization PASSED [ 90%]
agents/core/monitoring/metrics_storage/tests/retention/test_metadata.py::TestMetadataRecord::test_record_recovery_attempt PASSED [ 90%]
agents/core/monitoring/metrics_storage/tests/retention/test_metadata.py::TestMetadataRecord::test_to_dict PASSED [ 90%]
agents/core/monitoring/metrics_storage/tests/retention/test_metadata.py::TestMetadataRecord::test_to_json PASSED [ 91%]
agents/core/monitoring/metrics_storage/tests/retention/test_metadata.py::TestMetadataRecord::test_update_recovery_options PASSED [ 91%]
agents/core/monitoring/metrics_storage/tests/retention/test_metadata.py::TestMetadataStorage::test_delete_record PASSED [ 91%]
agents/core/monitoring/metrics_storage/tests/retention/test_metadata.py::TestMetadataStorage::test_find_records PASSED [ 91%]
agents/core/monitoring/metrics_storage/tests/retention/test_metadata.py::TestMetadataStorage::test_get_by_item PASSED [ 91%]
agents/core/monitoring/metrics_storage/tests/retention/test_metadata.py::TestMetadataStorage::test_get_nonexistent PASSED [ 91%]
agents/core/monitoring/metrics_storage/tests/retention/test_metadata.py::TestMetadataStorage::test_get_stats PASSED [ 91%]
agents/core/monitoring/metrics_storage/tests/retention/test_metadata.py::TestMetadataStorage::test_initialization PASSED [ 91%]
agents/core/monitoring/metrics_storage/tests/retention/test_metadata.py::TestMetadataStorage::test_purge_old_records PASSED [ 91%]
agents/core/monitoring/metrics_storage/tests/retention/test_metadata.py::TestMetadataStorage::test_store_and_get PASSED [ 91%]
agents/core/monitoring/metrics_storage/tests/retention/test_metadata.py::TestMetadataStorage::test_update_record PASSED [ 91%]
agents/core/monitoring/metrics_storage/tests/retention/test_metadata.py::TestCleanupMetadataTracker::test_find_recovery_options PASSED [ 91%]
agents/core/monitoring/metrics_storage/tests/retention/test_metadata.py::TestCleanupMetadataTracker::test_get_cleanup_info PASSED [ 91%]
agents/core/monitoring/metrics_storage/tests/retention/test_metadata.py::TestCleanupMetadataTracker::test_get_cleanup_stats PASSED [ 92%]
agents/core/monitoring/metrics_storage/tests/retention/test_metadata.py::TestCleanupMetadataTracker::test_initialization PASSED [ 92%]
agents/core/monitoring/metrics_storage/tests/retention/test_metadata.py::TestCleanupMetadataTracker::test_record_cleanup_aggregation PASSED [ 92%]
agents/core/monitoring/metrics_storage/tests/retention/test_metadata.py::TestCleanupMetadataTracker::test_record_cleanup_archival PASSED [ 92%]
agents/core/monitoring/metrics_storage/tests/retention/test_metadata.py::TestCleanupMetadataTracker::test_record_cleanup_with_audit_trail SKIPPED [ 92%]
agents/core/monitoring/metrics_storage/tests/retention/test_metadata.py::TestCleanupMetadataTracker::test_record_cleanup_with_tombstone PASSED [ 92%]
agents/core/monitoring/metrics_storage/tests/retention/test_metadata.py::TestCleanupMetadataTracker::test_record_recovery_attempt PASSED [ 92%]
agents/core/monitoring/metrics_storage/tests/retention/test_metadata.py::TestModuleFunctions::test_find_recovery_options PASSED [ 92%]
agents/core/monitoring/metrics_storage/tests/retention/test_metadata.py::TestModuleFunctions::test_get_default_metadata_tracker PASSED [ 92%]
agents/core/monitoring/metrics_storage/tests/retention/test_metadata.py::TestModuleFunctions::test_record_cleanup PASSED [ 92%]
agents/core/monitoring/metrics_storage/tests/retention/test_metadata.py::TestModuleFunctions::test_set_default_metadata_tracker PASSED [ 92%]
agents/core/monitoring/metrics_storage/tests/retention/test_metadata.py::TestIntegration::test_end_to_end_metadata_workflow PASSED [ 92%]
agents/core/monitoring/metrics_storage/tests/retention/test_metadata.py::TestIntegration::test_multiple_cleanup_operations PASSED [ 93%]
agents/core/monitoring/metrics_storage/tests/retention/test_recovery.py::TestRecoverySource::test_enum_values PASSED [ 93%]
agents/core/monitoring/metrics_storage/tests/retention/test_recovery.py::TestRecoveryError::test_initialization PASSED [ 93%]
agents/core/monitoring/metrics_storage/tests/retention/test_recovery.py::TestRecoveryResult::test_complete PASSED [ 93%]
agents/core/monitoring/metrics_storage/tests/retention/test_recovery.py::TestRecoveryResult::test_from_dict PASSED [ 93%]
agents/core/monitoring/metrics_storage/tests/retention/test_recovery.py::TestRecoveryResult::test_initialization PASSED [ 93%]
agents/core/monitoring/metrics_storage/tests/retention/test_recovery.py::TestRecoveryResult::test_record_attempt PASSED [ 93%]
agents/core/monitoring/metrics_storage/tests/retention/test_recovery.py::TestRecoveryResult::test_record_error PASSED [ 93%]
agents/core/monitoring/metrics_storage/tests/retention/test_recovery.py::TestRecoveryResult::test_set_metadata PASSED [ 93%]
agents/core/monitoring/metrics_storage/tests/retention/test_recovery.py::TestRecoveryResult::test_set_success PASSED [ 93%]
agents/core/monitoring/metrics_storage/tests/retention/test_recovery.py::TestRecoveryResult::test_to_dict PASSED [ 93%]
agents/core/monitoring/metrics_storage/tests/retention/test_recovery.py::TestRecoveryManager::test_find_recovery_options PASSED [ 93%]
agents/core/monitoring/metrics_storage/tests/retention/test_recovery.py::TestRecoveryManager::test_get_recovery_stats PASSED [ 93%]
agents/core/monitoring/metrics_storage/tests/retention/test_recovery.py::TestRecoveryManager::test_initialization PASSED [ 94%]
agents/core/monitoring/metrics_storage/tests/retention/test_recovery.py::TestRecoveryManager::test_log_recovery_result PASSED [ 94%]
agents/core/monitoring/metrics_storage/tests/retention/test_recovery.py::TestRecoveryManager::test_recover_item_from_backup PASSED [ 94%]
agents/core/monitoring/metrics_storage/tests/retention/test_recovery.py::TestRecoveryManager::test_recover_item_from_original_data PASSED [ 94%]
agents/core/monitoring/metrics_storage/tests/retention/test_recovery.py::TestRecoveryManager::test_recover_item_from_tombstone PASSED [ 94%]
agents/core/monitoring/metrics_storage/tests/retention/test_recovery.py::TestRecoveryManager::test_recover_nonexistent_item PASSED [ 94%]
agents/core/monitoring/metrics_storage/tests/retention/test_recovery.py::TestModuleFunctions::test_find_recovery_options PASSED [ 94%]
agents/core/monitoring/metrics_storage/tests/retention/test_recovery.py::TestModuleFunctions::test_get_default_recovery_manager PASSED [ 94%]
agents/core/monitoring/metrics_storage/tests/retention/test_recovery.py::TestModuleFunctions::test_recover_item PASSED [ 94%]
agents/core/monitoring/metrics_storage/tests/retention/test_recovery.py::TestModuleFunctions::test_set_default_recovery_manager PASSED [ 94%]
agents/core/monitoring/metrics_storage/tests/retention/test_recovery.py::TestIntegration::test_end_to_end_recovery_workflow PASSED [ 94%]
agents/core/monitoring/metrics_storage/tests/retention/test_recovery.py::TestIntegration::test_recovery_priority_order PASSED [ 94%]
agents/core/monitoring/metrics_storage/tests/retention/test_recovery_alias_patch.py::TestRecoveryAliasPatching::test_patch_tombstone_under_agents_path PASSED [ 94%]
agents/core/monitoring/metrics_storage/tests/retention/test_schedular.py::TestJobSchedule::test_initialization PASSED [ 95%]
agents/core/monitoring/metrics_storage/tests/retention/test_schedular.py::TestJobSchedule::test_is_active PASSED [ 95%]
agents/core/monitoring/metrics_storage/tests/retention/test_schedular.py::TestJobSchedule::test_serialization PASSED [ 95%]
agents/core/monitoring/metrics_storage/tests/retention/test_schedular.py::TestJobSchedule::test_should_run_now PASSED [ 95%]
agents/core/monitoring/metrics_storage/tests/retention/test_schedular.py::TestJobSchedule::test_update_after_run PASSED [ 95%]
agents/core/monitoring/metrics_storage/tests/retention/test_schedular.py::TestJobInfo::test_initialization PASSED [ 95%]
agents/core/monitoring/metrics_storage/tests/retention/test_schedular.py::TestJobInfo::test_record_error PASSED [ 95%]
agents/core/monitoring/metrics_storage/tests/retention/test_schedular.py::TestJobInfo::test_record_result PASSED [ 95%]
agents/core/monitoring/metrics_storage/tests/retention/test_schedular.py::TestJobInfo::test_serialization PASSED [ 95%]
agents/core/monitoring/metrics_storage/tests/retention/test_schedular.py::TestJobInfo::test_update_status PASSED [ 95%]
agents/core/monitoring/metrics_storage/tests/retention/test_schedular.py::TestJobWorker::test_job_error PASSED [ 95%]
agents/core/monitoring/metrics_storage/tests/retention/test_schedular.py::TestJobWorker::test_run_job PASSED [ 95%]
agents/core/monitoring/metrics_storage/tests/retention/test_schedular.py::TestRetentionScheduler::test_cancel_job PASSED [ 96%]
agents/core/monitoring/metrics_storage/tests/retention/test_schedular.py::TestRetentionScheduler::test_get_job_info PASSED [ 96%]
agents/core/monitoring/metrics_storage/tests/retention/test_schedular.py::TestRetentionScheduler::test_get_scheduler_stats PASSED [ 96%]
agents/core/monitoring/metrics_storage/tests/retention/test_schedular.py::TestRetentionScheduler::test_list_jobs PASSED [ 96%]
agents/core/monitoring/metrics_storage/tests/retention/test_schedular.py::TestRetentionScheduler::test_pause_resume PASSED [ 96%]
agents/core/monitoring/metrics_storage/tests/retention/test_schedular.py::TestRetentionScheduler::test_save_load_state PASSED [ 96%]
agents/core/monitoring/metrics_storage/tests/retention/test_schedular.py::TestRetentionScheduler::test_schedule_job PASSED [ 96%]
agents/core/monitoring/metrics_storage/tests/retention/test_schedular.py::TestRetentionScheduler::test_schedule_unknown_job PASSED [ 96%]
agents/core/monitoring/metrics_storage/tests/retention/test_schedular.py::TestRetentionScheduler::test_scheduler_initialization PASSED [ 96%]
agents/core/monitoring/metrics_storage/tests/retention/test_schedular.py::TestRetentionScheduler::test_start_stop PASSED [ 96%]
agents/core/monitoring/metrics_storage/tests/retention/test_schedular.py::TestDefaultScheduler::test_get_default_scheduler PASSED [ 96%]
agents/core/monitoring/metrics_storage/tests/retention/test_schedular.py::TestDefaultScheduler::test_set_default_scheduler PASSED [ 96%]
agents/core/monitoring/metrics_storage/tests/retention/test_tombstone.py::TestTombstoneStatus::test_enum_values PASSED [ 96%]
agents/core/monitoring/metrics_storage/tests/retention/test_tombstone.py::TestTombstoneRecord::test_custom_initialization PASSED [ 97%]
agents/core/monitoring/metrics_storage/tests/retention/test_tombstone.py::TestTombstoneRecord::test_from_dict PASSED [ 97%]
agents/core/monitoring/metrics_storage/tests/retention/test_tombstone.py::TestTombstoneRecord::test_from_json PASSED [ 97%]
agents/core/monitoring/metrics_storage/tests/retention/test_tombstone.py::TestTombstoneRecord::test_has_backup PASSED [ 97%]
agents/core/monitoring/metrics_storage/tests/retention/test_tombstone.py::TestTombstoneRecord::test_initialization PASSED [ 97%]
agents/core/monitoring/metrics_storage/tests/retention/test_tombstone.py::TestTombstoneRecord::test_is_expired PASSED [ 97%]
agents/core/monitoring/metrics_storage/tests/retention/test_tombstone.py::TestTombstoneRecord::test_record_recovery_attempt PASSED [ 97%]
agents/core/monitoring/metrics_storage/tests/retention/test_tombstone.py::TestTombstoneRecord::test_to_dict PASSED [ 97%]
agents/core/monitoring/metrics_storage/tests/retention/test_tombstone.py::TestTombstoneRecord::test_to_json PASSED [ 97%]
agents/core/monitoring/metrics_storage/tests/retention/test_tombstone.py::TestTombstoneRecord::test_update_status PASSED [ 97%]
agents/core/monitoring/metrics_storage/tests/retention/test_tombstone.py::TestTombstoneRecord::test_verify_backup_exists PASSED [ 97%]
agents/core/monitoring/metrics_storage/tests/retention/test_tombstone.py::TestTombstoneManager::test_check_for_auto_purge PASSED [ 97%]
agents/core/monitoring/metrics_storage/tests/retention/test_tombstone.py::TestTombstoneManager::test_create_tombstone PASSED [ 98%]
agents/core/monitoring/metrics_storage/tests/retention/test_tombstone.py::TestTombstoneManager::test_create_tombstone_from_deleted_item PASSED [ 98%]
agents/core/monitoring/metrics_storage/tests/retention/test_tombstone.py::TestTombstoneManager::test_delete_tombstone PASSED [ 98%]
agents/core/monitoring/metrics_storage/tests/retention/test_tombstone.py::TestTombstoneManager::test_find_tombstone_for_item PASSED [ 98%]
agents/core/monitoring/metrics_storage/tests/retention/test_tombstone.py::TestTombstoneManager::test_find_tombstones PASSED [ 98%]
agents/core/monitoring/metrics_storage/tests/retention/test_tombstone.py::TestTombstoneManager::test_get_nonexistent_tombstone PASSED [ 98%]
agents/core/monitoring/metrics_storage/tests/retention/test_tombstone.py::TestTombstoneManager::test_get_tombstone PASSED [ 98%]
agents/core/monitoring/metrics_storage/tests/retention/test_tombstone.py::TestTombstoneManager::test_get_tombstone_stats PASSED [ 98%]
agents/core/monitoring/metrics_storage/tests/retention/test_tombstone.py::TestTombstoneManager::test_initialization PASSED [ 98%]
agents/core/monitoring/metrics_storage/tests/retention/test_tombstone.py::TestTombstoneManager::test_mark_tombstone_recovered PASSED [ 98%]
agents/core/monitoring/metrics_storage/tests/retention/test_tombstone.py::TestTombstoneManager::test_purge_expired_tombstones PASSED [ 98%]
agents/core/monitoring/metrics_storage/tests/retention/test_tombstone.py::TestTombstoneManager::test_update_tombstone PASSED [ 98%]
agents/core/monitoring/metrics_storage/tests/retention/test_tombstone.py::TestModuleFunctions::test_create_tombstone PASSED [ 98%]
agents/core/monitoring/metrics_storage/tests/retention/test_tombstone.py::TestModuleFunctions::test_find_tombstone_for_item PASSED [ 99%]
agents/core/monitoring/metrics_storage/tests/retention/test_tombstone.py::TestModuleFunctions::test_get_default_tombstone_manager PASSED [ 99%]
agents/core/monitoring/metrics_storage/tests/retention/test_tombstone.py::TestModuleFunctions::test_set_default_tombstone_manager PASSED [ 99%]
agents/core/monitoring/metrics_storage/tests/retention/test_tombstone.py::TestIntegrationWithBackup::test_tombstone_lifecycle_with_recovery PASSED [ 99%]
agents/core/monitoring/metrics_storage/tests/retention/test_tombstone.py::TestIntegrationWithBackup::test_tombstone_with_backup_verification PASSED [ 99%]
agents/core/monitoring/metrics_storage/tests/retention/test_utils.py::TestRetentionUtils::test_apply_aggregation_strategy PASSED [ 99%]
agents/core/monitoring/metrics_storage/tests/retention/test_utils.py::TestRetentionUtils::test_calculate_metrics_summary PASSED [ 99%]
agents/core/monitoring/metrics_storage/tests/retention/test_utils.py::TestRetentionUtils::test_cleanup_temporary_files PASSED [ 99%]
agents/core/monitoring/metrics_storage/tests/retention/test_utils.py::TestRetentionUtils::test_create_archive_metadata PASSED [ 99%]
agents/core/monitoring/metrics_storage/tests/retention/test_utils.py::TestRetentionUtils::test_estimate_storage_savings PASSED [ 99%]
agents/core/monitoring/metrics_storage/tests/retention/test_utils.py::TestRetentionUtils::test_get_data_for_time_range PASSED [ 99%]
agents/core/monitoring/metrics_storage/tests/retention/test_utils.py::TestRetentionUtils::test_get_retention_info PASSED [ 99%]
agents/core/monitoring/metrics_storage/tests/retention/test_utils.py::TestRetentionUtils::test_validate_data_for_archive PASSED [100%]
SKIPPED [1] agents/core/monitoring/metrics_storage/tests/retention/test_metadata.py:659: Audit module not available
